/*! @locomotivemtl/charcoal-admin 23-01-2018 */

function init_infoBox(){BB.gmap.infobox.prototype=new google.maps.OverlayView,BB.gmap.infobox.prototype.remove=function(){if(this._div){try{this._div.parentNode.removeChild(this._div)}catch(t){}this._div=null}},BB.gmap.infobox.prototype.set_position=function(t){if(!t)return this;if("string"==typeof t&&(t=t.split(",")),!(t instanceof google.maps.LatLng)){if(void 0===t[0]||void 0===t[1])return this;t=new google.maps.LatLng(t[0],t[1])}return this.opts.position=t,this.map&&this.draw(),this},BB.gmap.infobox.prototype.set_map=function(t){this.__MAP=t,this.setMap(this.__MAP)},BB.gmap.infobox.prototype.draw=function(){this.createElement(),google.maps.event.trigger(this.__MAP,"infobox_opened",{elem:this});var t=this.getProjection().fromLatLngToDivPixel(this.opts.position);t&&(this._div.style.width=this._width+"px",this._div.style.left=t.x+this._offsetX+"px",this._div.style.height=this._height+"px",this._div.style.top=t.y+this._offsetY+"px",this._div.style.display="block",this._div.style.zIndex=1)},BB.gmap.infobox.prototype.createElement=function(){this.generateInfoboxContent();var t=this.getPanes(),e=this._div;if(e&&e.parentNode!=t.floatPane)try{e.parentNode.removeChild(e)}catch(t){}e||((e=this._div=document.createElement("div")).style.border="0",e.style.position="absolute"),e.innerHTML="",e.appendChild(this.__ELEM),t.floatPane.appendChild(e),this._height=this.__ELEM.offsetHeight,this._width=this.__ELEM.offsetWidth,e.style.width=this._width+"px",e.style.height=this._height+"px",e.setAttribute("class","gmap_infobox");var i=this.opts.placement.split(" ");switch(i[0]){case"top":this._offsetY=-parseFloat(this.opts.offsetY);break;case"over":this._offsetY=-parseFloat(this.opts.offsetY)-parseInt(this._height);break;case"bottom":this._offsetY=-parseFloat(this._height);break;case"under":this._offsetY=0;break;case"center":this._offsetY=-parseFloat(this.opts.offsetY)/2-parseInt(this._height)/2}switch(i[1]){case"right":this._offsetX=parseFloat(this.opts.offsetX)-parseInt(this._width);break;case"left":this._offsetX=-parseFloat(this.opts.offsetX);break;case"center":this._offsetX=-parseInt(this._width)/2;break;case"out-right":this._offsetX=parseFloat(this.opts.offsetX);break;case"out-left":this._offsetX=-parseFloat(this.opts.offsetX)-parseInt(this._width)}this.panMap()},BB.gmap.infobox.prototype.generateInfoboxContent=function(){var t=this.infoboxContent;if("function"==typeof t&&(t=t(this.__MARKER.data())),"number"==typeof t&&(t=t.toString()),"string"==typeof t){var e=document.getElementById(t);e||((e=document.createElement("div")).style.position="absolute",e.innerHTML=t),t=e}return t instanceof jQuery&&(t=t.get(0)),this.__ELEM=t,this},BB.gmap.infobox.prototype.refresh=function(){this.generateInfoboxContent()},BB.gmap.infobox.prototype.panMap=function(){var t=this.map,e=t.getBounds();if(e){var i=this.opts.position,n=this._width,s=this._height,o=this._offsetX,r=this._offsetY,a=t.getDiv(),l=a.offsetWidth,h=a.offsetHeight,c=e.toSpan(),d=c.lng()/l,p=c.lat()/h,u=(e.getSouthWest().lng(),e.getNorthEast().lng(),e.getNorthEast().lat(),e.getSouthWest().lat(),i.lng(),i.lng(),i.lat(),i.lat(),t.getCenter());if(!u||void 0===u)return!1;u.lng(),u.lat(),null!==this._bounds_changed_listener&&google.maps.event.removeListener(this._bounds_changed_listener),this._bounds_changed_listener=null}}}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var s,o,r,a=e.nodeName.toLowerCase();return"area"===a?(s=e.parentNode,o=s.name,!(!e.href||!o||"map"!==s.nodeName.toLowerCase())&&(!!(r=t("img[usemap='#"+o+"']")[0])&&i(r))):(/^(input|select|textarea|button|object)$/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),s=isNaN(n);return(s||n>=0)&&e(i,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,o){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?r["inner"+i].call(this):this.each(function(){t(this).css(o,n(this,e)+"px")})},t.fn["outer"+i]=function(e,s){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,s)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,s=t(this[0]);s.length&&s[0]!==document;){if(("absolute"===(i=s.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;o.length>s;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}};var n=0,s=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{(n=t._data(s,"events"))&&n.remove&&t(s).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,o,r,a,l={},h=e.split(".")[0];return e=e.split(".")[1],s=h+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[h]=t[h]||{},o=t[h][e],r=t[h][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),r.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||e:e},l,{constructor:r,namespace:h,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,n,o=s.call(arguments,1),r=0,a=o.length;a>r;r++)for(i in o[r])n=o[r][i],o[r].hasOwnProperty(i)&&void 0!==n&&(e[i]=t.isPlainObject(n)?t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,a=s.call(arguments,1),l=this;return r?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,a))!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(a.length&&(o=t.widget.extend.apply(null,[o].concat(a))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new i(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(s=r[e]=t.widget.extend({},this.options[e]),o=0;n.length-1>o;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,r){function a(){return e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?s.delegate(c,h,a):i.bind(h,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}}),t.widget;var o=!1;t(document).mouseup(function(){o=!1}),t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,s=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!s&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),o=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function e(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var n,s,o=Math.max,r=Math.abs,a=Math.round,l=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,u=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||s?i.width():i.outerWidth(),height:n||s?i.height():i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return u.apply(this,arguments);n=t.extend({},n);var p,f,g,m,v,y,b=t(n.of),_=t.position.getWithinInfo(n.within),w=t.position.getScrollInfo(_),x=(n.collision||"flip").split(" "),C={};return y=function(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(b),b[0].preventDefault&&(n.at="left top"),f=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=c.exec(i[0]),e=c.exec(i[1]),C[this]=[t?t[0]:0,e?e[0]:0],n[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===n.at[0]?v.left+=f:"center"===n.at[0]&&(v.left+=f/2),"bottom"===n.at[1]?v.top+=g:"center"===n.at[1]&&(v.top+=g/2),p=e(C.at,f,g),v.left+=p[0],v.top+=p[1],this.each(function(){var l,h,c=t(this),d=c.outerWidth(),u=c.outerHeight(),y=i(this,"marginLeft"),k=i(this,"marginTop"),S=d+y+i(this,"marginRight")+w.width,D=u+k+i(this,"marginBottom")+w.height,M=t.extend({},v),T=e(C.my,c.outerWidth(),c.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=u:"center"===n.my[1]&&(M.top-=u/2),M.left+=T[0],M.top+=T[1],s||(M.left=a(M.left),M.top=a(M.top)),l={marginLeft:y,marginTop:k},t.each(["left","top"],function(e,i){t.ui.position[x[e]]&&t.ui.position[x[e]][i](M,{targetWidth:f,targetHeight:g,elemWidth:d,elemHeight:u,collisionPosition:l,collisionWidth:S,collisionHeight:D,offset:[p[0]+T[0],p[1]+T[1]],my:n.my,at:n.at,within:_,elem:c})}),n.using&&(h=function(t){var e=m.left-M.left,i=e+f-d,s=m.top-M.top,a=s+g-u,l={target:{element:b,left:m.left,top:m.top,width:f,height:g},element:{element:c,left:M.left,top:M.top,width:d,height:u},horizontal:0>i?"left":e>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>f&&f>r(e+i)&&(l.horizontal="center"),u>g&&g>r(s+a)&&(l.vertical="middle"),l.important=o(r(e),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,t,l)}),c.offset(t.extend(M,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,h=a+e.collisionWidth-r-s;e.collisionWidth>r?l>0&&0>=h?(i=t.left+l+e.collisionWidth-r-s,t.left+=l-i):t.left=h>0&&0>=l?s:l>h?s+r-e.collisionWidth:s:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-a,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,h=a+e.collisionHeight-r-s;e.collisionHeight>r?l>0&&0>=h?(i=t.top+l+e.collisionHeight-r-s,t.top+=l-i):t.top=h>0&&0>=l?s:l>h?s+r-e.collisionHeight:s:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,d=h+e.collisionWidth-a-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,u="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(0>(i=t.left+p+u+f+e.collisionWidth-a-o)||r(c)>i)&&(t.left+=p+u+f):d>0&&((n=t.left-e.collisionPosition.marginLeft+p+u+f-l)>0||d>r(n))&&(t.left+=p+u+f)},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,d=h+e.collisionHeight-a-l,p="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,u="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];0>c?(0>(n=t.top+p+u+f+e.collisionHeight-a-o)||r(c)>n)&&(t.top+=p+u+f):d>0&&((i=t.top-e.collisionPosition.marginTop+p+u+f-l)>0||d>r(i))&&(t.top+=p+u+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,o,r,a=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)e.style[r]=n[r];e.appendChild(l),(i=a||document.documentElement).insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=t(l).offset().left,s=o>10&&11>o,e.innerHTML="",i.removeChild(e)}()}(),t.ui.position,t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(t){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),s=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options,o=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=t(s.containment),void((n=i[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,o,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var s=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,s))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,s))})},drag:function(e,i,n){t.each(n.sortables,function(){var s=!1,o=this;o.positionAbs=n.positionAbs,o.helperProportions=n.helperProportions,o.offset.click=n.offset.click,o._intersectsWith(o.containerCache)&&(s=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(s=!1),s})),s?(o.isOver||(o.isOver=1,n._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=n.offset.click.top,o.offset.click.left=n.offset.click.left,o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top,n._trigger("toSortable",e),n.dropped=o.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,o.fromOutside=n),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var s=t("body"),o=n.options;s.css("cursor")&&(o._cursor=s.css("cursor")),s.css("cursor",o.cursor)},stop:function(e,i,n){var s=n.options;s._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("opacity")&&(o._opacity=s.css("opacity")),s.css("opacity",o.opacity)},stop:function(e,i,n){var s=n.options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var s=n.options,o=!1,r=n.scrollParentNotHidden[0],a=n.document[0];r!==a&&"HTML"!==r.tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+r.offsetHeight-e.pageY<s.scrollSensitivity?r.scrollTop=o=r.scrollTop+s.scrollSpeed:e.pageY-n.overflowOffset.top<s.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+r.offsetWidth-e.pageX<s.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+s.scrollSpeed:e.pageX-n.overflowOffset.left<s.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(a).scrollTop()<s.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(a).scrollLeft()<s.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var s=n.options;n.snapElements=[],t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var s,o,r,a,l,h,c,d,p,u,f=n.options,g=f.snapTolerance,m=i.offset.left,v=m+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(p=n.snapElements.length-1;p>=0;p--)l=n.snapElements[p].left-n.margins.left,h=l+n.snapElements[p].width,c=n.snapElements[p].top-n.margins.top,d=c+n.snapElements[p].height,l-g>v||m>h+g||c-g>b||y>d+g||!t.contains(n.snapElements[p].item.ownerDocument,n.snapElements[p].item)?(n.snapElements[p].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(s=g>=Math.abs(c-b),o=g>=Math.abs(d-y),r=g>=Math.abs(l-v),a=g>=Math.abs(h-m),s&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),u=s||o||r||a,"outer"!==f.snapMode&&(s=g>=Math.abs(c-y),o=g>=Math.abs(d-b),r=g>=Math.abs(l-m),a=g>=Math.abs(h-v),s&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[p].snapping&&(s||o||r||a||u)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=s||o||r||a||u)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var s,o=n.options,r=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});r.length&&(s=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(e){t(this).css("zIndex",s+e)}),this.css("zIndex",s+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex")),s.css("zIndex",o.zIndex)},stop:function(e,i,n){var s=n.options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(s=!0,!1):void 0}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,n,s){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,r=(e.positionAbs||e.position.absolute).top+e.margins.top,a=o+e.helperProportions.width,l=r+e.helperProportions.height,h=i.offset.left,c=i.offset.top,d=h+i.proportions().width,p=c+i.proportions().height;switch(n){case"fit":return o>=h&&d>=a&&r>=c&&p>=l;case"intersect":return o+e.helperProportions.width/2>h&&d>a-e.helperProportions.width/2&&r+e.helperProportions.height/2>c&&p>l-e.helperProportions.height/2;case"pointer":return t(s.pageY,c,i.proportions().height)&&t(s.pageX,h,i.proportions().width);case"touch":return(r>=c&&p>=r||l>=c&&p>=l||c>r&&l>p)&&(o>=h&&d>=o||a>=h&&d>=a||h>o&&a>d);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,s,o=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;o.length>n;n++)if(!(o[n].options.disabled||e&&!o[n].accept.call(o[n].element[0],e.currentItem||e.element))){for(s=0;a.length>s;s++)if(a[s]===o[n].element[0]){o[n].proportions().height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===r&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,r=t.ui.intersect(e,this,this.options.tolerance,i),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===s})).length&&(n=t(o[0]).droppable("instance"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0||(e[n]=1,s=e[n]>0,e[n]=0,s)},_create:function(){var e,i,n,s,o,r=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)n=t.trim(e[i]),o="ui-resizable-"+n,(s=t("<div class='ui-resizable-handle "+o+"'></div>")).css({zIndex:a.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(e){var i,n,s,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=s&&s[1]?s[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(t(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var i,n,s,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),r.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,o=this.axis,r=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,r,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,r,a,l,h=this.options;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&this._hasScroll(i[0],"left")?0:this.sizeDiff.height,o=n?0:this.sizeDiff.width,r={width:this.helper.width()-o,height:this.helper.height()-s},a=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,h.animate||this.element.css(t.extend(r,{top:l,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,s,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>s&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),r&&c&&(t.top=l-e.minHeight),s&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseInt(n[e],10)||0,i[e]+=parseInt(s[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,s,o,r,a,l=t(this).resizable("instance"),h=l.options,c=l.element,d=h.containment,p=d instanceof t?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(p),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,s=l.containerSize.height,o=l.containerSize.width,r=l._hasScroll(p,"left")?p.scrollWidth:o,a=l._hasScroll(p)?p.scrollHeight:s,l.parentData={element:p,left:n.left,top:n.top,width:r,height:a}))},resize:function(e){var i,n,s,o,r=t(this).resizable("instance"),a=r.options,l=r.containerOffset,h=r.position,c=r._aspectRatio||e.shiftKey,d={top:0,left:0},p=r.containerElement,u=!0;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),h.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),c&&(r.size.height=r.size.width/r.aspectRatio,u=!1),r.position.left=a.helper?l.left:0),h.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio,u=!1),r.position.top=r._helper?l.top:0),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-d.left:r.offset.left-l.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-d.top:r.offset.top-l.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,c&&(r.size.height=r.size.width/r.aspectRatio,u=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,c&&(r.size.width=r.size.height*r.aspectRatio,u=!1)),u||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,r=t(e.helper),a=r.offset(),l=r.outerWidth()-e.sizeDiff.width,h=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,i){var n=t(this).resizable("instance"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0};t(s.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),s={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(s[e]=i||null)}),e.css(s)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,s=i.size,o=i.originalSize,r=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=l[0]||1,c=l[1]||1,d=Math.round((s.width-o.width)/h)*h,p=Math.round((s.height-o.height)/c)*c,u=o.width+d,f=o.height+p,g=n.maxWidth&&u>n.maxWidth,m=n.maxHeight&&f>n.maxHeight,v=n.minWidth&&n.minWidth>u,y=n.minHeight&&n.minHeight>f;n.grid=l,v&&(u+=h),y&&(f+=c),g&&(u-=h),m&&(f-=c),/^(se|s|e)$/.test(a)?(i.size.width=u,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=u,i.size.height=f,i.position.top=r.top-p):/^(sw)$/.test(a)?(i.size.width=u,i.size.height=f,i.position.left=r.left-d):((0>=f-c||0>=u-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=r.top-p):(f=c-e.height,i.size.height=f,i.position.top=r.top+o.height-f),u-h>0?(i.size.width=u,i.position.left=r.left-d):(u=h-e.width,i.size.width=u,i.position.left=r.left+o.width-u))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(e=t(i.options.filter,i.element[0])).addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");return s?(n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],r=this.opos[1],a=e.pageX,l=e.pageY;return o>a&&(i=a,a=o,o=i),r>l&&(i=l,l=r,r=i),this.helper.css({left:o,top:r,width:a-o,height:l-r}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?h=!(i.left>a||o>i.right||i.top>l||r>i.bottom):"fit"===s.tolerance&&(h=i.left>o&&a>i.right&&i.top>r&&l>i.bottom),h?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,s=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(n=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var s,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,s,o,r=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(e.pageY-this.document.scrollTop()<r.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<r.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),e.pageX-this.document.scrollLeft()<r.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!t.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],s))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=t.left,r=o+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||n+h>a&&l>n+h,p="y"===this.options.axis||e+c>o&&r>e+c,u=d&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:e+this.helperProportions.width/2>o&&r>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>s-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=e&&i,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!n&&(this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&i||"left"===s&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){a.push(this)}var n,s,o,r,a=[],l=[],h=this._connectWith();if(h&&e)for(n=h.length-1;n>=0;n--)for(o=t(h[n],this.document[0]),s=o.length-1;s>=0;s--)(r=t.data(o[s],this.widgetFullName))&&r!==this&&!r.options.disabled&&l.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,s,o,r,a,l,h,c=this.items,d=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(s=t(p[i],this.document[0]),n=s.length-1;n>=0;n--)(o=t.data(s[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(d.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=d.length-1;i>=0;i--)for(r=d[i][1],a=d[i][0],n=0,h=a.length;h>n;n++)(l=t(a[n])).data(this.widgetName+"-item",r),c.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,n=(e=e||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(s)):"tr"===n?e._createTrPlaceholder(e.currentItem,s):"img"===n&&s.attr("src",e.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(t,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,s,o,r,a,l,h,c,d,p=null,u=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(p&&t.contains(this.containers[i].element[0],p.element[0]))continue;p=this.containers[i],u=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[u].containerCache.over||(this.containers[u]._trigger("over",e,this._uiHash(this)),this.containers[u].containerCache.over=1);else{for(s=1e4,o=null,r=(c=p.floating||this._isFloating(this.currentItem))?"left":"top",a=c?"width":"height",d=c?"clientX":"clientY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[u].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[r],h=!1,e[d]-l>this.items[n][a]/2&&(h=!0),s>Math.abs(e[d]-l)&&(s=Math.abs(e[d]-l),o=this.items[n],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[u])return void(this.currentContainer.containerCache.over||(this.containers[u]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[u].element,!0),this._trigger("change",e,this._uiHash()),this.containers[u]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[u],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[u]._trigger("over",e,this._uiHash(this)),this.containers[u].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,o=e.pageX,r=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||s.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;s.length>n;n++)s[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}});var r=t;t.effects={effect:{}},function(t,e){function i(t,e,i){var n=c[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:t>n.max?n.max:t)}function n(i){var n=l(),s=n._rgba=[];return i=i.toLowerCase(),u(a,function(t,o){var r,a=o.re.exec(i),l=a&&o.parse(a),c=o.space||"rgba";return l?(r=n[c](l),n[h[c].cache]=r[h[c].cache],s=n._rgba=r._rgba,!1):e}),s.length?("0,0,0,0"===s.join()&&t.extend(s,o.transparent),n):o[i]}function s(t,e,i){return 1>6*(i=(i+1)%1)?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,r=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],u=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,u(h,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(s,r,a,c){if(s===e)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(r),r=e);var d=this,p=t.type(s),f=this._rgba=[];return r!==e&&(s=[s,r,a,c],p="array"),"string"===p?this.parse(n(s)||o._default):"array"===p?(u(h.rgba.props,function(t,e){f[e.idx]=i(s[e.idx],e)}),this):"object"===p?(u(h,s instanceof l?function(t,e){s[e.cache]&&(d[e.cache]=s[e.cache].slice())}:function(e,n){var o=n.cache;u(n.props,function(t,e){if(!d[o]&&n.to){if("alpha"===t||null==s[t])return;d[o]=n.to(d._rgba)}d[o][e.idx]=i(s[t],e,!0)}),d[o]&&0>t.inArray(null,d[o].slice(0,3))&&(d[o][3]=1,n.from&&(d._rgba=n.from(d[o])))}),this):e},is:function(t){var i=l(t),n=!0,s=this;return u(h,function(t,o){var r,a=i[o.cache];return a&&(r=s[o.cache]||o.to&&o.to(s._rgba)||[],u(o.props,function(t,i){return null!=a[i.idx]?n=a[i.idx]===r[i.idx]:e})),n}),n},_space:function(){var t=[],e=this;return u(h,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=l(t),s=n._space(),o=h[s],r=0===this.alpha()?l("transparent"):this,a=r[o.cache]||o.to(r._rgba),d=a.slice();return n=n[o.cache],u(o.props,function(t,s){var o=s.idx,r=a[o],l=n[o],h=c[s.type]||{};null!==l&&(null===r?d[o]=l:(h.mod&&(l-r>h.mod/2?r+=h.mod:r-l>h.mod/2&&(r-=h.mod)),d[o]=i((l-r)*e+r,s)))}),this[s](d)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=l(e)._rgba;return l(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,h.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,o=t[2]/255,r=t[3],a=Math.max(n,s,o),l=Math.min(n,s,o),h=a-l,c=a+l,d=.5*c;return e=l===a?0:n===a?60*(s-o)/h+360:s===a?60*(o-n)/h+120:60*(n-s)/h+240,i=0===h?0:.5>=d?h/c:h/(2-c),[Math.round(e)%360,i,d,null==r?1:r]},h.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*s(a,r,e+1/3)),Math.round(255*s(a,r,e)),Math.round(255*s(a,r,e-1/3)),o]},u(h,function(n,s){var o=s.props,a=s.cache,h=s.to,c=s.from;l.fn[n]=function(n){if(h&&!this[a]&&(this[a]=h(this._rgba)),n===e)return this[a].slice();var s,r=t.type(n),d="array"===r||"object"===r?n:arguments,p=this[a].slice();return u(o,function(t,e){var n=d["object"===r?t:e.idx];null==n&&(n=p[e.idx]),p[e.idx]=i(n,e)}),c?(s=l(c(p)),s[a]=p,s):l(p)},u(o,function(e,i){l.fn[e]||(l.fn[e]=function(s){var o,a=t.type(s),l="alpha"===e?this._hsla?"hsla":"rgba":n,h=this[l](),c=h[i.idx];return"undefined"===a?c:("function"===a&&(s=s.call(this,c),a=t.type(s)),null==s&&i.empty?this:("string"===a&&(o=r.exec(s))&&(s=c+parseFloat(o[2])*("+"===o[1]?1:-1)),h[i.idx]=s,this[l](h)))})})}),l.hook=function(e){var i=e.split(" ");u(i,function(e,i){t.cssHooks[i]={set:function(e,s){var o,r,a="";if("transparent"!==s&&("string"!==t.type(s)||(o=n(s)))){if(s=l(o||s),!d.rgba&&1!==s._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&r&&r.style;)try{a=t.css(r,"backgroundColor"),r=r.parentNode}catch(t){}s=s.blend(a&&"transparent"!==a?a:"_default")}s=s.toRgbaString()}try{e.style[i]=s}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return u(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(r),function(){function e(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(o[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}var i=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(r.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(s,o,r,a){var l=t.speed(o,r,a);return this.queue(function(){var o,r=t(this),a=r.attr("class")||"",h=l.children?r.find("*").addBack():r;h=h.map(function(){return{el:t(this),start:e(this)}}),(o=function(){t.each(i,function(t,e){s[e]&&r[e+"Class"](s[e])})})(),h=h.map(function(){return this.end=e(this.el[0]),this.diff=function(e,i){var s,o,r={};for(s in i)o=i[s],e[s]!==o&&(n[s]||(t.fx.step[s]||!isNaN(parseFloat(o)))&&(r[s]=o));return r}(this.start,this.end),this}),r.attr("class",a),h=h.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,h.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(r[0])})})},t.fn.extend({addClass:function(e){return function(i,n,s,o){return n?t.effects.animateClass.call(this,{add:i},n,s,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,s,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,s,o,r){return"boolean"==typeof n||void 0===n?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,r):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,s,o)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,o)}})}(),function(){function e(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}t.extend(t.effects,{version:"1.11.4",save:function(t,e){for(var i=0;e.length>i;i++)null!==e[i]&&t.data("ui-effects-"+e[i],t[0].style[e[i]])},restore:function(t,e){var i,n;for(n=0;e.length>n;n++)null!==e[n]&&(void 0===(i=t.data("ui-effects-"+e[n]))&&(i=""),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),t.fn.extend({effect:function(){function i(e){function i(){t.isFunction(o)&&o.call(s[0]),t.isFunction(e)&&e()}var s=t(this),o=n.complete,a=n.mode;(s.is(":hidden")?"hide"===a:"show"===a)?(s[a](),i()):r.call(s[0],n,i)}var n=e.apply(this,arguments),s=n.mode,o=n.queue,r=t.effects.effect[n.effect];return t.fx.off||!r?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):!1===o?this.each(i):this.queue(o||"fx",i)},show:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}}(t.fn.show),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}(),t.effects,t.effects.effect.blind=function(e,i){var n,s,o,r=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(r,e.mode||"hide"),h=e.direction||"up",c=/up|down|vertical/.test(h),d=c?"height":"width",p=c?"top":"left",u=/up|left|vertical|horizontal/.test(h),f={},g="show"===l;r.parent().is(".ui-effects-wrapper")?t.effects.save(r.parent(),a):t.effects.save(r,a),r.show(),s=(n=t.effects.createWrapper(r).css({overflow:"hidden"}))[d](),o=parseFloat(n.css(p))||0,f[d]=g?s:0,u||(r.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),f[p]=g?o:s+o),g&&(n.css(d,0),u||n.css(p,o+s)),n.animate(f,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===l&&r.hide(),t.effects.restore(r,a),t.effects.removeWrapper(r),i()}})},t.effects.effect.bounce=function(e,i){var n,s,o,r=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(r,e.mode||"effect"),h="hide"===l,c="show"===l,d=e.direction||"up",p=e.distance,u=e.times||5,f=2*u+(c||h?1:0),g=e.duration/f,m=e.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=r.queue(),_=b.length;for((c||h)&&a.push("opacity"),t.effects.save(r,a),r.show(),t.effects.createWrapper(r),p||(p=r["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,r.css("opacity",0).css(v,y?2*-p:2*p).animate(o,g,m)),h&&(p/=Math.pow(2,u-1)),(o={})[v]=0,n=0;u>n;n++)s={},s[v]=(y?"-=":"+=")+p,r.animate(s,g,m).animate(o,g,m),p=h?2*p:p/2;h&&(s={opacity:0},s[v]=(y?"-=":"+=")+p,r.animate(s,g,m)),r.queue(function(){h&&r.hide(),t.effects.restore(r,a),t.effects.removeWrapper(r),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),r.dequeue()},t.effects.effect.clip=function(e,i){var n,s,o,r=t(this),a=["position","top","bottom","left","right","height","width"],l="show"===t.effects.setMode(r,e.mode||"hide"),h="vertical"===(e.direction||"vertical"),c=h?"height":"width",d=h?"top":"left",p={};t.effects.save(r,a),r.show(),n=t.effects.createWrapper(r).css({overflow:"hidden"}),o=(s="IMG"===r[0].tagName?n:r)[c](),l&&(s.css(c,0),s.css(d,o/2)),p[c]=l?o:0,p[d]=l?0:o/2,s.animate(p,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||r.hide(),t.effects.restore(r,a),t.effects.removeWrapper(r),i()}})},t.effects.effect.drop=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","opacity","height","width"],r=t.effects.setMode(s,e.mode||"hide"),a="show"===r,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};t.effects.save(s,o),s.show(),t.effects.createWrapper(s),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(h,"pos"===c?-n:n),d[h]=(a?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+n,s.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})},t.effects.effect.explode=function(e,i){function n(){v.push(this),v.length===c*d&&(p.css({visibility:"visible"}),t(v).remove(),u||p.hide(),i())}var s,o,r,a,l,h,c=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=c,p=t(this),u="show"===t.effects.setMode(p,e.mode||"hide"),f=p.show().css("visibility","hidden").offset(),g=Math.ceil(p.outerWidth()/d),m=Math.ceil(p.outerHeight()/c),v=[];for(s=0;c>s;s++)for(a=f.top+s*m,h=s-(c-1)/2,o=0;d>o;o++)r=f.left+o*g,l=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*g,top:-s*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:m,left:r+(u?l*g:0),top:a+(u?h*m:0),opacity:u?0:1}).animate({left:r+(u?0:l*g),top:a+(u?0:h*m),opacity:u?1:0},e.duration||500,e.easing,n)},t.effects.effect.fade=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.easing,complete:i})},t.effects.effect.fold=function(e,i){var n,s,o=t(this),r=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(o,e.mode||"hide"),l="show"===a,h="hide"===a,c=e.size||15,d=/([0-9]+)%/.exec(c),p=!!e.horizFirst,u=l!==p,f=u?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(o,r),o.show(),n=t.effects.createWrapper(o).css({overflow:"hidden"}),s=u?[n.width(),n.height()]:[n.height(),n.width()],d&&(c=parseInt(d[1],10)/100*s[h?0:1]),l&&n.css(p?{height:0,width:c}:{height:c,width:0}),m[f[0]]=l?s[0]:c,v[f[1]]=l?s[1]:0,n.animate(m,g,e.easing).animate(v,g,e.easing,function(){h&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()})},t.effects.effect.highlight=function(e,i){var n=t(this),s=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(n,e.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===o&&(r.opacity=0),t.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,s),i()}})},t.effects.effect.size=function(e,i){var n,s,o,r=t(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],h=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(r,e.mode||"effect"),u=e.restore||"effect"!==p,f=e.scale||"both",g=e.origin||["middle","center"],m=r.css("position"),v=u?a:["position","top","bottom","left","right","overflow","opacity"],y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===e.mode&&"show"===p?(r.from=e.to||y,r.to=e.from||n):(r.from=e.from||("show"===p?y:n),r.to=e.to||("hide"===p?y:n)),o={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},("box"===f||"both"===f)&&(o.from.y!==o.to.y&&(v=v.concat(c),r.from=t.effects.setTransition(r,c,o.from.y,r.from),r.to=t.effects.setTransition(r,c,o.to.y,r.to)),o.from.x!==o.to.x&&(v=v.concat(d),r.from=t.effects.setTransition(r,d,o.from.x,r.from),r.to=t.effects.setTransition(r,d,o.to.x,r.to))),("content"===f||"both"===f)&&o.from.y!==o.to.y&&(v=v.concat(h).concat(l),r.from=t.effects.setTransition(r,h,o.from.y,r.from),r.to=t.effects.setTransition(r,h,o.to.y,r.to)),t.effects.save(r,v),r.show(),t.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(s=t.effects.getBaseline(g,n),r.from.top=(n.outerHeight-r.outerHeight())*s.y,r.from.left=(n.outerWidth-r.outerWidth())*s.x,r.to.top=(n.outerHeight-r.to.outerHeight)*s.y,r.to.left=(n.outerWidth-r.to.outerWidth)*s.x),r.css(r.from),("content"===f||"both"===f)&&(c=c.concat(["marginTop","marginBottom"]).concat(h),d=d.concat(["marginLeft","marginRight"]),l=a.concat(c).concat(d),r.find("*[width]").each(function(){var i=t(this),n=i.height(),s=i.width(),r=i.outerHeight(),a=i.outerWidth();u&&t.effects.save(i,l),i.from={height:n*o.from.y,width:s*o.from.x,outerHeight:r*o.from.y,outerWidth:a*o.from.x},i.to={height:n*o.to.y,width:s*o.to.x,outerHeight:n*o.to.y,outerWidth:s*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,c,o.from.y,i.from),i.to=t.effects.setTransition(i,c,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){u&&t.effects.restore(i,l)})})),r.animate(r.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===p&&r.hide(),t.effects.restore(r,v),u||("static"===m?r.css({position:"relative",top:r.to.top,left:r.to.left}):t.each(["top","left"],function(t,e){r.css(e,function(e,i){var n=parseInt(i,10),s=t?r.to.left:r.to.top;return"auto"===i?s+"px":n+s+"px"})})),t.effects.removeWrapper(r),i()}})},t.effects.effect.scale=function(e,i){var n=t(this),s=t.extend(!0,{},e),o=t.effects.setMode(n,e.mode||"effect"),r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),a=e.direction||"both",l=e.origin,h={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},c="horizontal"!==a?r/100:1,d="vertical"!==a?r/100:1;s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=l||["middle","center"],s.restore=!0),s.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:h),s.to={height:h.height*c,width:h.width*d,outerHeight:h.outerHeight*c,outerWidth:h.outerWidth*d},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},t.effects.effect.puff=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"hide"),o="hide"===s,r=parseInt(e.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?r:100,from:o?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(e)},t.effects.effect.pulsate=function(e,i){var n,s=t(this),o=t.effects.setMode(s,e.mode||"show"),r="show"===o,a="hide"===o,l=r||"hide"===o,h=2*(e.times||5)+(l?1:0),c=e.duration/h,d=0,p=s.queue(),u=p.length;for((r||!s.is(":visible"))&&(s.css("opacity",0).show(),d=1),n=1;h>n;n++)s.animate({opacity:d},c,e.easing),d=1-d;s.animate({opacity:d},c,e.easing),s.queue(function(){a&&s.hide(),i()}),u>1&&p.splice.apply(p,[1,0].concat(p.splice(u,h+1))),s.dequeue()},t.effects.effect.shake=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(s,e.mode||"effect"),a=e.direction||"left",l=e.distance||20,h=e.times||3,c=2*h+1,d=Math.round(e.duration/c),p="up"===a||"down"===a?"top":"left",u="up"===a||"left"===a,f={},g={},m={},v=s.queue(),y=v.length;for(t.effects.save(s,o),s.show(),t.effects.createWrapper(s),f[p]=(u?"-=":"+=")+l,g[p]=(u?"+=":"-=")+2*l,m[p]=(u?"-=":"+=")+2*l,s.animate(f,d,e.easing),n=1;h>n;n++)s.animate(g,d,e.easing).animate(m,d,e.easing);s.animate(g,d,e.easing).animate(f,d/2,e.easing).queue(function(){"hide"===r&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,c+1))),s.dequeue()},t.effects.effect.slide=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","width","height"],r=t.effects.setMode(s,e.mode||"show"),a="show"===r,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,d={};t.effects.save(s,o),s.show(),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(h,c?isNaN(n)?"-"+n:-n:n),d[h]=(a?c?"+=":"-=":c?"-=":"+=")+n,s.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})},t.effects.effect.transfer=function(e,i){var n=t(this),s=t(e.to),o="fixed"===s.css("position"),r=t("body"),a=o?r.scrollTop():0,l=o?r.scrollLeft():0,h=s.offset(),c={top:h.top-a,left:h.left-l,height:s.innerHeight(),width:s.innerWidth()},d=n.offset(),p=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){p.remove(),i()})}});var URLSearchParams=URLSearchParams||function(){"use strict";function t(t){var n,o,r,a,l,h,d=Object.create(null);if(this[c]=d,t)if("string"==typeof t)for("?"===t.charAt(0)&&(t=t.slice(1)),l=0,h=(a=t.split("&")).length;l<h;l++)-1<(n=(r=a[l]).indexOf("="))?e(d,i(r.slice(0,n)),i(r.slice(n+1))):r.length&&e(d,i(r),"");else if(s(t))for(l=0,h=t.length;l<h;l++)e(d,(r=t[l])[0],r[1]);else for(o in t)e(d,o,t[o])}function e(t,e,i){e in t?t[e].push(""+i):t[e]=s(i)?i:[""+i]}function i(t){return decodeURIComponent(t.replace(a," "))}function n(t){return encodeURIComponent(t).replace(r,h)}var s=Array.isArray,o=t.prototype,r=/[!'\(\)~]|%20|%00/g,a=/\+/g,l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},h=function(t){return l[t]},c="__URLSearchParams__:"+Math.random();o.append=function(t,i){e(this[c],t,i)},o.delete=function(t){delete this[c][t]},o.get=function(t){var e=this[c];return t in e?e[t][0]:null},o.getAll=function(t){var e=this[c];return t in e?e[t].slice(0):[]},o.has=function(t){return t in this[c]},o.set=function(t,e){this[c][t]=[""+e]},o.forEach=function(t,e){var i=this[c];Object.getOwnPropertyNames(i).forEach(function(n){i[n].forEach(function(i){t.call(e,i,n,this)},this)},this)},o.toJSON=function(){return{}},o.toString=function(){var t,e,i,s,o=this[c],r=[];for(e in o)for(i=n(e),t=0,s=o[e];t<s.length;t++)r.push(i+"="+n(s[t]));return r.join("&")};var d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,u=function(e){var i=e.append;e.append=o.append,t.call(e,e._usp.search.slice(1)),e.append=i},f=function(t,e){if(!(t instanceof e))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+e.name)},g=function(e){var i,n=e.prototype,s=p(n,"searchParams"),r=p(n,"href"),a=p(n,"search");!s&&a&&a.set&&(i=function(t){return function(e,i){return d(e,"_searchParams",{configurable:!0,writable:!0,value:t(i,e)}),i}}(function(t){function e(e,i){o.append.call(this,e,i),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}function i(e){o.delete.call(this,e),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}function n(e,i){o.set.call(this,e,i),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}return function(t,s){return t.append=e,t.delete=i,t.set=n,d(t,"_usp",{configurable:!0,writable:!0,value:s})}}(a)),Object.defineProperties(n,{href:{get:function(){return r.get.call(this)},set:function(t){var e=this._searchParams;r.set.call(this,t),e&&u(e)}},search:{get:function(){return a.get.call(this)},set:function(t){var e=this._searchParams;a.set.call(this,t),e&&u(e)}},searchParams:{get:function(){return f(this,e),this._searchParams||i(this,new t(this.search.slice(1)))},set:function(t){f(this,e),i(this,t)}}}))};return g(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&g(URL),t}();!function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}();"forEach"in t||(t.forEach=function(t,e){var i=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(n){!n.length||n in i||(i[n]=this.getAll(n)).forEach(function(i){t.call(e,i,n,this)},this)},this)}),"keys"in t||(t.keys=function(){var t=[];this.forEach(function(e,i){t.push(i)});var i={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(i[Symbol.iterator]=function(){return i}),i}),"values"in t||(t.values=function(){var t=[];this.forEach(function(e){t.push(e)});var i={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(i[Symbol.iterator]=function(){return i}),i}),"entries"in t||(t.entries=function(){var t=[];this.forEach(function(e,i){t.push([i,e])});var i={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(i[Symbol.iterator]=function(){return i}),i}),!e||Symbol.iterator in t||(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,e,i,n=this.entries(),s=n.next(),o=s.done,r=[],a=Object.create(null);!o;)e=(i=s.value)[0],r.push(e),e in a||(a[e]=[]),a[e].push(i[1]),o=(s=n.next()).done;for(r.sort(),t=0;t<r.length;t++)this.delete(r[t]);for(t=0;t<r.length;t++)e=r[t],this.append(e,a[e].shift())})}(URLSearchParams.prototype),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?e(require("jquery")):(e(t.jquery),t.bootstrapSwitch={})}(this,function(t){"use strict";var e=function(t){return t&&t.__esModule?t:{default:t}}(t),i=Object.assign||function(t){for(var e,i=1;i<arguments.length;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n=function(){function t(t,e){for(var i,n=0;n<e.length;n++)i=e[n],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=e.default||window.jQuery||window.$,o=function(){function t(e){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.$element=s(e),this.options=s.extend({},s.fn.bootstrapSwitch.defaults,this._getElementOptions(),n),this.prevOptions={},this.$wrapper=s("<div>",{class:function(){var t=[];return t.push(i.options.state?"on":"off"),i.options.size&&t.push(i.options.size),i.options.disabled&&t.push("disabled"),i.options.readonly&&t.push("readonly"),i.options.indeterminate&&t.push("indeterminate"),i.options.inverse&&t.push("inverse"),i.$element.attr("id")&&t.push("id-"+i.$element.attr("id")),t.map(i._getClass.bind(i)).concat([i.options.baseClass],i._getClasses(i.options.wrapperClass)).join(" ")}}),this.$container=s("<div>",{class:this._getClass("container")}),this.$on=s("<span>",{html:this.options.onText,class:this._getClass("handle-on")+" "+this._getClass(this.options.onColor)}),this.$off=s("<span>",{html:this.options.offText,class:this._getClass("handle-off")+" "+this._getClass(this.options.offColor)}),this.$label=s("<span>",{html:this.options.labelText,class:this._getClass("label")}),this.$element.on("init.bootstrapSwitch",this.options.onInit.bind(this,e)),this.$element.on("switchChange.bootstrapSwitch",function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];!1===i.options.onSwitchChange.apply(e,n)&&(i.$element.is(":radio")?s('[name="'+i.$element.attr("name")+'"]').trigger("previousState.bootstrapSwitch",!0):i.$element.trigger("previousState.bootstrapSwitch",!0))}),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}return n(t,[{key:"setPrevOptions",value:function(){this.prevOptions=i({},this.options)}},{key:"state",value:function(t,e){return void 0===t?this.options.state:this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.$element.is(":radio")?s('[name="'+this.$element.attr("name")+'"]').trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),this.$element.prop("checked",!!t).trigger("change.bootstrapSwitch",e),this.$element)}},{key:"toggleState",value:function(t){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)}},{key:"size",value:function(t){return void 0===t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this._getClass(this.options.size)),t&&this.$wrapper.addClass(this._getClass(t)),this._width(),this._containerPosition(),this.options.size=t,this.$element)}},{key:"animate",value:function(t){return void 0===t?this.options.animate:this.options.animate===!!t?this.$element:this.toggleAnimate()}},{key:"toggleAnimate",value:function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this._getClass("animate")),this.$element}},{key:"disabled",value:function(t){return void 0===t?this.options.disabled:this.options.disabled===!!t?this.$element:this.toggleDisabled()}},{key:"toggleDisabled",value:function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this._getClass("disabled")),this.$element}},{key:"readonly",value:function(t){return void 0===t?this.options.readonly:this.options.readonly===!!t?this.$element:this.toggleReadonly()}},{key:"toggleReadonly",value:function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this._getClass("readonly")),this.$element}},{key:"indeterminate",value:function(t){return void 0===t?this.options.indeterminate:this.options.indeterminate===!!t?this.$element:this.toggleIndeterminate()}},{key:"toggleIndeterminate",value:function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this._getClass("indeterminate")),this._containerPosition(),this.$element}},{key:"inverse",value:function(t){return void 0===t?this.options.inverse:this.options.inverse===!!t?this.$element:this.toggleInverse()}},{key:"toggleInverse",value:function(){this.$wrapper.toggleClass(this._getClass("inverse"));var t=this.$on.clone(!0),e=this.$off.clone(!0);return this.$on.replaceWith(e),this.$off.replaceWith(t),this.$on=e,this.$off=t,this.options.inverse=!this.options.inverse,this.$element}},{key:"onColor",value:function(t){return void 0===t?this.options.onColor:(this.options.onColor&&this.$on.removeClass(this._getClass(this.options.onColor)),this.$on.addClass(this._getClass(t)),this.options.onColor=t,this.$element)}},{key:"offColor",value:function(t){return void 0===t?this.options.offColor:(this.options.offColor&&this.$off.removeClass(this._getClass(this.options.offColor)),this.$off.addClass(this._getClass(t)),this.options.offColor=t,this.$element)}},{key:"onText",value:function(t){return void 0===t?this.options.onText:(this.$on.html(t),this._width(),this._containerPosition(),this.options.onText=t,this.$element)}},{key:"offText",value:function(t){return void 0===t?this.options.offText:(this.$off.html(t),this._width(),this._containerPosition(),this.options.offText=t,this.$element)}},{key:"labelText",value:function(t){return void 0===t?this.options.labelText:(this.$label.html(t),this._width(),this.options.labelText=t,this.$element)}},{key:"handleWidth",value:function(t){return void 0===t?this.options.handleWidth:(this.options.handleWidth=t,this._width(),this._containerPosition(),this.$element)}},{key:"labelWidth",value:function(t){return void 0===t?this.options.labelWidth:(this.options.labelWidth=t,this._width(),this._containerPosition(),this.$element)}},{key:"baseClass",value:function(){return this.options.baseClass}},{key:"wrapperClass",value:function(t){return void 0===t?this.options.wrapperClass:(t||(t=s.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)}},{key:"radioAllOff",value:function(t){if(void 0===t)return this.options.radioAllOff;var e=!!t;return this.options.radioAllOff===e?this.$element:(this.options.radioAllOff=e,this.$element)}},{key:"onInit",value:function(t){return void 0===t?this.options.onInit:(t||(t=s.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=t,this.$element)}},{key:"onSwitchChange",value:function(t){return void 0===t?this.options.onSwitchChange:(t||(t=s.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=t,this.$element)}},{key:"destroy",value:function(){var t=this.$element.closest("form");return t.length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element}},{key:"_getElementOptions",value:function(){return{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}}},{key:"_width",value:function(){var t=this,e=this.$on.add(this.$off).add(this.$label).css("width",""),i="auto"===this.options.handleWidth?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;return e.width(i),this.$label.width(function(e,n){return"auto"===t.options.labelWidth?n<i?i:n:t.options.labelWidth}),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)}},{key:"_containerPosition",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.state;arguments[1];this.$container.css("margin-left",function(){var i=[0,"-"+t._handleWidth+"px"];return t.options.indeterminate?"-"+t._handleWidth/2+"px":e?t.options.inverse?i[1]:i[0]:t.options.inverse?i[0]:i[1]})}},{key:"_init",value:function(){var t=this,e=function(){t.setPrevOptions(),t._width(),t._containerPosition(),setTimeout(function(){if(t.options.animate)return t.$wrapper.addClass(t._getClass("animate"))},50)};if(this.$wrapper.is(":visible"))e();else var i=window.setInterval(function(){if(t.$wrapper.is(":visible"))return e(),window.clearInterval(i)},50)}},{key:"_elementHandlers",value:function(){var t=this;return this.$element.on({"setPreviousOptions.bootstrapSwitch":this.setPrevOptions.bind(this),"previousState.bootstrapSwitch":function(){t.options=t.prevOptions,t.options.indeterminate&&t.$wrapper.addClass(t._getClass("indeterminate")),t.$element.prop("checked",t.options.state).trigger("change.bootstrapSwitch",!0)},"change.bootstrapSwitch":function(e,i){e.preventDefault(),e.stopImmediatePropagation();var n=t.$element.is(":checked");t._containerPosition(n),n===t.options.state||(t.options.state=n,t.$wrapper.toggleClass(t._getClass("off")).toggleClass(t._getClass("on")),!i&&(t.$element.is(":radio")&&s('[name="'+t.$element.attr("name")+'"]').not(t.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),t.$element.trigger("switchChange.bootstrapSwitch",[n])))},"focus.bootstrapSwitch":function(e){e.preventDefault(),t.$wrapper.addClass(t._getClass("focused"))},"blur.bootstrapSwitch":function(e){e.preventDefault(),t.$wrapper.removeClass(t._getClass("focused"))},"keydown.bootstrapSwitch":function(e){!e.which||t.options.disabled||t.options.readonly||(37===e.which||39===e.which)&&(e.preventDefault(),e.stopImmediatePropagation(),t.state(39===e.which))}})}},{key:"_handleHandlers",value:function(){var t=this;return this.$on.on("click.bootstrapSwitch",function(e){return e.preventDefault(),e.stopPropagation(),t.state(!1),t.$element.trigger("focus.bootstrapSwitch")}),this.$off.on("click.bootstrapSwitch",function(e){return e.preventDefault(),e.stopPropagation(),t.state(!0),t.$element.trigger("focus.bootstrapSwitch")})}},{key:"_labelHandlers",value:function(){var t=this;this.$label.on({click:function(t){t.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(e){t._dragStart||t.options.disabled||t.options.readonly||(e.preventDefault(),e.stopPropagation(),t._dragStart=(e.pageX||e.originalEvent.touches[0].pageX)-parseInt(t.$container.css("margin-left"),10),t.options.animate&&t.$wrapper.removeClass(t._getClass("animate")),t.$element.trigger("focus.bootstrapSwitch"))},"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(e){if(null!=t._dragStart){var i=(e.pageX||e.originalEvent.touches[0].pageX)-t._dragStart;e.preventDefault(),i<-t._handleWidth||0<i||(t._dragEnd=i,t.$container.css("margin-left",t._dragEnd+"px"))}},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(e){if(t._dragStart){if(e.preventDefault(),t.options.animate&&t.$wrapper.addClass(t._getClass("animate")),t._dragEnd){var i=t._dragEnd>-t._handleWidth/2;t._dragEnd=!1,t.state(t.options.inverse?!i:i)}else t.state(!t.options.state);t._dragStart=!1}},"mouseleave.bootstrapSwitch":function(){t.$label.trigger("mouseup.bootstrapSwitch")}})}},{key:"_externalLabelHandler",value:function(){var t=this,e=this.$element.closest("label");e.on("click",function(i){i.preventDefault(),i.stopImmediatePropagation(),i.target===e[0]&&t.toggleState()})}},{key:"_formHandler",value:function(){var t=this.$element.closest("form");t.data("bootstrap-switch")||t.on("reset.bootstrapSwitch",function(){window.setTimeout(function(){t.find("input").filter(function(){return s(this).data("bootstrap-switch")}).each(function(){return s(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)}},{key:"_getClass",value:function(t){return this.options.baseClass+"-"+t}},{key:"_getClasses",value:function(t){return s.isArray(t)?t.map(this._getClass.bind(this)):[this._getClass(t)]}}]),t}();s.fn.bootstrapSwitch=function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Array.prototype.reduce.call(this,function(e,n){var r=s(n),a=r.data("bootstrap-switch"),l=a||new o(n,t);return a||r.data("bootstrap-switch",l),"string"==typeof t?l[t].apply(l,i):e},this)},s.fn.bootstrapSwitch.Constructor=o,s.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}),function(t,e){"use strict";if("undefined"!=typeof module&&module.exports){"undefined"!=typeof process&&"electron"in process.versions?t.BootstrapDialog=e(t.jQuery):module.exports=e(require("jquery"),require("bootstrap"))}else"function"==typeof define&&define.amd?define("bootstrap-dialog",["jquery","bootstrap"],function(t){return e(t)}):t.BootstrapDialog=e(t.jQuery)}(this,function(t){"use strict";var e=t.fn.modal.Constructor,i=function(t,i){e.call(this,t,i)};i.getModalVersion=function(){return void 0===t.fn.modal.Constructor.VERSION?"v3.1":/3\.2\.\d+/.test(t.fn.modal.Constructor.VERSION)?"v3.2":/3\.3\.[1,2]/.test(t.fn.modal.Constructor.VERSION)?"v3.3":"v3.3.4"},i.ORIGINAL_BODY_PADDING=parseInt(t("body").css("padding-right")||0,10),(i.METHODS_TO_OVERRIDE={})["v3.1"]={},i.METHODS_TO_OVERRIDE["v3.2"]={hide:function(e){if(e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()){this.isShown=!1;0===this.getGlobalOpenedDialogs().length&&this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}}},i.METHODS_TO_OVERRIDE["v3.3"]={setScrollbar:function(){var t=i.ORIGINAL_BODY_PADDING;this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},resetScrollbar:function(){0===this.getGlobalOpenedDialogs().length&&this.$body.css("padding-right",i.ORIGINAL_BODY_PADDING)},hideModal:function(){this.$element.hide(),this.backdrop(t.proxy(function(){0===this.getGlobalOpenedDialogs().length&&this.$body.removeClass("modal-open"),this.resetAdjustments(),this.resetScrollbar(),this.$element.trigger("hidden.bs.modal")},this))}},i.METHODS_TO_OVERRIDE["v3.3.4"]=t.extend({},i.METHODS_TO_OVERRIDE["v3.3"]),i.prototype={constructor:i,getGlobalOpenedDialogs:function(){var e=[];return t.each(n.dialogs,function(t,i){i.isRealized()&&i.isOpened()&&e.push(i)}),e}},i.prototype=t.extend(i.prototype,e.prototype,i.METHODS_TO_OVERRIDE[i.getModalVersion()]);var n=function(e){this.defaultOptions=t.extend(!0,{id:n.newGuid(),buttons:[],data:{},onshow:null,onshown:null,onhide:null,onhidden:null},n.defaultOptions),this.indexedButtons={},this.registeredButtonHotkeys={},this.draggableData={isMouseDown:!1,mouseOffset:{}},this.realized=!1,this.opened=!1,this.initOptions(e),this.holdThisInstance()};return n.BootstrapDialogModal=i,n.NAMESPACE="bootstrap-dialog",n.TYPE_DEFAULT="type-default",n.TYPE_INFO="type-info",n.TYPE_PRIMARY="type-primary",n.TYPE_SUCCESS="type-success",n.TYPE_WARNING="type-warning",n.TYPE_DANGER="type-danger",n.DEFAULT_TEXTS={},n.DEFAULT_TEXTS[n.TYPE_DEFAULT]="Information",n.DEFAULT_TEXTS[n.TYPE_INFO]="Information",n.DEFAULT_TEXTS[n.TYPE_PRIMARY]="Information",n.DEFAULT_TEXTS[n.TYPE_SUCCESS]="Success",n.DEFAULT_TEXTS[n.TYPE_WARNING]="Warning",n.DEFAULT_TEXTS[n.TYPE_DANGER]="Danger",n.DEFAULT_TEXTS.OK="OK",n.DEFAULT_TEXTS.CANCEL="Cancel",n.DEFAULT_TEXTS.CONFIRM="Confirmation",n.SIZE_NORMAL="size-normal",n.SIZE_SMALL="size-small",n.SIZE_WIDE="size-wide",n.SIZE_LARGE="size-large",n.BUTTON_SIZES={},n.BUTTON_SIZES[n.SIZE_NORMAL]="",n.BUTTON_SIZES[n.SIZE_SMALL]="",n.BUTTON_SIZES[n.SIZE_WIDE]="",n.BUTTON_SIZES[n.SIZE_LARGE]="btn-lg",n.ICON_SPINNER="glyphicon glyphicon-asterisk",n.defaultOptions={type:n.TYPE_PRIMARY,size:n.SIZE_NORMAL,cssClass:"",title:null,message:null,nl2br:!0,closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,spinicon:n.ICON_SPINNER,autodestroy:!0,draggable:!1,animate:!0,description:"",tabindex:-1},n.configDefaultOptions=function(e){n.defaultOptions=t.extend(!0,n.defaultOptions,e)},n.dialogs={},n.openAll=function(){t.each(n.dialogs,function(t,e){e.open()})},n.closeAll=function(){t.each(n.dialogs,function(t,e){e.close()})},n.getDialog=function(t){var e=null;return void 0!==n.dialogs[t]&&(e=n.dialogs[t]),e},n.setDialog=function(t){return n.dialogs[t.getId()]=t,t},n.addDialog=function(t){return n.setDialog(t)},n.moveFocus=function(){var e=null;t.each(n.dialogs,function(t,i){e=i}),null!==e&&e.isRealized()&&e.getModal().focus()},n.METHODS_TO_OVERRIDE={},n.METHODS_TO_OVERRIDE["v3.1"]={handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(t){t.target===this&&t.data.dialog.isClosable()&&t.data.dialog.canCloseByBackdrop()&&t.data.dialog.close()}),this},updateZIndex:function(){var e=0;t.each(n.dialogs,function(t,i){e++});var i=this.getModal(),s=i.data("bs.modal").$backdrop;return i.css("z-index",1050+20*(e-1)),s.css("z-index",1040+20*(e-1)),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this.updateZIndex(),this}},n.METHODS_TO_OVERRIDE["v3.2"]={handleModalBackdropEvent:n.METHODS_TO_OVERRIDE["v3.1"].handleModalBackdropEvent,updateZIndex:n.METHODS_TO_OVERRIDE["v3.1"].updateZIndex,open:n.METHODS_TO_OVERRIDE["v3.1"].open},n.METHODS_TO_OVERRIDE["v3.3"]={},n.METHODS_TO_OVERRIDE["v3.3.4"]=t.extend({},n.METHODS_TO_OVERRIDE["v3.1"]),n.prototype={constructor:n,initOptions:function(e){return this.options=t.extend(!0,this.defaultOptions,e),this},holdThisInstance:function(){return n.addDialog(this),this},initModalStuff:function(){return this.setModal(this.createModal()).setModalDialog(this.createModalDialog()).setModalContent(this.createModalContent()).setModalHeader(this.createModalHeader()).setModalBody(this.createModalBody()).setModalFooter(this.createModalFooter()),this.getModal().append(this.getModalDialog()),this.getModalDialog().append(this.getModalContent()),this.getModalContent().append(this.getModalHeader()).append(this.getModalBody()).append(this.getModalFooter()),this},createModal:function(){var e=t('<div class="modal" role="dialog" aria-hidden="true"></div>');return e.prop("id",this.getId()),e.attr("aria-labelledby",this.getId()+"_title"),e},getModal:function(){return this.$modal},setModal:function(t){return this.$modal=t,this},createModalDialog:function(){return t('<div class="modal-dialog"></div>')},getModalDialog:function(){return this.$modalDialog},setModalDialog:function(t){return this.$modalDialog=t,this},createModalContent:function(){return t('<div class="modal-content"></div>')},getModalContent:function(){return this.$modalContent},setModalContent:function(t){return this.$modalContent=t,this},createModalHeader:function(){return t('<div class="modal-header"></div>')},getModalHeader:function(){return this.$modalHeader},setModalHeader:function(t){return this.$modalHeader=t,this},createModalBody:function(){return t('<div class="modal-body"></div>')},getModalBody:function(){return this.$modalBody},setModalBody:function(t){return this.$modalBody=t,this},createModalFooter:function(){return t('<div class="modal-footer"></div>')},getModalFooter:function(){return this.$modalFooter},setModalFooter:function(t){return this.$modalFooter=t,this},createDynamicContent:function(t){var e=null;return"string"==typeof(e="function"==typeof t?t.call(t,this):t)&&(e=this.formatStringContent(e)),e},formatStringContent:function(t){return this.options.nl2br?t.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />"):t},setData:function(t,e){return this.options.data[t]=e,this},getData:function(t){return this.options.data[t]},setId:function(t){return this.options.id=t,this},getId:function(){return this.options.id},getType:function(){return this.options.type},setType:function(t){return this.options.type=t,this.updateType(),this},updateType:function(){if(this.isRealized()){var t=[n.TYPE_DEFAULT,n.TYPE_INFO,n.TYPE_PRIMARY,n.TYPE_SUCCESS,n.TYPE_WARNING,n.TYPE_DANGER];this.getModal().removeClass(t.join(" ")).addClass(this.getType())}return this},getSize:function(){return this.options.size},setSize:function(t){return this.options.size=t,this.updateSize(),this},updateSize:function(){if(this.isRealized()){var e=this;this.getModal().removeClass(n.SIZE_NORMAL).removeClass(n.SIZE_SMALL).removeClass(n.SIZE_WIDE).removeClass(n.SIZE_LARGE),this.getModal().addClass(this.getSize()),this.getModalDialog().removeClass("modal-sm"),this.getSize()===n.SIZE_SMALL&&this.getModalDialog().addClass("modal-sm"),this.getModalDialog().removeClass("modal-lg"),this.getSize()===n.SIZE_WIDE&&this.getModalDialog().addClass("modal-lg"),t.each(this.options.buttons,function(i,n){var s=e.getButton(n.id),o=["btn-lg","btn-sm","btn-xs"],r=!1;if("string"==typeof n.cssClass){var a=n.cssClass.split(" ");t.each(a,function(e,i){-1!==t.inArray(i,o)&&(r=!0)})}r||(s.removeClass(o.join(" ")),s.addClass(e.getButtonSize()))})}return this},getCssClass:function(){return this.options.cssClass},setCssClass:function(t){return this.options.cssClass=t,this},getTitle:function(){return this.options.title},setTitle:function(t){return this.options.title=t,this.updateTitle(),this},updateTitle:function(){if(this.isRealized()){var t=null!==this.getTitle()?this.createDynamicContent(this.getTitle()):this.getDefaultText();this.getModalHeader().find("."+this.getNamespace("title")).html("").append(t).prop("id",this.getId()+"_title")}return this},getMessage:function(){return this.options.message},setMessage:function(t){return this.options.message=t,this.updateMessage(),this},updateMessage:function(){if(this.isRealized()){var t=this.createDynamicContent(this.getMessage());this.getModalBody().find("."+this.getNamespace("message")).html("").append(t)}return this},isClosable:function(){return this.options.closable},setClosable:function(t){return this.options.closable=t,this.updateClosable(),this},setCloseByBackdrop:function(t){return this.options.closeByBackdrop=t,this},canCloseByBackdrop:function(){return this.options.closeByBackdrop},setCloseByKeyboard:function(t){return this.options.closeByKeyboard=t,this},canCloseByKeyboard:function(){return this.options.closeByKeyboard},isAnimate:function(){return this.options.animate},setAnimate:function(t){return this.options.animate=t,this},updateAnimate:function(){return this.isRealized()&&this.getModal().toggleClass("fade",this.isAnimate()),this},getSpinicon:function(){return this.options.spinicon},setSpinicon:function(t){return this.options.spinicon=t,this},addButton:function(t){return this.options.buttons.push(t),this},addButtons:function(e){var i=this;return t.each(e,function(t,e){i.addButton(e)}),this},getButtons:function(){return this.options.buttons},setButtons:function(t){return this.options.buttons=t,this.updateButtons(),this},getButton:function(t){return void 0!==this.indexedButtons[t]?this.indexedButtons[t]:null},getButtonSize:function(){return void 0!==n.BUTTON_SIZES[this.getSize()]?n.BUTTON_SIZES[this.getSize()]:""},updateButtons:function(){return this.isRealized()&&(0===this.getButtons().length?this.getModalFooter().hide():this.getModalFooter().show().find("."+this.getNamespace("footer")).html("").append(this.createFooterButtons())),this},isAutodestroy:function(){return this.options.autodestroy},setAutodestroy:function(t){this.options.autodestroy=t},getDescription:function(){return this.options.description},setDescription:function(t){return this.options.description=t,this},setTabindex:function(t){return this.options.tabindex=t,this},getTabindex:function(){return this.options.tabindex},updateTabindex:function(){return this.isRealized()&&this.getModal().attr("tabindex",this.getTabindex()),this},getDefaultText:function(){return n.DEFAULT_TEXTS[this.getType()]},getNamespace:function(t){return n.NAMESPACE+"-"+t},createHeaderContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("header")),e.append(this.createTitleContent()),e.prepend(this.createCloseButton()),e},createTitleContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("title")),e},createCloseButton:function(){var e=t("<div></div>");e.addClass(this.getNamespace("close-button"));var i=t('<button class="close">&times;</button>');return e.append(i),e.on("click",{dialog:this},function(t){t.data.dialog.close()}),e},createBodyContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("body")),e.append(this.createMessageContent()),e},createMessageContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("message")),e},createFooterContent:function(){var e=t("<div></div>");return e.addClass(this.getNamespace("footer")),e},createFooterButtons:function(){var e=this,i=t("<div></div>");return i.addClass(this.getNamespace("footer-buttons")),this.indexedButtons={},t.each(this.options.buttons,function(t,s){s.id||(s.id=n.newGuid());var o=e.createButton(s);e.indexedButtons[s.id]=o,i.append(o)}),i},createButton:function(e){var i=t('<button class="btn"></button>');return i.prop("id",e.id),i.data("button",e),void 0!==e.icon&&""!==t.trim(e.icon)&&i.append(this.createButtonIcon(e.icon)),void 0!==e.label&&i.append(e.label),i.addClass(void 0!==e.cssClass&&""!==t.trim(e.cssClass)?e.cssClass:"btn-default"),void 0!==e.hotkey&&(this.registeredButtonHotkeys[e.hotkey]=i),i.on("click",{dialog:this,$button:i,button:e},function(t){var e=t.data.dialog,i=t.data.$button,n=i.data("button");return n.autospin&&i.toggleSpin(!0),"function"==typeof n.action?n.action.call(i,e,t):void 0}),this.enhanceButton(i),void 0!==e.enabled&&i.toggleEnable(e.enabled),i},enhanceButton:function(t){return t.dialog=this,t.toggleEnable=function(t){return void 0!==t?this.prop("disabled",!t).toggleClass("disabled",!t):this.prop("disabled",!this.prop("disabled")),this},t.enable=function(){return this.toggleEnable(!0),this},t.disable=function(){return this.toggleEnable(!1),this},t.toggleSpin=function(e){var i=this.dialog,n=this.find("."+i.getNamespace("button-icon"));return void 0===e&&(e=!(t.find(".icon-spin").length>0)),e?(n.hide(),t.prepend(i.createButtonIcon(i.getSpinicon()).addClass("icon-spin"))):(n.show(),t.find(".icon-spin").remove()),this},t.spin=function(){return this.toggleSpin(!0),this},t.stopSpin=function(){return this.toggleSpin(!1),this},this},createButtonIcon:function(e){var i=t("<span></span>");return i.addClass(this.getNamespace("button-icon")).addClass(e),i},enableButtons:function(e){return t.each(this.indexedButtons,function(t,i){i.toggleEnable(e)}),this},updateClosable:function(){return this.isRealized()&&this.getModalHeader().find("."+this.getNamespace("close-button")).toggle(this.isClosable()),this},onShow:function(t){return this.options.onshow=t,this},onShown:function(t){return this.options.onshown=t,this},onHide:function(t){return this.options.onhide=t,this},onHidden:function(t){return this.options.onhidden=t,this},isRealized:function(){return this.realized},setRealized:function(t){return this.realized=t,this},isOpened:function(){return this.opened},setOpened:function(t){return this.opened=t,this},handleModalEvents:function(){return this.getModal().on("show.bs.modal",{dialog:this},function(t){var e=t.data.dialog;if(e.setOpened(!0),e.isModalEvent(t)&&"function"==typeof e.options.onshow){var i=e.options.onshow(e);return!1===i&&e.setOpened(!1),i}}),this.getModal().on("shown.bs.modal",{dialog:this},function(t){var e=t.data.dialog;e.isModalEvent(t)&&"function"==typeof e.options.onshown&&e.options.onshown(e)}),this.getModal().on("hide.bs.modal",{dialog:this},function(t){var e=t.data.dialog;if(e.setOpened(!1),e.isModalEvent(t)&&"function"==typeof e.options.onhide){var i=e.options.onhide(e);return!1===i&&e.setOpened(!0),i}}),this.getModal().on("hidden.bs.modal",{dialog:this},function(e){var i=e.data.dialog;i.isModalEvent(e)&&"function"==typeof i.options.onhidden&&i.options.onhidden(i),i.isAutodestroy()&&(i.setRealized(!1),delete n.dialogs[i.getId()],t(this).remove()),n.moveFocus()}),this.handleModalBackdropEvent(),this.getModal().on("keyup",{dialog:this},function(t){27===t.which&&t.data.dialog.isClosable()&&t.data.dialog.canCloseByKeyboard()&&t.data.dialog.close()}),this.getModal().on("keyup",{dialog:this},function(e){var i=e.data.dialog;if(void 0!==i.registeredButtonHotkeys[e.which]){var n=t(i.registeredButtonHotkeys[e.which]);!n.prop("disabled")&&n.focus().trigger("click")}}),this},handleModalBackdropEvent:function(){return this.getModal().on("click",{dialog:this},function(e){t(e.target).hasClass("modal-backdrop")&&e.data.dialog.isClosable()&&e.data.dialog.canCloseByBackdrop()&&e.data.dialog.close()}),this},isModalEvent:function(t){return void 0!==t.namespace&&"bs.modal"===t.namespace},makeModalDraggable:function(){return this.options.draggable&&(this.getModalHeader().addClass(this.getNamespace("draggable")).on("mousedown",{dialog:this},function(t){var e=t.data.dialog;e.draggableData.isMouseDown=!0;var i=e.getModalDialog().offset();e.draggableData.mouseOffset={top:t.clientY-i.top,left:t.clientX-i.left}}),this.getModal().on("mouseup mouseleave",{dialog:this},function(t){t.data.dialog.draggableData.isMouseDown=!1}),t("body").on("mousemove",{dialog:this},function(t){var e=t.data.dialog;e.draggableData.isMouseDown&&e.getModalDialog().offset({top:t.clientY-e.draggableData.mouseOffset.top,left:t.clientX-e.draggableData.mouseOffset.left})})),this},realize:function(){return this.initModalStuff(),this.getModal().addClass(n.NAMESPACE).addClass(this.getCssClass()),this.updateSize(),this.getDescription()&&this.getModal().attr("aria-describedby",this.getDescription()),this.getModalFooter().append(this.createFooterContent()),this.getModalHeader().append(this.createHeaderContent()),this.getModalBody().append(this.createBodyContent()),this.getModal().data("bs.modal",new i(this.getModal(),{backdrop:"static",keyboard:!1,show:!1})),this.makeModalDraggable(),this.handleModalEvents(),this.setRealized(!0),this.updateButtons(),this.updateType(),this.updateTitle(),this.updateMessage(),this.updateClosable(),this.updateAnimate(),this.updateSize(),this.updateTabindex(),this},open:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("show"),this},close:function(){return!this.isRealized()&&this.realize(),this.getModal().modal("hide"),this}},n.prototype=t.extend(n.prototype,n.METHODS_TO_OVERRIDE[i.getModalVersion()]),n.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},n.show=function(t){return new n(t).open()},n.alert=function(){var e={},i={type:n.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,buttonLabel:n.DEFAULT_TEXTS.OK,callback:null};return e="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?t.extend(!0,i,arguments[0]):t.extend(!0,i,{message:arguments[0],callback:void 0!==arguments[1]?arguments[1]:null}),new n({type:e.type,title:e.title,message:e.message,closable:e.closable,draggable:e.draggable,data:{callback:e.callback},onhide:function(t){!t.getData("btnClicked")&&t.isClosable()&&"function"==typeof t.getData("callback")&&t.getData("callback")(!1)},buttons:[{label:e.buttonLabel,action:function(t){return t.setData("btnClicked",!0),("function"!=typeof t.getData("callback")||!1!==t.getData("callback").call(this,!0))&&t.close()}}]}).open()},n.confirm=function(){var e={},i={type:n.TYPE_PRIMARY,title:null,message:null,closable:!1,draggable:!1,btnCancelLabel:n.DEFAULT_TEXTS.CANCEL,btnOKLabel:n.DEFAULT_TEXTS.OK,btnOKClass:null,callback:null};return null===(e="object"==typeof arguments[0]&&arguments[0].constructor==={}.constructor?t.extend(!0,i,arguments[0]):t.extend(!0,i,{message:arguments[0],closable:!1,buttonLabel:n.DEFAULT_TEXTS.OK,callback:void 0!==arguments[1]?arguments[1]:null})).btnOKClass&&(e.btnOKClass=["btn",e.type.split("-")[1]].join("-")),new n({type:e.type,title:e.title,message:e.message,closable:e.closable,draggable:e.draggable,data:{callback:e.callback},buttons:[{label:e.btnCancelLabel,action:function(t){return("function"!=typeof t.getData("callback")||!1!==t.getData("callback").call(this,!1))&&t.close()}},{label:e.btnOKLabel,cssClass:e.btnOKClass,action:function(t){return("function"!=typeof t.getData("callback")||!1!==t.getData("callback").call(this,!0))&&t.close()}}]}).open()},n.warning=function(t,e){return new n({type:n.TYPE_WARNING,message:t}).open()},n.danger=function(t,e){return new n({type:n.TYPE_DANGER,message:t}).open()},n.success=function(t,e){return new n({type:n.TYPE_SUCCESS,message:t}).open()},n}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Zt.apply(null,arguments)}function e(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function n(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function o(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){for(var i in e)a(e,i)&&(t[i]=e[i]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,i,n){return mt(t,e,i,n,!0).utc()}function c(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function d(t){if(null==t._isValid){var e=c(t),i=Kt.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function p(t){var e=h(NaN);return null!=t?l(c(e),t):c(e).userInvalidated=!0,e}function u(t,e){var i,s,o;if(n(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),n(e._i)||(t._i=e._i),n(e._f)||(t._f=e._f),n(e._l)||(t._l=e._l),n(e._strict)||(t._strict=e._strict),n(e._tzm)||(t._tzm=e._tzm),n(e._isUTC)||(t._isUTC=e._isUTC),n(e._offset)||(t._offset=e._offset),n(e._pf)||(t._pf=c(e)),n(e._locale)||(t._locale=e._locale),Qt.length>0)for(i=0;i<Qt.length;i++)n(o=e[s=Qt[i]])||(t[s]=o);return t}function f(e){u(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Jt&&(Jt=!0,t.updateOffset(this),Jt=!1)}function g(t){return t instanceof f||null!=t&&null!=t._isAMomentObject}function m(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function v(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=m(e)),i}function y(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),r=0;for(n=0;n<s;n++)(i&&t[n]!==e[n]||!i&&v(t[n])!==v(e[n]))&&r++;return r+o}function b(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,i){var n=!0;return l(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var s,o=[],r=0;r<arguments.length;r++){if(s="","object"==typeof arguments[r]){s+="\n["+r+"] ";for(var a in arguments[0])s+=a+": "+arguments[0][a]+", ";s=s.slice(0,-2)}else s=arguments[r];o.push(s)}b(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)},i)}function w(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),te[e]||(b(i),te[e]=!0)}function x(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function C(t,e){var n,s=l({},t);for(n in e)a(e,n)&&(i(t[n])&&i(e[n])?(s[n]={},l(s[n],t[n]),l(s[n],e[n])):null!=e[n]?s[n]=e[n]:delete s[n]);for(n in t)a(t,n)&&!a(e,n)&&i(t[n])&&(s[n]=l({},s[n]));return s}function k(t){null!=t&&this.set(t)}function S(t,e){var i=t.toLowerCase();ie[i]=ie[i+"s"]=ie[e]=t}function D(t){return"string"==typeof t?ie[t]||ie[t.toLowerCase()]:void 0}function M(t){var e,i,n={};for(i in t)a(t,i)&&(e=D(i))&&(n[e]=t[i]);return n}function T(t,e){ne[t]=e}function O(t,e,i){var n=""+Math.abs(t),s=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function P(t,e,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),t&&(ae[t]=s),e&&(ae[e[0]]=function(){return O(s.apply(this,arguments),e[1],e[2])}),i&&(ae[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function B(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function E(t,e){return t.isValid()?(e=$(e,t.localeData()),re[e]=re[e]||function(t){var e,i,n=t.match(se);for(e=0,i=n.length;e<i;e++)ae[n[e]]?n[e]=ae[n[e]]:n[e]=B(n[e]);return function(e){var s,o="";for(s=0;s<i;s++)o+=x(n[s])?n[s].call(e,t):n[s];return o}}(e),re[e](t)):t.localeData().invalidDate()}function $(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(oe.lastIndex=0;n>=0&&oe.test(t);)t=t.replace(oe,i),oe.lastIndex=0,n-=1;return t}function I(t,e,i){ke[t]=x(e)?e:function(t,n){return t&&i?i:e}}function A(t,e){return a(ke,t)?ke[t](e._strict,e._locale):new RegExp(L(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})))}function L(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),s(e)&&(n=function(t,i){i[e]=v(t)}),i=0;i<t.length;i++)Se[t[i]]=n}function z(t,e){H(t,function(t,i,n,s){n._w=n._w||{},e(t,n._w,n,s)})}function N(t,e,i){null!=e&&a(Se,t)&&Se[t](e,i._a,i,t)}function R(t){return W(t)?366:365}function W(t){return t%4==0&&t%100!=0||t%400==0}function j(e,i){return function(n){return null!=n?(Y(this,e,n),t.updateOffset(this,i),this):F(this,e)}}function F(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Y(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&W(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),U(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function U(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=(e%12+12)%12;return t+=(e-i)/12,1===i?W(t)?29:28:31-i%7%2}function q(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=v(e);else if(e=t.localeData().monthsParse(e),!s(e))return t;return i=Math.min(t.date(),U(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function V(e){return null!=e?(q(this,e),t.updateOffset(this,!0),this):F(this,"Month")}function G(){function t(t,e){return e.length-t.length}var e,i,n=[],s=[],o=[];for(e=0;e<12;e++)i=h([2e3,e]),n.push(this.monthsShort(i,"")),s.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(n.sort(t),s.sort(t),o.sort(t),e=0;e<12;e++)n[e]=L(n[e]),s[e]=L(s[e]);for(e=0;e<24;e++)o[e]=L(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function X(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function Z(t,e,i){var n=7+e-i;return-(7+X(t,0,n).getUTCDay()-e)%7+n-1}function K(t,e,i,n,s){var o,r,a=1+7*(e-1)+(7+i-n)%7+Z(t,n,s);return a<=0?r=R(o=t-1)+a:a>R(t)?(o=t+1,r=a-R(t)):(o=t,r=a),{year:o,dayOfYear:r}}function Q(t,e,i){var n,s,o=Z(t.year(),e,i),r=Math.floor((t.dayOfYear()-o-1)/7)+1;return r<1?n=r+J(s=t.year()-1,e,i):r>J(t.year(),e,i)?(n=r-J(t.year(),e,i),s=t.year()+1):(s=t.year(),n=r),{week:n,year:s}}function J(t,e,i){var n=Z(t,e,i),s=Z(t+1,e,i);return(R(t)-n+s)/7}function tt(){function t(t,e){return e.length-t.length}var e,i,n,s,o,r=[],a=[],l=[],c=[];for(e=0;e<7;e++)i=h([2e3,1]).day(e),n=this.weekdaysMin(i,""),s=this.weekdaysShort(i,""),o=this.weekdays(i,""),r.push(n),a.push(s),l.push(o),c.push(n),c.push(s),c.push(o);for(r.sort(t),a.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)a[e]=L(a[e]),l[e]=L(l[e]),c[e]=L(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function et(){return this.hours()%12||12}function it(t,e){P(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function nt(t,e){return e._meridiemParse}function st(t){return t?t.toLowerCase().replace("_","-"):t}function ot(t){var e=null;if(!Ke[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Ge._abbr,require("./locale/"+t),rt(e)}catch(t){}return Ke[t]}function rt(t,e){var i;return t&&(i=n(e)?lt(t):at(t,e))&&(Ge=i),Ge._abbr}function at(t,e){if(null!==e){var i=Ze;if(e.abbr=t,null!=Ke[t])w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Ke[t]._config;else if(null!=e.parentLocale){if(null==Ke[e.parentLocale])return Qe[e.parentLocale]||(Qe[e.parentLocale]=[]),Qe[e.parentLocale].push({name:t,config:e}),null;i=Ke[e.parentLocale]._config}return Ke[t]=new k(C(i,e)),Qe[t]&&Qe[t].forEach(function(t){at(t.name,t.config)}),rt(t),Ke[t]}return delete Ke[t],null}function lt(t){var i;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ge;if(!e(t)){if(i=ot(t))return i;t=[t]}return function(t){for(var e,i,n,s,o=0;o<t.length;){for(e=(s=st(t[o]).split("-")).length,i=(i=st(t[o+1]))?i.split("-"):null;e>0;){if(n=ot(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&y(s,i,!0)>=e-1)break;e--}o++}return null}(t)}function ht(t){var e,i=t._a;return i&&-2===c(t).overflow&&(e=i[Me]<0||i[Me]>11?Me:i[Te]<1||i[Te]>U(i[De],i[Me])?Te:i[Oe]<0||i[Oe]>24||24===i[Oe]&&(0!==i[Pe]||0!==i[Be]||0!==i[Ee])?Oe:i[Pe]<0||i[Pe]>59?Pe:i[Be]<0||i[Be]>59?Be:i[Ee]<0||i[Ee]>999?Ee:-1,c(t)._overflowDayOfYear&&(e<De||e>Te)&&(e=Te),c(t)._overflowWeeks&&-1===e&&(e=$e),c(t)._overflowWeekday&&-1===e&&(e=Ie),c(t).overflow=e),t}function ct(t,e,i){return null!=t?t:null!=e?e:i}function dt(e){var i,n,s,o,r,a=[];if(!e._d){for(s=function(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}(e),e._w&&null==e._a[Te]&&null==e._a[Me]&&function(t){var e,i,n,s,o,r,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,r=4,i=ct(e.GG,t._a[De],Q(vt(),1,4).year),n=ct(e.W,1),((s=ct(e.E,1))<1||s>7)&&(l=!0);else{o=t._locale._week.dow,r=t._locale._week.doy;var h=Q(vt(),o,r);i=ct(e.gg,t._a[De],h.year),n=ct(e.w,h.week),null!=e.d?((s=e.d)<0||s>6)&&(l=!0):null!=e.e?(s=e.e+o,(e.e<0||e.e>6)&&(l=!0)):s=o}n<1||n>J(i,o,r)?c(t)._overflowWeeks=!0:null!=l?c(t)._overflowWeekday=!0:(a=K(i,n,s,o,r),t._a[De]=a.year,t._dayOfYear=a.dayOfYear)}(e),null!=e._dayOfYear&&(r=ct(e._a[De],s[De]),(e._dayOfYear>R(r)||0===e._dayOfYear)&&(c(e)._overflowDayOfYear=!0),n=X(r,0,e._dayOfYear),e._a[Me]=n.getUTCMonth(),e._a[Te]=n.getUTCDate()),i=0;i<3&&null==e._a[i];++i)e._a[i]=a[i]=s[i];for(;i<7;i++)e._a[i]=a[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Oe]&&0===e._a[Pe]&&0===e._a[Be]&&0===e._a[Ee]&&(e._nextDay=!0,e._a[Oe]=0),e._d=(e._useUTC?X:function(t,e,i,n,s,o,r){var a=new Date(t,e,i,n,s,o,r);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}).apply(null,a),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Oe]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(c(e).weekdayMismatch=!0)}}function pt(t){var e,i,n,s,o,r,a=t._i,l=Je.exec(a)||ti.exec(a);if(l){for(c(t).iso=!0,e=0,i=ii.length;e<i;e++)if(ii[e][1].exec(l[1])){s=ii[e][0],n=!1!==ii[e][2];break}if(null==s)return void(t._isValid=!1);if(l[3]){for(e=0,i=ni.length;e<i;e++)if(ni[e][1].exec(l[3])){o=(l[2]||" ")+ni[e][0];break}if(null==o)return void(t._isValid=!1)}if(!n&&null!=o)return void(t._isValid=!1);if(l[4]){if(!ei.exec(l[4]))return void(t._isValid=!1);r="Z"}t._f=s+(o||"")+(r||""),ft(t)}else t._isValid=!1}function ut(t){var e=oi.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(e){var i=function(t,e,i,n,s,o){var r=[function(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}(t),Ne.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(s,10)];return o&&r.push(parseInt(o,10)),r}(e[4],e[3],e[2],e[5],e[6],e[7]);if(!function(t,e,i){return!t||Fe.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(c(i).weekdayMismatch=!0,i._isValid=!1,!1)}(e[1],i,t))return;t._a=i,t._tzm=function(t,e,i){if(t)return ri[t];if(e)return 0;var n=parseInt(i,10),s=n%100;return(n-s)/100*60+s}(e[8],e[9],e[10]),t._d=X.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),c(t).rfc2822=!0}else t._isValid=!1}function ft(e){if(e._f!==t.ISO_8601)if(e._f!==t.RFC_2822){e._a=[],c(e).empty=!0;var i,n,s,o,r,a=""+e._i,l=a.length,h=0;for(s=$(e._f,e._locale).match(se)||[],i=0;i<s.length;i++)o=s[i],(n=(a.match(A(o,e))||[])[0])&&((r=a.substr(0,a.indexOf(n))).length>0&&c(e).unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),h+=n.length),ae[o]?(n?c(e).empty=!1:c(e).unusedTokens.push(o),N(o,n,e)):e._strict&&!n&&c(e).unusedTokens.push(o);c(e).charsLeftOver=l-h,a.length>0&&c(e).unusedInput.push(a),e._a[Oe]<=12&&!0===c(e).bigHour&&e._a[Oe]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[Oe]=function(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}(e._locale,e._a[Oe],e._meridiem),dt(e),ht(e)}else ut(e);else pt(e)}function gt(a){var h=a._i,m=a._f;return a._locale=a._locale||lt(a._l),null===h||void 0===m&&""===h?p({nullInput:!0}):("string"==typeof h&&(a._i=h=a._locale.preparse(h)),g(h)?new f(ht(h)):(o(h)?a._d=h:e(m)?function(t){var e,i,n,s,o;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)o=0,e=u({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],ft(e),d(e)&&(o+=c(e).charsLeftOver,o+=10*c(e).unusedTokens.length,c(e).score=o,(null==n||o<n)&&(n=o,i=e));l(t,i||e)}(a):m?ft(a):function(a){var l=a._i;n(l)?a._d=new Date(t.now()):o(l)?a._d=new Date(l.valueOf()):"string"==typeof l?function(e){var i=si.exec(e._i);null===i?(pt(e),!1===e._isValid&&(delete e._isValid,ut(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))):e._d=new Date(+i[1])}(a):e(l)?(a._a=r(l.slice(0),function(t){return parseInt(t,10)}),dt(a)):i(l)?function(t){if(!t._d){var e=M(t._i);t._a=r([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),dt(t)}}(a):s(l)?a._d=new Date(l):t.createFromInputFallback(a)}(a),d(a)||(a._d=null),a))}function mt(t,n,s,o,r){var a={};return!0!==s&&!1!==s||(o=s,s=void 0),(i(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||e(t)&&0===t.length)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=r,a._l=s,a._i=t,a._f=n,a._strict=o,function(t){var e=new f(ht(gt(a)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}()}function vt(t,e,i,n){return mt(t,e,i,n,!1)}function yt(t,i){var n,s;if(1===i.length&&e(i[0])&&(i=i[0]),!i.length)return vt();for(n=i[0],s=1;s<i.length;++s)i[s].isValid()&&!i[s][t](n)||(n=i[s]);return n}function bt(t){var e=M(t),i=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||0,r=e.day||0,a=e.hour||0,l=e.minute||0,h=e.second||0,c=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===Ae.call(hi,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<hi.length;++n)if(t[hi[n]]){if(i)return!1;parseFloat(t[hi[n]])!==v(t[hi[n]])&&(i=!0)}return!0}(e),this._milliseconds=+c+1e3*h+6e4*l+1e3*a*60*60,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=lt(),this._bubble()}function _t(t){return t instanceof bt}function wt(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function xt(t,e){P(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+O(~~(t/60),2)+e+O(~~t%60,2)})}function Ct(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(ci)||["-",0,0],s=60*n[1]+v(n[2]);return 0===s?0:"+"===n[0]?s:-s}function kt(e,i){var n,s;return i._isUTC?(n=i.clone(),s=(g(e)||o(e)?e.valueOf():vt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),t.updateOffset(n,!1),n):vt(e).local()}function St(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Dt(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Mt(t,e){var i,n,o,r=t,l=null;return _t(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(r={},e?r[e]=t:r.milliseconds=t):(l=di.exec(t))?(i="-"===l[1]?-1:1,r={y:0,d:v(l[Te])*i,h:v(l[Oe])*i,m:v(l[Pe])*i,s:v(l[Be])*i,ms:v(wt(1e3*l[Ee]))*i}):(l=pi.exec(t))?(i="-"===l[1]?-1:(l[1],1),r={y:Tt(l[2],i),M:Tt(l[3],i),w:Tt(l[4],i),d:Tt(l[5],i),h:Tt(l[6],i),m:Tt(l[7],i),s:Tt(l[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=function(t,e){var i;return t.isValid()&&e.isValid()?(e=kt(e,t),t.isBefore(e)?i=Ot(t,e):((i=Ot(e,t)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}(vt(r.from),vt(r.to)),(r={}).ms=o.milliseconds,r.M=o.months),n=new bt(r),_t(t)&&a(t,"_locale")&&(n._locale=t._locale),n}function Tt(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Ot(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Pt(t,e){return function(i,n){var s,o;return null===n||isNaN(+n)||(w(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),i="string"==typeof i?+i:i,s=Mt(i,n),Bt(this,s,t),this}}function Bt(e,i,n,s){var o=i._milliseconds,r=wt(i._days),a=wt(i._months);e.isValid()&&(s=null==s||s,a&&q(e,F(e,"Month")+a*n),r&&Y(e,"Date",F(e,"Date")+r*n),o&&e._d.setTime(e._d.valueOf()+o*n),s&&t.updateOffset(e,r||a))}function Et(t,e){var i,n=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(n,"months");return i=e-s<0?(e-s)/(s-t.clone().add(n-1,"months")):(e-s)/(t.clone().add(n+1,"months")-s),-(n+i)||0}function $t(t){var e;return void 0===t?this._locale._abbr:(null!=(e=lt(t))&&(this._locale=e),this)}function It(){return this._locale}function At(t,e){P(0,[t,t.length],0,e)}function Lt(t,e,i,n,s){var o;return null==t?Q(this,n,s).year:(o=J(t,n,s),e>o&&(e=o),function(t,e,i,n,s){var o=K(t,e,i,n,s),r=X(o.year,0,o.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}.call(this,t,e,i,n,s))}function Ht(t,e){e[Ee]=v(1e3*("0."+t))}function zt(t){return t}function Nt(t,e,i,n){var s=lt(),o=h().set(n,e);return s[i](o,t)}function Rt(t,e,i){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return Nt(t,e,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=Nt(t,n,i,"month");return o}function Wt(t,e,i,n){"boolean"==typeof t?(s(e)&&(i=e,e=void 0),e=e||""):(i=e=t,t=!1,s(e)&&(i=e,e=void 0),e=e||"");var o=lt(),r=t?o._week.dow:0;if(null!=i)return Nt(e,(i+r)%7,n,"day");var a,l=[];for(a=0;a<7;a++)l[a]=Nt(e,(a+r)%7,n,"day");return l}function jt(t,e,i,n){var s=Mt(e,i);return t._milliseconds+=n*s._milliseconds,t._days+=n*s._days,t._months+=n*s._months,t._bubble()}function Ft(t){return t<0?Math.floor(t):Math.ceil(t)}function Yt(t){return 4800*t/146097}function Ut(t){return 146097*t/4800}function qt(t){return function(){return this.as(t)}}function Vt(t){return function(){return this.isValid()?this._data[t]:NaN}}function Gt(t){return(t>0)-(t<0)||+t}function Xt(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=Wi(this._milliseconds)/1e3,n=Wi(this._days),s=Wi(this._months);e=m((t=m(i/60))/60),i%=60,t%=60;var o=m(s/12),r=s%=12,a=n,l=e,h=t,c=i?i.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var p=d<0?"-":"",u=Gt(this._months)!==Gt(d)?"-":"",f=Gt(this._days)!==Gt(d)?"-":"",g=Gt(this._milliseconds)!==Gt(d)?"-":"";return p+"P"+(o?u+o+"Y":"")+(r?u+r+"M":"")+(a?f+a+"D":"")+(l||h||c?"T":"")+(l?g+l+"H":"")+(h?g+h+"M":"")+(c?g+c+"S":"")}var Zt,Kt;Kt=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var Qt=t.momentProperties=[],Jt=!1,te={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var ee;ee=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)a(t,e)&&i.push(e);return i};var ie={},ne={},se=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,oe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,re={},ae={},le=/\d/,he=/\d\d/,ce=/\d{3}/,de=/\d{4}/,pe=/[+-]?\d{6}/,ue=/\d\d?/,fe=/\d\d\d\d?/,ge=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ve=/\d{1,4}/,ye=/[+-]?\d{1,6}/,be=/\d+/,_e=/[+-]?\d+/,we=/Z|[+-]\d\d:?\d\d/gi,xe=/Z|[+-]\d\d(?::?\d\d)?/gi,Ce=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ke={},Se={},De=0,Me=1,Te=2,Oe=3,Pe=4,Be=5,Ee=6,$e=7,Ie=8;P("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),P(0,["YY",2],0,function(){return this.year()%100}),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),S("year","y"),T("year",1),I("Y",_e),I("YY",ue,he),I("YYYY",ve,de),I("YYYYY",ye,pe),I("YYYYYY",ye,pe),H(["YYYYY","YYYYYY"],De),H("YYYY",function(e,i){i[De]=2===e.length?t.parseTwoDigitYear(e):v(e)}),H("YY",function(e,i){i[De]=t.parseTwoDigitYear(e)}),H("Y",function(t,e){e[De]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)};var Ae,Le=j("FullYear",!0);Ae=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},P("M",["MM",2],"Mo",function(){return this.month()+1}),P("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),P("MMMM",0,0,function(t){return this.localeData().months(this,t)}),S("month","M"),T("month",8),I("M",ue),I("MM",ue,he),I("MMM",function(t,e){return e.monthsShortRegex(t)}),I("MMMM",function(t,e){return e.monthsRegex(t)}),H(["M","MM"],function(t,e){e[Me]=v(t)-1}),H(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);null!=s?e[Me]=s:c(i).invalidMonth=t});var He=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ze="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Re=Ce,We=Ce;P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),T("week",5),T("isoWeek",5),I("w",ue),I("ww",ue,he),I("W",ue),I("WW",ue,he),z(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=v(t)}),P("d",0,"do","day"),P("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),P("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),P("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),T("day",11),T("weekday",11),T("isoWeekday",11),I("d",ue),I("e",ue),I("E",ue),I("dd",function(t,e){return e.weekdaysMinRegex(t)}),I("ddd",function(t,e){return e.weekdaysShortRegex(t)}),I("dddd",function(t,e){return e.weekdaysRegex(t)}),z(["dd","ddd","dddd"],function(t,e,i,n){var s=i._locale.weekdaysParse(t,n,i._strict);null!=s?e.d=s:c(i).invalidWeekday=t}),z(["d","e","E"],function(t,e,i,n){e[n]=v(t)});var je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ye="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ue=Ce,qe=Ce,Ve=Ce;P("H",["HH",2],0,"hour"),P("h",["hh",2],0,et),P("k",["kk",2],0,function(){return this.hours()||24}),P("hmm",0,0,function(){return""+et.apply(this)+O(this.minutes(),2)}),P("hmmss",0,0,function(){return""+et.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),P("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),P("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),it("a",!0),it("A",!1),S("hour","h"),T("hour",13),I("a",nt),I("A",nt),I("H",ue),I("h",ue),I("k",ue),I("HH",ue,he),I("hh",ue,he),I("kk",ue,he),I("hmm",fe),I("hmmss",ge),I("Hmm",fe),I("Hmmss",ge),H(["H","HH"],Oe),H(["k","kk"],function(t,e,i){var n=v(t);e[Oe]=24===n?0:n}),H(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),H(["h","hh"],function(t,e,i){e[Oe]=v(t),c(i).bigHour=!0}),H("hmm",function(t,e,i){var n=t.length-2;e[Oe]=v(t.substr(0,n)),e[Pe]=v(t.substr(n)),c(i).bigHour=!0}),H("hmmss",function(t,e,i){var n=t.length-4,s=t.length-2;e[Oe]=v(t.substr(0,n)),e[Pe]=v(t.substr(n,2)),e[Be]=v(t.substr(s)),c(i).bigHour=!0}),H("Hmm",function(t,e,i){var n=t.length-2;e[Oe]=v(t.substr(0,n)),e[Pe]=v(t.substr(n))}),H("Hmmss",function(t,e,i){var n=t.length-4,s=t.length-2;e[Oe]=v(t.substr(0,n)),e[Pe]=v(t.substr(n,2)),e[Be]=v(t.substr(s))});var Ge,Xe=j("Hours",!0),Ze={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:ze,monthsShort:Ne,week:{dow:0,doy:6},weekdays:je,weekdaysMin:Ye,weekdaysShort:Fe,meridiemParse:/[ap]\.?m?\.?/i},Ke={},Qe={},Je=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ti=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ei=/Z|[+-]\d\d(?::?\d\d)?/,ii=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ni=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],si=/^\/?Date\((\-?\d+)/i,oi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ri={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var ai=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=vt.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()}),li=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=vt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()}),hi=["year","quarter","month","week","day","hour","minute","second","millisecond"];xt("Z",":"),xt("ZZ",""),I("Z",xe),I("ZZ",xe),H(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ct(xe,t)});var ci=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var di=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,pi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Mt.fn=bt.prototype,Mt.invalid=function(){return Mt(NaN)};var ui=Pt(1,"add"),fi=Pt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var gi=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});P(0,["gg",2],0,function(){return this.weekYear()%100}),P(0,["GG",2],0,function(){return this.isoWeekYear()%100}),At("gggg","weekYear"),At("ggggg","weekYear"),At("GGGG","isoWeekYear"),At("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),T("weekYear",1),T("isoWeekYear",1),I("G",_e),I("g",_e),I("GG",ue,he),I("gg",ue,he),I("GGGG",ve,de),I("gggg",ve,de),I("GGGGG",ye,pe),I("ggggg",ye,pe),z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=v(t)}),z(["gg","GG"],function(e,i,n,s){i[s]=t.parseTwoDigitYear(e)}),P("Q",0,"Qo","quarter"),S("quarter","Q"),T("quarter",7),I("Q",le),H("Q",function(t,e){e[Me]=3*(v(t)-1)}),P("D",["DD",2],"Do","date"),S("date","D"),T("date",9),I("D",ue),I("DD",ue,he),I("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),H(["D","DD"],Te),H("Do",function(t,e){e[Te]=v(t.match(ue)[0])});var mi=j("Date",!0);P("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),T("dayOfYear",4),I("DDD",me),I("DDDD",ce),H(["DDD","DDDD"],function(t,e,i){i._dayOfYear=v(t)}),P("m",["mm",2],0,"minute"),S("minute","m"),T("minute",14),I("m",ue),I("mm",ue,he),H(["m","mm"],Pe);var vi=j("Minutes",!1);P("s",["ss",2],0,"second"),S("second","s"),T("second",15),I("s",ue),I("ss",ue,he),H(["s","ss"],Be);var yi=j("Seconds",!1);P("S",0,0,function(){return~~(this.millisecond()/100)}),P(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,function(){return 10*this.millisecond()}),P(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),P(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),P(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),P(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),P(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),T("millisecond",16),I("S",me,le),I("SS",me,he),I("SSS",me,ce);var bi;for(bi="SSSS";bi.length<=9;bi+="S")I(bi,be);for(bi="S";bi.length<=9;bi+="S")H(bi,Ht);var _i=j("Milliseconds",!1);P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var wi=f.prototype;wi.add=ui,wi.calendar=function(e,i){var n=e||vt(),s=kt(n,this).startOf("day"),o=t.calendarFormat(this,s)||"sameElse",r=i&&(x(i[o])?i[o].call(this,n):i[o]);return this.format(r||this.localeData().calendar(o,this,vt(n)))},wi.clone=function(){return new f(this)},wi.diff=function(t,e,i){var n,s,o;if(!this.isValid())return NaN;if(!(n=kt(t,this)).isValid())return NaN;switch(s=6e4*(n.utcOffset()-this.utcOffset()),e=D(e)){case"year":o=Et(this,n)/12;break;case"month":o=Et(this,n);break;case"quarter":o=Et(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-s)/864e5;break;case"week":o=(this-n-s)/6048e5;break;default:o=this-n}return i?o:m(o)},wi.endOf=function(t){return void 0===(t=D(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},wi.format=function(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=E(this,e);return this.localeData().postformat(i)},wi.from=function(t,e){return this.isValid()&&(g(t)&&t.isValid()||vt(t).isValid())?Mt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},wi.fromNow=function(t){return this.from(vt(),t)},wi.to=function(t,e){return this.isValid()&&(g(t)&&t.isValid()||vt(t).isValid())?Mt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},wi.toNow=function(t){return this.to(vt(),t)},wi.get=function(t){return t=D(t),x(this[t])?this[t]():this},wi.invalidAt=function(){return c(this).overflow},wi.isAfter=function(t,e){var i=g(t)?t:vt(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=D(n(e)?"millisecond":e))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},wi.isBefore=function(t,e){var i=g(t)?t:vt(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=D(n(e)?"millisecond":e))?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},wi.isBetween=function(t,e,i,n){return("("===(n=n||"()")[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))},wi.isSame=function(t,e){var i,n=g(t)?t:vt(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=D(e||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},wi.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},wi.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},wi.isValid=function(){return d(this)},wi.lang=gi,wi.locale=$t,wi.localeData=It,wi.max=li,wi.min=ai,wi.parsingFlags=function(){return l({},c(this))},wi.set=function(t,e){if("object"==typeof t)for(var i=function(t){var e=[];for(var i in t)e.push({unit:i,priority:ne[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=M(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(t=D(t),x(this[t]))return this[t](e);return this},wi.startOf=function(t){switch(t=D(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},wi.subtract=fi,wi.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},wi.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},wi.toDate=function(){return new Date(this.valueOf())},wi.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?E(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",E(i,"Z")):E(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},wi.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+s)},wi.toJSON=function(){return this.isValid()?this.toISOString():null},wi.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},wi.unix=function(){return Math.floor(this.valueOf()/1e3)},wi.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},wi.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},wi.year=Le,wi.isLeapYear=function(){return W(this.year())},wi.weekYear=function(t){return Lt.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},wi.isoWeekYear=function(t){return Lt.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},wi.quarter=wi.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},wi.month=V,wi.daysInMonth=function(){return U(this.year(),this.month())},wi.week=wi.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},wi.isoWeek=wi.isoWeeks=function(t){var e=Q(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},wi.weeksInYear=function(){var t=this.localeData()._week;return J(this.year(),t.dow,t.doy)},wi.isoWeeksInYear=function(){return J(this.year(),1,4)},wi.date=mi,wi.day=wi.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},wi.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},wi.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},wi.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},wi.hour=wi.hours=Xe,wi.minute=wi.minutes=vi,wi.second=wi.seconds=yi,wi.millisecond=wi.milliseconds=_i,wi.utcOffset=function(e,i,n){var s,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ct(xe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&i&&(s=St(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),o!==e&&(!i||this._changeInProgress?Bt(this,Mt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:St(this)},wi.utc=function(t){return this.utcOffset(0,t)},wi.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(St(this),"m")),this},wi.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ct(we,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},wi.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?vt(t).utcOffset():0,(this.utcOffset()-t)%60==0)},wi.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},wi.isLocal=function(){return!!this.isValid()&&!this._isUTC},wi.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},wi.isUtc=Dt,wi.isUTC=Dt,wi.zoneAbbr=function(){return this._isUTC?"UTC":""},wi.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},wi.dates=_("dates accessor is deprecated. Use date instead.",mi),wi.months=_("months accessor is deprecated. Use month instead",V),wi.years=_("years accessor is deprecated. Use year instead",Le),wi.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),wi.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!n(this._isDSTShifted))return this._isDSTShifted;var t={};if(u(t,this),(t=gt(t))._a){var e=t._isUTC?h(t._a):vt(t._a);this._isDSTShifted=this.isValid()&&y(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var xi=k.prototype;xi.calendar=function(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return x(n)?n.call(e,i):n},xi.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},xi.invalidDate=function(){return this._invalidDate},xi.ordinal=function(t){return this._ordinal.replace("%d",t)},xi.preparse=zt,xi.postformat=zt,xi.relativeTime=function(t,e,i,n){var s=this._relativeTime[i];return x(s)?s(t,e,i,n):s.replace(/%d/i,t)},xi.pastFuture=function(t,e){var i=this._relativeTime[t>0?"future":"past"];return x(i)?i(e):i.replace(/%s/i,e)},xi.set=function(t){var e,i;for(i in t)x(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},xi.months=function(t,i){return t?e(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||He).test(i)?"format":"standalone"][t.month()]:e(this._months)?this._months:this._months.standalone},xi.monthsShort=function(t,i){return t?e(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[He.test(i)?"format":"standalone"][t.month()]:e(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},xi.monthsParse=function(t,e,i){var n,s,o;if(this._monthsParseExact)return function(t,e,i){var n,s,o,r=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=h([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(s=Ae.call(this._shortMonthsParse,r))?s:null:-1!==(s=Ae.call(this._longMonthsParse,r))?s:null:"MMM"===e?-1!==(s=Ae.call(this._shortMonthsParse,r))?s:-1!==(s=Ae.call(this._longMonthsParse,r))?s:null:-1!==(s=Ae.call(this._longMonthsParse,r))?s:-1!==(s=Ae.call(this._shortMonthsParse,r))?s:null}.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=h([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},xi.monthsRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||G.call(this),t?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=We),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},xi.monthsShortRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||G.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},xi.week=function(t){return Q(t,this._week.dow,this._week.doy).week},xi.firstDayOfYear=function(){return this._week.doy},xi.firstDayOfWeek=function(){return this._week.dow},xi.weekdays=function(t,i){return t?e(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(i)?"format":"standalone"][t.day()]:e(this._weekdays)?this._weekdays:this._weekdays.standalone},xi.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},xi.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},xi.weekdaysParse=function(t,e,i){var n,s,o;if(this._weekdaysParseExact)return function(t,e,i){var n,s,o,r=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=h([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(s=Ae.call(this._weekdaysParse,r))?s:null:"ddd"===e?-1!==(s=Ae.call(this._shortWeekdaysParse,r))?s:null:-1!==(s=Ae.call(this._minWeekdaysParse,r))?s:null:"dddd"===e?-1!==(s=Ae.call(this._weekdaysParse,r))?s:-1!==(s=Ae.call(this._shortWeekdaysParse,r))?s:-1!==(s=Ae.call(this._minWeekdaysParse,r))?s:null:"ddd"===e?-1!==(s=Ae.call(this._shortWeekdaysParse,r))?s:-1!==(s=Ae.call(this._weekdaysParse,r))?s:-1!==(s=Ae.call(this._minWeekdaysParse,r))?s:null:-1!==(s=Ae.call(this._minWeekdaysParse,r))?s:-1!==(s=Ae.call(this._weekdaysParse,r))?s:-1!==(s=Ae.call(this._shortWeekdaysParse,r))?s:null}.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=h([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}},xi.weekdaysRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||tt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Ue),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},xi.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||tt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},xi.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||tt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ve),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},xi.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},xi.meridiem=function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},rt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=_("moment.lang is deprecated. Use moment.locale instead.",rt),t.langData=_("moment.langData is deprecated. Use moment.localeData instead.",lt);var Ci=Math.abs,ki=qt("ms"),Si=qt("s"),Di=qt("m"),Mi=qt("h"),Ti=qt("d"),Oi=qt("w"),Pi=qt("M"),Bi=qt("y"),Ei=Vt("milliseconds"),$i=Vt("seconds"),Ii=Vt("minutes"),Ai=Vt("hours"),Li=Vt("days"),Hi=Vt("months"),zi=Vt("years"),Ni=Math.round,Ri={ss:44,s:45,m:45,h:22,d:26,M:11},Wi=Math.abs,ji=bt.prototype;return ji.isValid=function(){return this._isValid},ji.abs=function(){var t=this._data;return this._milliseconds=Ci(this._milliseconds),this._days=Ci(this._days),this._months=Ci(this._months),t.milliseconds=Ci(t.milliseconds),t.seconds=Ci(t.seconds),t.minutes=Ci(t.minutes),t.hours=Ci(t.hours),t.months=Ci(t.months),t.years=Ci(t.years),this},ji.add=function(t,e){return jt(this,t,e,1)},ji.subtract=function(t,e){return jt(this,t,e,-1)},ji.as=function(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=D(t))||"year"===t)return e=this._days+n/864e5,i=this._months+Yt(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Ut(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},ji.asMilliseconds=ki,ji.asSeconds=Si,ji.asMinutes=Di,ji.asHours=Mi,ji.asDays=Ti,ji.asWeeks=Oi,ji.asMonths=Pi,ji.asYears=Bi,ji.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12):NaN},ji._bubble=function(){var t,e,i,n,s,o=this._milliseconds,r=this._days,a=this._months,l=this._data;return o>=0&&r>=0&&a>=0||o<=0&&r<=0&&a<=0||(o+=864e5*Ft(Ut(a)+r),r=0,a=0),l.milliseconds=o%1e3,t=m(o/1e3),l.seconds=t%60,e=m(t/60),l.minutes=e%60,i=m(e/60),l.hours=i%24,r+=m(i/24),s=m(Yt(r)),a+=s,r-=Ft(Ut(s)),n=m(a/12),a%=12,l.days=r,l.months=a,l.years=n,this},ji.clone=function(){return Mt(this)},ji.get=function(t){return t=D(t),this.isValid()?this[t+"s"]():NaN},ji.milliseconds=Ei,ji.seconds=$i,ji.minutes=Ii,ji.hours=Ai,ji.days=Li,ji.weeks=function(){return m(this.days()/7)},ji.months=Hi,ji.years=zi,ji.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=function(t,e,i){var n=Mt(t).abs(),s=Ni(n.as("s")),o=Ni(n.as("m")),r=Ni(n.as("h")),a=Ni(n.as("d")),l=Ni(n.as("M")),h=Ni(n.as("y")),c=s<=Ri.ss&&["s",s]||s<Ri.s&&["ss",s]||o<=1&&["m"]||o<Ri.m&&["mm",o]||r<=1&&["h"]||r<Ri.h&&["hh",r]||a<=1&&["d"]||a<Ri.d&&["dd",a]||l<=1&&["M"]||l<Ri.M&&["MM",l]||h<=1&&["y"]||["yy",h];return c[2]=e,c[3]=+t>0,c[4]=i,function(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}.apply(null,c)}(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)},ji.toISOString=Xt,ji.toString=Xt,ji.toJSON=Xt,ji.locale=$t,ji.localeData=It,ji.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xt),ji.lang=gi,P("X",0,0,"unix"),P("x",0,0,"valueOf"),I("x",_e),I("X",/[+-]?\d+(\.\d{1,3})?/),H("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),H("x",function(t,e,i){i._d=new Date(v(t))}),t.version="2.20.1",Zt=vt,t.fn=wi,t.min=function(){return yt("isBefore",[].slice.call(arguments,0))},t.max=function(){return yt("isAfter",[].slice.call(arguments,0))},t.now=function(){return Date.now?Date.now():+new Date},t.utc=h,t.unix=function(t){return vt(1e3*t)},t.months=function(t,e){return Rt(t,e,"months")},t.isDate=o,t.locale=rt,t.invalid=p,t.duration=Mt,t.isMoment=g,t.weekdays=function(t,e,i){return Wt(t,e,i,"weekdays")},t.parseZone=function(){return vt.apply(null,arguments).parseZone()},t.localeData=lt,t.isDuration=_t,t.monthsShort=function(t,e){return Rt(t,e,"monthsShort")},t.weekdaysMin=function(t,e,i){return Wt(t,e,i,"weekdaysMin")},t.defineLocale=at,t.updateLocale=function(t,e){if(null!=e){var i,n,s=Ze;null!=(n=ot(t))&&(s=n._config),(i=new k(e=C(s,e))).parentLocale=Ke[t],Ke[t]=i,rt(t)}else null!=Ke[t]&&(null!=Ke[t].parentLocale?Ke[t]=Ke[t].parentLocale:null!=Ke[t]&&delete Ke[t]);return Ke[t]},t.locales=function(){return ee(Ke)},t.weekdaysShort=function(t,e,i){return Wt(t,e,i,"weekdaysShort")},t.normalizeUnits=D,t.relativeTimeRounding=function(t){return void 0===t?Ni:"function"==typeof t&&(Ni=t,!0)},t.relativeTimeThreshold=function(t,e){return void 0!==Ri[t]&&(void 0===e?Ri[t]:(Ri[t]=e,"s"===t&&(Ri.ss=e-1),!0))},t.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},t.prototype=wi,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t}),function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)module.exports=t(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){"use strict";if(!e)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var i=function(i,n){var s,o,r,a,l,h,c,d={},p=!0,u=!1,f=!1,g=0,m=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],y=["top","bottom","auto"],b=["left","right","auto"],_=["default","top","bottom"],w={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},x={},C=function(){return void 0!==e.tz&&void 0!==n.timeZone&&null!==n.timeZone&&""!==n.timeZone},k=function(t){var i;return i=void 0===t||null===t?e():e.isDate(t)||e.isMoment(t)?e(t):C()?e.tz(t,h,n.useStrict,n.timeZone):e(t,h,n.useStrict),C()&&i.tz(n.timeZone),i},S=function(t){if("string"!=typeof t||t.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return-1!==l.indexOf("Y");case"M":return-1!==l.indexOf("M");case"d":return-1!==l.toLowerCase().indexOf("d");case"h":case"H":return-1!==l.toLowerCase().indexOf("h");case"m":return-1!==l.indexOf("m");case"s":return-1!==l.indexOf("s");default:return!1}},D=function(){return S("h")||S("m")||S("s")},M=function(){return S("y")||S("M")||S("d")},T=function(){var e=t("<div>").addClass("timepicker-hours").append(t("<table>").addClass("table-condensed")),i=t("<div>").addClass("timepicker-minutes").append(t("<table>").addClass("table-condensed")),s=t("<div>").addClass("timepicker-seconds").append(t("<table>").addClass("table-condensed")),o=[function(){var e=t("<tr>"),i=t("<tr>"),s=t("<tr>");return S("h")&&(e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:n.tooltips.pickHour}).attr("data-action","showHours"))),s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(t("<span>").addClass(n.icons.down))))),S("m")&&(S("h")&&(e.append(t("<td>").addClass("separator")),i.append(t("<td>").addClass("separator").html(":")),s.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:n.tooltips.pickMinute}).attr("data-action","showMinutes"))),s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(t("<span>").addClass(n.icons.down))))),S("s")&&(S("m")&&(e.append(t("<td>").addClass("separator")),i.append(t("<td>").addClass("separator").html(":")),s.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:n.tooltips.pickSecond}).attr("data-action","showSeconds"))),s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(t("<span>").addClass(n.icons.down))))),a||(e.append(t("<td>").addClass("separator")),i.append(t("<td>").append(t("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:n.tooltips.togglePeriod}))),s.append(t("<td>").addClass("separator"))),t("<div>").addClass("timepicker-picker").append(t("<table>").addClass("table-condensed").append([e,i,s]))}()];return S("h")&&o.push(e),S("m")&&o.push(i),S("s")&&o.push(s),o},O=function(){var e=t("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=t("<div>").addClass("datepicker").append(function(){var e=t("<thead>").append(t("<tr>").append(t("<th>").addClass("prev").attr("data-action","previous").append(t("<span>").addClass(n.icons.previous))).append(t("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",n.calendarWeeks?"6":"5")).append(t("<th>").addClass("next").attr("data-action","next").append(t("<span>").addClass(n.icons.next)))),i=t("<tbody>").append(t("<tr>").append(t("<td>").attr("colspan",n.calendarWeeks?"8":"7")));return[t("<div>").addClass("datepicker-days").append(t("<table>").addClass("table-condensed").append(e).append(t("<tbody>"))),t("<div>").addClass("datepicker-months").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-years").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-decades").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone()))]}()),s=t("<div>").addClass("timepicker").append(T()),o=t("<ul>").addClass("list-unstyled"),r=t("<li>").addClass("picker-switch"+(n.collapse?" accordion-toggle":"")).append(function(){var e=[];return n.showTodayButton&&e.push(t("<td>").append(t("<a>").attr({"data-action":"today",title:n.tooltips.today}).append(t("<span>").addClass(n.icons.today)))),!n.sideBySide&&M()&&D()&&e.push(t("<td>").append(t("<a>").attr({"data-action":"togglePicker",title:n.tooltips.selectTime}).append(t("<span>").addClass(n.icons.time)))),n.showClear&&e.push(t("<td>").append(t("<a>").attr({"data-action":"clear",title:n.tooltips.clear}).append(t("<span>").addClass(n.icons.clear)))),n.showClose&&e.push(t("<td>").append(t("<a>").attr({"data-action":"close",title:n.tooltips.close}).append(t("<span>").addClass(n.icons.close)))),t("<table>").addClass("table-condensed").append(t("<tbody>").append(t("<tr>").append(e)))}());return n.inline&&e.removeClass("dropdown-menu"),a&&e.addClass("usetwentyfour"),S("s")&&!a&&e.addClass("wider"),n.sideBySide&&M()&&D()?(e.addClass("timepicker-sbs"),"top"===n.toolbarPlacement&&e.append(r),e.append(t("<div>").addClass("row").append(i.addClass("col-md-6")).append(s.addClass("col-md-6"))),"bottom"===n.toolbarPlacement&&e.append(r),e):("top"===n.toolbarPlacement&&o.append(r),M()&&o.append(t("<li>").addClass(n.collapse&&D()?"collapse in":"").append(i)),"default"===n.toolbarPlacement&&o.append(r),D()&&o.append(t("<li>").addClass(n.collapse&&M()?"collapse":"").append(s)),"bottom"===n.toolbarPlacement&&o.append(r),e.append(o))},P=function(){var e,s=(u||i).position(),o=(u||i).offset(),r=n.widgetPositioning.vertical,a=n.widgetPositioning.horizontal;if(n.widgetParent)e=n.widgetParent.append(f);else if(i.is("input"))e=i.after(f).parent();else{if(n.inline)return void(e=i.append(f));e=i,i.children().first().after(f)}if("auto"===r&&(r=o.top+1.5*f.height()>=t(window).height()+t(window).scrollTop()&&f.height()+i.outerHeight()<o.top?"top":"bottom"),"auto"===a&&(a=e.width()<o.left+f.outerWidth()/2&&o.left+f.outerWidth()>t(window).width()?"right":"left"),"top"===r?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===a?f.addClass("pull-right"):f.removeClass("pull-right"),"static"===e.css("position")&&(e=e.parents().filter(function(){return"static"!==t(this).css("position")}).first()),0===e.length)throw new Error("datetimepicker component should be placed within a non-static positioned container");f.css({top:"top"===r?"auto":s.top+i.outerHeight(),bottom:"top"===r?e.outerHeight()-(e===i?0:s.top):"auto",left:"left"===a?e===i?0:s.left:"auto",right:"left"===a?"auto":e.outerWidth()-i.outerWidth()-(e===i?0:s.left)})},B=function(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||i.trigger(t)},E=function(t){"y"===t&&(t="YYYY"),B({type:"dp.update",change:t,viewDate:o.clone()})},$=function(t){f&&(t&&(c=Math.max(g,Math.min(3,c+t))),f.find(".datepicker > div").hide().filter(".datepicker-"+m[c].clsName).show())},I=function(e,i){if(!e.isValid())return!1;if(n.disabledDates&&"d"===i&&function(t){return!0===n.disabledDates[t.format("YYYY-MM-DD")]}(e))return!1;if(n.enabledDates&&"d"===i&&!function(t){return!0===n.enabledDates[t.format("YYYY-MM-DD")]}(e))return!1;if(n.minDate&&e.isBefore(n.minDate,i))return!1;if(n.maxDate&&e.isAfter(n.maxDate,i))return!1;if(n.daysOfWeekDisabled&&"d"===i&&-1!==n.daysOfWeekDisabled.indexOf(e.day()))return!1;if(n.disabledHours&&("h"===i||"m"===i||"s"===i)&&function(t){return!0===n.disabledHours[t.format("H")]}(e))return!1;if(n.enabledHours&&("h"===i||"m"===i||"s"===i)&&!function(t){return!0===n.enabledHours[t.format("H")]}(e))return!1;if(n.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var s=!1;if(t.each(n.disabledTimeIntervals,function(){if(e.isBetween(this[0],this[1]))return s=!0,!1}),s)return!1}return!0},A=function(){var i,r,a,l=f.find(".datepicker-days"),h=l.find("th"),c=[],d=[];if(M()){for(h.eq(0).find("span").attr("title",n.tooltips.prevMonth),h.eq(1).attr("title",n.tooltips.selectMonth),h.eq(2).find("span").attr("title",n.tooltips.nextMonth),l.find(".disabled").removeClass("disabled"),h.eq(1).text(o.format(n.dayViewHeaderFormat)),I(o.clone().subtract(1,"M"),"M")||h.eq(0).addClass("disabled"),I(o.clone().add(1,"M"),"M")||h.eq(2).addClass("disabled"),i=o.clone().startOf("M").startOf("w").startOf("d"),a=0;a<42;a++)0===i.weekday()&&(r=t("<tr>"),n.calendarWeeks&&r.append('<td class="cw">'+i.week()+"</td>"),c.push(r)),d=["day"],i.isBefore(o,"M")&&d.push("old"),i.isAfter(o,"M")&&d.push("new"),i.isSame(s,"d")&&!p&&d.push("active"),I(i,"d")||d.push("disabled"),i.isSame(k(),"d")&&d.push("today"),0!==i.day()&&6!==i.day()||d.push("weekend"),B({type:"dp.classify",date:i,classNames:d}),r.append('<td data-action="selectDay" data-day="'+i.format("L")+'" class="'+d.join(" ")+'">'+i.date()+"</td>"),i.add(1,"d");l.find("tbody").empty().append(c),function(){var e=f.find(".datepicker-months"),i=e.find("th"),r=e.find("tbody").find("span");i.eq(0).find("span").attr("title",n.tooltips.prevYear),i.eq(1).attr("title",n.tooltips.selectYear),i.eq(2).find("span").attr("title",n.tooltips.nextYear),e.find(".disabled").removeClass("disabled"),I(o.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(o.year()),I(o.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),r.removeClass("active"),s.isSame(o,"y")&&!p&&r.eq(s.month()).addClass("active"),r.each(function(e){I(o.clone().month(e),"M")||t(this).addClass("disabled")})}(),function(){var t=f.find(".datepicker-years"),e=t.find("th"),i=o.clone().subtract(5,"y"),r=o.clone().add(6,"y"),a="";for(e.eq(0).find("span").attr("title",n.tooltips.prevDecade),e.eq(1).attr("title",n.tooltips.selectDecade),e.eq(2).find("span").attr("title",n.tooltips.nextDecade),t.find(".disabled").removeClass("disabled"),n.minDate&&n.minDate.isAfter(i,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(i.year()+"-"+r.year()),n.maxDate&&n.maxDate.isBefore(r,"y")&&e.eq(2).addClass("disabled");!i.isAfter(r,"y");)a+='<span data-action="selectYear" class="year'+(i.isSame(s,"y")&&!p?" active":"")+(I(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");t.find("td").html(a)}(),function(){var t,i=f.find(".datepicker-decades"),r=i.find("th"),a=e({y:o.year()-o.year()%100-1}),l=a.clone().add(100,"y"),h=a.clone(),c=!1,d=!1,p="";for(r.eq(0).find("span").attr("title",n.tooltips.prevCentury),r.eq(2).find("span").attr("title",n.tooltips.nextCentury),i.find(".disabled").removeClass("disabled"),(a.isSame(e({y:1900}))||n.minDate&&n.minDate.isAfter(a,"y"))&&r.eq(0).addClass("disabled"),r.eq(1).text(a.year()+"-"+l.year()),(a.isSame(e({y:2e3}))||n.maxDate&&n.maxDate.isBefore(l,"y"))&&r.eq(2).addClass("disabled");!a.isAfter(l,"y");)t=a.year()+12,c=n.minDate&&n.minDate.isAfter(a,"y")&&n.minDate.year()<=t,d=n.maxDate&&n.maxDate.isAfter(a,"y")&&n.maxDate.year()<=t,p+='<span data-action="selectDecade" class="decade'+(s.isAfter(a)&&s.year()<=t?" active":"")+(I(a,"y")||c||d?"":" disabled")+'" data-selection="'+(a.year()+6)+'">'+(a.year()+1)+" - "+(a.year()+12)+"</span>",a.add(12,"y");p+="<span></span><span></span><span></span>",i.find("td").html(p),r.eq(1).text(h.year()+1+"-"+a.year())}()}},L=function(){var e,i,r=f.find(".timepicker span[data-time-component]");a||(e=f.find(".timepicker [data-action=togglePeriod]"),i=s.clone().add(s.hours()>=12?-12:12,"h"),e.text(s.format("A")),I(i,"h")?e.removeClass("disabled"):e.addClass("disabled")),r.filter("[data-time-component=hours]").text(s.format(a?"HH":"hh")),r.filter("[data-time-component=minutes]").text(s.format("mm")),r.filter("[data-time-component=seconds]").text(s.format("ss")),function(){var e=f.find(".timepicker-hours table"),i=o.clone().startOf("d"),n=[],s=t("<tr>");for(o.hour()>11&&!a&&i.hour(12);i.isSame(o,"d")&&(a||o.hour()<12&&i.hour()<12||o.hour()>11);)i.hour()%4==0&&(s=t("<tr>"),n.push(s)),s.append('<td data-action="selectHour" class="hour'+(I(i,"h")?"":" disabled")+'">'+i.format(a?"HH":"hh")+"</td>"),i.add(1,"h");e.empty().append(n)}(),function(){for(var e=f.find(".timepicker-minutes table"),i=o.clone().startOf("h"),s=[],r=t("<tr>"),a=1===n.stepping?5:n.stepping;o.isSame(i,"h");)i.minute()%(4*a)==0&&(r=t("<tr>"),s.push(r)),r.append('<td data-action="selectMinute" class="minute'+(I(i,"m")?"":" disabled")+'">'+i.format("mm")+"</td>"),i.add(a,"m");e.empty().append(s)}(),function(){for(var e=f.find(".timepicker-seconds table"),i=o.clone().startOf("m"),n=[],s=t("<tr>");o.isSame(i,"m");)i.second()%20==0&&(s=t("<tr>"),n.push(s)),s.append('<td data-action="selectSecond" class="second'+(I(i,"s")?"":" disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");e.empty().append(n)}()},H=function(){f&&(A(),L())},z=function(t){var e=p?null:s;if(!t)return p=!0,r.val(""),i.data("date",""),B({type:"dp.change",date:!1,oldDate:e}),void H();if(t=t.clone().locale(n.locale),C()&&t.tz(n.timeZone),1!==n.stepping)for(t.minutes(Math.round(t.minutes()/n.stepping)*n.stepping).seconds(0);n.minDate&&t.isBefore(n.minDate);)t.add(n.stepping,"minutes");I(t)?(s=t,o=s.clone(),r.val(s.format(l)),i.data("date",s.format(l)),p=!1,H(),B({type:"dp.change",date:s.clone(),oldDate:e})):(n.keepInvalid?B({type:"dp.change",date:t,oldDate:e}):r.val(p?"":s.format(l)),B({type:"dp.error",date:t,oldDate:e}))},N=function(){var e=!1;return f?(f.find(".collapse").each(function(){var i=t(this).data("collapse");return!i||!i.transitioning||(e=!0,!1)}),e?d:(u&&u.hasClass("btn")&&u.toggleClass("active"),f.hide(),t(window).off("resize",P),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,B({type:"dp.hide",date:s.clone()}),r.blur(),o=s.clone(),d)):d},R=function(){z(null)},W=function(t){return void 0===n.parseInputDate?(!e.isMoment(t)||t instanceof Date)&&(t=k(t)):t=n.parseInputDate(t),t},j={next:function(){var t=m[c].navFnc;o.add(m[c].navStep,t),A(),E(t)},previous:function(){var t=m[c].navFnc;o.subtract(m[c].navStep,t),A(),E(t)},pickerSwitch:function(){$(1)},selectMonth:function(e){var i=t(e.target).closest("tbody").find("span").index(t(e.target));o.month(i),c===g?(z(s.clone().year(o.year()).month(o.month())),n.inline||N()):($(-1),A()),E("M")},selectYear:function(e){var i=parseInt(t(e.target).text(),10)||0;o.year(i),c===g?(z(s.clone().year(o.year())),n.inline||N()):($(-1),A()),E("YYYY")},selectDecade:function(e){var i=parseInt(t(e.target).data("selection"),10)||0;o.year(i),c===g?(z(s.clone().year(o.year())),n.inline||N()):($(-1),A()),E("YYYY")},selectDay:function(e){var i=o.clone();t(e.target).is(".old")&&i.subtract(1,"M"),t(e.target).is(".new")&&i.add(1,"M"),z(i.date(parseInt(t(e.target).text(),10))),D()||n.keepOpen||n.inline||N()},incrementHours:function(){var t=s.clone().add(1,"h");I(t,"h")&&z(t)},incrementMinutes:function(){var t=s.clone().add(n.stepping,"m");I(t,"m")&&z(t)},incrementSeconds:function(){var t=s.clone().add(1,"s");I(t,"s")&&z(t)},decrementHours:function(){var t=s.clone().subtract(1,"h");I(t,"h")&&z(t)},decrementMinutes:function(){var t=s.clone().subtract(n.stepping,"m");I(t,"m")&&z(t)},decrementSeconds:function(){var t=s.clone().subtract(1,"s");I(t,"s")&&z(t)},togglePeriod:function(){z(s.clone().add(s.hours()>=12?-12:12,"h"))},togglePicker:function(e){var i,s=t(e.target),o=s.closest("ul"),r=o.find(".in"),a=o.find(".collapse:not(.in)");if(r&&r.length){if((i=r.data("collapse"))&&i.transitioning)return;r.collapse?(r.collapse("hide"),a.collapse("show")):(r.removeClass("in"),a.addClass("in")),s.is("span")?s.toggleClass(n.icons.time+" "+n.icons.date):s.find("span").toggleClass(n.icons.time+" "+n.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var i=parseInt(t(e.target).text(),10);a||(s.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),z(s.clone().hours(i)),j.showPicker.call(d)},selectMinute:function(e){z(s.clone().minutes(parseInt(t(e.target).text(),10))),j.showPicker.call(d)},selectSecond:function(e){z(s.clone().seconds(parseInt(t(e.target).text(),10))),j.showPicker.call(d)},clear:R,today:function(){var t=k();I(t,"d")&&z(t)},close:N},F=function(e){return!t(e.currentTarget).is(".disabled")&&(j[t(e.currentTarget).data("action")].apply(d,arguments),!1)},Y=function(){var e;return r.prop("disabled")||!n.ignoreReadonly&&r.prop("readonly")||f?d:(void 0!==r.val()&&0!==r.val().trim().length?z(W(r.val().trim())):p&&n.useCurrent&&(n.inline||r.is("input")&&0===r.val().trim().length)&&(e=k(),"string"==typeof n.useCurrent&&(e={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}}[n.useCurrent](e)),z(e)),f=O(),function(){var e=t("<tr>"),i=o.clone().startOf("w").startOf("d");for(!0===n.calendarWeeks&&e.append(t("<th>").addClass("cw").text("#"));i.isBefore(o.clone().endOf("w"));)e.append(t("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");f.find(".datepicker-days thead").append(e)}(),function(){for(var e=[],i=o.clone().startOf("y").startOf("d");i.isSame(o,"y");)e.push(t("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");f.find(".datepicker-months td").empty().append(e)}(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),H(),$(),t(window).on("resize",P),f.on("click","[data-action]",F),f.on("mousedown",!1),u&&u.hasClass("btn")&&u.toggleClass("active"),P(),f.show(),n.focusOnShow&&!r.is(":focus")&&r.focus(),B({type:"dp.show"}),d)},U=function(){return f?N():Y()},q=function(t){var e,i,s,o,r=null,a=[],l={},h=t.which;x[h]="p";for(e in x)x.hasOwnProperty(e)&&"p"===x[e]&&(a.push(e),parseInt(e,10)!==h&&(l[e]=!0));for(e in n.keyBinds)if(n.keyBinds.hasOwnProperty(e)&&"function"==typeof n.keyBinds[e]&&(s=e.split(" ")).length===a.length&&w[h]===s[s.length-1]){for(o=!0,i=s.length-2;i>=0;i--)if(!(w[s[i]]in l)){o=!1;break}if(o){r=n.keyBinds[e];break}}r&&(r.call(d,f),t.stopPropagation(),t.preventDefault())},V=function(t){x[t.which]="r",t.stopPropagation(),t.preventDefault()},G=function(e){var i=t(e.target).val().trim(),n=i?W(i):null;return z(n),e.stopImmediatePropagation(),!1},X=function(e){var i={};return t.each(e,function(){var t=W(this);t.isValid()&&(i[t.format("YYYY-MM-DD")]=!0)}),!!Object.keys(i).length&&i},Z=function(e){var i={};return t.each(e,function(){i[this]=!0}),!!Object.keys(i).length&&i},K=function(){var t=n.format||"L LT";l=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return(s.localeData().longDateFormat(t)||t).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return s.localeData().longDateFormat(t)||t})}),(h=n.extraFormats?n.extraFormats.slice():[]).indexOf(t)<0&&h.indexOf(l)<0&&h.push(l),a=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,S("y")&&(g=2),S("M")&&(g=1),S("d")&&(g=0),c=Math.max(g,c),p||z(s)};if(d.destroy=function(){N(),r.off({change:G,blur:blur,keydown:q,keyup:V,focus:n.allowInputToggle?N:""}),i.is("input")?r.off({focus:Y}):u&&(u.off("click",U),u.off("mousedown",!1)),i.removeData("DateTimePicker"),i.removeData("date")},d.toggle=U,d.show=Y,d.hide=N,d.disable=function(){return N(),u&&u.hasClass("btn")&&u.addClass("disabled"),r.prop("disabled",!0),d},d.enable=function(){return u&&u.hasClass("btn")&&u.removeClass("disabled"),r.prop("disabled",!1),d},d.ignoreReadonly=function(t){if(0===arguments.length)return n.ignoreReadonly;if("boolean"!=typeof t)throw new TypeError("ignoreReadonly () expects a boolean parameter");return n.ignoreReadonly=t,d},d.options=function(e){if(0===arguments.length)return t.extend(!0,{},n);if(!(e instanceof Object))throw new TypeError("options() options parameter should be an object");return t.extend(!0,n,e),t.each(n,function(t,e){if(void 0===d[t])throw new TypeError("option "+t+" is not recognized!");d[t](e)}),d},d.date=function(t){if(0===arguments.length)return p?null:s.clone();if(!(null===t||"string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return z(null===t?null:W(t)),d},d.format=function(t){if(0===arguments.length)return n.format;if("string"!=typeof t&&("boolean"!=typeof t||!1!==t))throw new TypeError("format() expects a string or boolean:false parameter "+t);return n.format=t,l&&K(),d},d.timeZone=function(t){if(0===arguments.length)return n.timeZone;if("string"!=typeof t)throw new TypeError("newZone() expects a string parameter");return n.timeZone=t,d},d.dayViewHeaderFormat=function(t){if(0===arguments.length)return n.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return n.dayViewHeaderFormat=t,d},d.extraFormats=function(t){if(0===arguments.length)return n.extraFormats;if(!1!==t&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return n.extraFormats=t,h&&K(),d},d.disabledDates=function(e){if(0===arguments.length)return n.disabledDates?t.extend({},n.disabledDates):n.disabledDates;if(!e)return n.disabledDates=!1,H(),d;if(!(e instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return n.disabledDates=X(e),n.enabledDates=!1,H(),d},d.enabledDates=function(e){if(0===arguments.length)return n.enabledDates?t.extend({},n.enabledDates):n.enabledDates;if(!e)return n.enabledDates=!1,H(),d;if(!(e instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return n.enabledDates=X(e),n.disabledDates=!1,H(),d},d.daysOfWeekDisabled=function(t){if(0===arguments.length)return n.daysOfWeekDisabled.splice(0);if("boolean"==typeof t&&!t)return n.daysOfWeekDisabled=!1,H(),d;if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(n.daysOfWeekDisabled=t.reduce(function(t,e){return(e=parseInt(e,10))>6||e<0||isNaN(e)?t:(-1===t.indexOf(e)&&t.push(e),t)},[]).sort(),n.useCurrent&&!n.keepInvalid){for(var e=0;!I(s,"d");){if(s.add(1,"d"),31===e)throw"Tried 31 times to find a valid date";e++}z(s)}return H(),d},d.maxDate=function(t){if(0===arguments.length)return n.maxDate?n.maxDate.clone():n.maxDate;if("boolean"==typeof t&&!1===t)return n.maxDate=!1,H(),d;"string"==typeof t&&("now"!==t&&"moment"!==t||(t=k()));var e=W(t);if(!e.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(n.minDate&&e.isBefore(n.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(l));return n.maxDate=e,n.useCurrent&&!n.keepInvalid&&s.isAfter(t)&&z(n.maxDate),o.isAfter(e)&&(o=e.clone().subtract(n.stepping,"m")),H(),d},d.minDate=function(t){if(0===arguments.length)return n.minDate?n.minDate.clone():n.minDate;if("boolean"==typeof t&&!1===t)return n.minDate=!1,H(),d;"string"==typeof t&&("now"!==t&&"moment"!==t||(t=k()));var e=W(t);if(!e.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(n.maxDate&&e.isAfter(n.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(l));return n.minDate=e,n.useCurrent&&!n.keepInvalid&&s.isBefore(t)&&z(n.minDate),o.isBefore(e)&&(o=e.clone().add(n.stepping,"m")),H(),d},d.defaultDate=function(t){if(0===arguments.length)return n.defaultDate?n.defaultDate.clone():n.defaultDate;if(!t)return n.defaultDate=!1,d;"string"==typeof t&&(t="now"===t||"moment"===t?k():k(t));var e=W(t);if(!e.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!I(e))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return n.defaultDate=e,(n.defaultDate&&n.inline||""===r.val().trim())&&z(n.defaultDate),d},d.locale=function(t){if(0===arguments.length)return n.locale;if(!e.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return n.locale=t,s.locale(n.locale),o.locale(n.locale),l&&K(),f&&(N(),Y()),d},d.stepping=function(t){return 0===arguments.length?n.stepping:(t=parseInt(t,10),(isNaN(t)||t<1)&&(t=1),n.stepping=t,d)},d.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return n.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&-1===e.indexOf(t.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return n.useCurrent=t,d},d.collapse=function(t){if(0===arguments.length)return n.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return n.collapse===t?d:(n.collapse=t,f&&(N(),Y()),d)},d.icons=function(e){if(0===arguments.length)return t.extend({},n.icons);if(!(e instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return t.extend(n.icons,e),f&&(N(),Y()),d},d.tooltips=function(e){if(0===arguments.length)return t.extend({},n.tooltips);if(!(e instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return t.extend(n.tooltips,e),f&&(N(),Y()),d},d.useStrict=function(t){if(0===arguments.length)return n.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return n.useStrict=t,d},d.sideBySide=function(t){if(0===arguments.length)return n.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return n.sideBySide=t,f&&(N(),Y()),d},d.viewMode=function(t){if(0===arguments.length)return n.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(t))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return n.viewMode=t,c=Math.max(v.indexOf(t),g),$(),d},d.toolbarPlacement=function(t){if(0===arguments.length)return n.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===_.indexOf(t))throw new TypeError("toolbarPlacement() parameter must be one of ("+_.join(", ")+") value");return n.toolbarPlacement=t,f&&(N(),Y()),d},d.widgetPositioning=function(e){if(0===arguments.length)return t.extend({},n.widgetPositioning);if("[object Object]"!=={}.toString.call(e))throw new TypeError("widgetPositioning() expects an object variable");if(e.horizontal){if("string"!=typeof e.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(e.horizontal=e.horizontal.toLowerCase(),-1===b.indexOf(e.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")");n.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if("string"!=typeof e.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(e.vertical=e.vertical.toLowerCase(),-1===y.indexOf(e.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");n.widgetPositioning.vertical=e.vertical}return H(),d},d.calendarWeeks=function(t){if(0===arguments.length)return n.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return n.calendarWeeks=t,H(),d},d.showTodayButton=function(t){if(0===arguments.length)return n.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return n.showTodayButton=t,f&&(N(),Y()),d},d.showClear=function(t){if(0===arguments.length)return n.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return n.showClear=t,f&&(N(),Y()),d},d.widgetParent=function(e){if(0===arguments.length)return n.widgetParent;if("string"==typeof e&&(e=t(e)),null!==e&&"string"!=typeof e&&!(e instanceof t))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return n.widgetParent=e,f&&(N(),Y()),d},d.keepOpen=function(t){if(0===arguments.length)return n.keepOpen;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return n.keepOpen=t,d},d.focusOnShow=function(t){if(0===arguments.length)return n.focusOnShow;if("boolean"!=typeof t)throw new TypeError("focusOnShow() expects a boolean parameter");return n.focusOnShow=t,d},d.inline=function(t){if(0===arguments.length)return n.inline;if("boolean"!=typeof t)throw new TypeError("inline() expects a boolean parameter");return n.inline=t,d},d.clear=function(){return R(),d},d.keyBinds=function(t){return 0===arguments.length?n.keyBinds:(n.keyBinds=t,d)},d.getMoment=function(t){return k(t)},d.debug=function(t){if("boolean"!=typeof t)throw new TypeError("debug() expects a boolean parameter");return n.debug=t,d},d.allowInputToggle=function(t){if(0===arguments.length)return n.allowInputToggle;if("boolean"!=typeof t)throw new TypeError("allowInputToggle() expects a boolean parameter");return n.allowInputToggle=t,d},d.showClose=function(t){if(0===arguments.length)return n.showClose;if("boolean"!=typeof t)throw new TypeError("showClose() expects a boolean parameter");return n.showClose=t,d},d.keepInvalid=function(t){if(0===arguments.length)return n.keepInvalid;if("boolean"!=typeof t)throw new TypeError("keepInvalid() expects a boolean parameter");return n.keepInvalid=t,d},d.datepickerInput=function(t){if(0===arguments.length)return n.datepickerInput;if("string"!=typeof t)throw new TypeError("datepickerInput() expects a string parameter");return n.datepickerInput=t,d},d.parseInputDate=function(t){if(0===arguments.length)return n.parseInputDate;if("function"!=typeof t)throw new TypeError("parseInputDate() sholud be as function");return n.parseInputDate=t,d},d.disabledTimeIntervals=function(e){if(0===arguments.length)return n.disabledTimeIntervals?t.extend({},n.disabledTimeIntervals):n.disabledTimeIntervals;if(!e)return n.disabledTimeIntervals=!1,H(),d;if(!(e instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return n.disabledTimeIntervals=e,H(),d},d.disabledHours=function(e){if(0===arguments.length)return n.disabledHours?t.extend({},n.disabledHours):n.disabledHours;if(!e)return n.disabledHours=!1,H(),d;if(!(e instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(n.disabledHours=Z(e),n.enabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!I(s,"h");){if(s.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}z(s)}return H(),d},d.enabledHours=function(e){if(0===arguments.length)return n.enabledHours?t.extend({},n.enabledHours):n.enabledHours;if(!e)return n.enabledHours=!1,H(),d;if(!(e instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(n.enabledHours=Z(e),n.disabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!I(s,"h");){if(s.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}z(s)}return H(),d},d.viewDate=function(t){if(0===arguments.length)return o.clone();if(!t)return o=s.clone(),d;if(!("string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return o=W(t),E(),d},i.is("input"))r=i;else if(0===(r=i.find(n.datepickerInput)).length)r=i.find("input");else if(!r.is("input"))throw new Error('CSS class "'+n.datepickerInput+'" cannot be applied to non input element');if(i.hasClass("input-group")&&(u=0===i.find(".datepickerbutton").length?i.find(".input-group-addon"):i.find(".datepickerbutton")),!n.inline&&!r.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return s=k(),o=s.clone(),t.extend(!0,n,function(){var e,s={};return(e=i.is("input")||n.inline?i.data():i.find("input").data()).dateOptions&&e.dateOptions instanceof Object&&(s=t.extend(!0,s,e.dateOptions)),t.each(n,function(t){var i="date"+t.charAt(0).toUpperCase()+t.slice(1);void 0!==e[i]&&(s[t]=e[i])}),s}()),d.options(n),K(),r.on({change:G,blur:n.debug?"":N,keydown:q,keyup:V,focus:n.allowInputToggle?Y:""}),i.is("input")?r.on({focus:Y}):u&&(u.on("click",U),u.on("mousedown",!1)),r.prop("disabled")&&d.disable(),r.is("input")&&0!==r.val().trim().length?z(W(r.val().trim())):n.defaultDate&&void 0===r.attr("placeholder")&&z(n.defaultDate),n.inline&&Y(),d};return t.fn.datetimepicker=function(e){e=e||{};var n,s=Array.prototype.slice.call(arguments,1),o=!0;if("object"==typeof e)return this.each(function(){var n,s=t(this);s.data("DateTimePicker")||(n=t.extend(!0,{},t.fn.datetimepicker.defaults,e),s.data("DateTimePicker",i(s,n)))});if("string"==typeof e)return this.each(function(){var i=t(this).data("DateTimePicker");if(!i)throw new Error('bootstrap-datetimepicker("'+e+'") method was called on an element that is not using DateTimePicker');n=i[e].apply(i,s),o=n===i}),o||t.inArray(e,["destroy","hide","show","toggle"])>-1?this:n;throw new TypeError("Invalid arguments for DateTimePicker: "+e)},t.fn.datetimepicker.defaults={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:e.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(7,"d")):this.date(e.clone().add(this.stepping(),"m"))}},down:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().add(7,"d")):this.date(e.clone().subtract(this.stepping(),"m"))}else this.show()},"control up":function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(1,"y")):this.date(e.clone().add(1,"h"))}},"control down":function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().add(1,"y")):this.date(e.clone().subtract(1,"h"))}},left:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"d"))}},right:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"d"))}},pageUp:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"M"))}},pageDown:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){t&&t.find(".timepicker").is(":visible")&&t.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},t.fn.datetimepicker});var BB=BB||{};if(BB.base=function(){this.__BB_DEBUG__=!1,this.__PROTECTED__=[],this._data=void 0},BB.base.prototype.set_data=function(t){return void 0===this._data&&(this._data=new BB.data),"object"!=typeof t?this:(this._data.set_data(t),this)},BB.base.prototype.remove_data=function(t){return this._data.remove_data(t),this},BB.base.prototype.get_data=function(t){var e=this.data();return void 0!==e[t]&&e[t]},BB.base.prototype.data=function(t){return this._data.get_data(t)},BB.base.prototype.sanitize=function(){var t=this.data();return t=this._escape_data(t),this.set_data(t),this},BB.base.prototype._escape_data=function(t){if(void 0===t)return"";if("object"==typeof t&&t.length)for(var e=0,i=t.length;e<i;e++)t[e]=this._escape_data(t[e]);if("object"==typeof t)for(var n in t)t[n]=this._escape_data(t[n]);return"string"==typeof t?escape(t):t},BB.base.prototype._unescape_data=function(t){if(void 0===t)return"";if("object"==typeof t)for(var e in t)t[e]=this._unescape_data(t[e]);return"string"==typeof t?unescape(t):t},BB.base.prototype.ident=function(){var t=this.data();return"string"!=typeof t.ident?(this.error("Ident is not a String which is odd. "+t.ident),""):t.ident},BB.base.prototype.set_ident=function(t){return"string"!=typeof t&&(t=""+t,this.error("Ident must be a string. Automatically converted to : "+t)),this.set_data({ident:t}),this},BB.base.prototype.error=function(t){if(this.__BB_DEBUG__)throw Error(t);return this},BB.base.prototype.is_empty_object=function(t){if("object"!=typeof t)return this.error("Invalid argument, Object expected at BB.base.is_empty_object()"),!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},BB.base.prototype.extend=function(t,e){var i,n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},(BB=BB||{}).data=function(t){if(this.__PROTECTED__=[],this.__HIDDEN_DATA__=!0,this.__HIDDEN_DATA__){var e=t||{};return{set_data:function(t){for(var i in t)e[i]=t[i]},get_data:function(t){return t?void 0!==e[t]?e[t]:"":e},remove_data:function(t){t||(e={}),void 0!==e[t]&&(e[t]=void 0,delete e[t])}}}return this.__DATA=t||{},this.set_data=function(t){if(this.__DATA){if(t)for(var e in t)this.__DATA[e]=t[e]}else this.__DATA=t||{}},this.get_data=function(t){return t?void 0!==this.__DATA[t]?this.__DATA[t]:void 0:this.__DATA},this.remove_data=function(t){t||(this.__DATA={}),void 0!==this.__DATA[t]&&(this.__DATA[t]=void 0,delete this.__DATA[t])},this},(BB=BB||{}).gmap=BB.gmap||{},BB.gmap.controller=function(t,e){return this._MAP=void 0,this.__CONTAINER=t,this.__EDITABLE=!1,this.__PLACES={markers:{},polygons:{},lines:{}},this.__FOCUSED_ITEM=void 0,this.__CLUSTERER=void 0,this.xhrs=void 0,this.set_data(e),this},BB.gmap.controller.prototype=new BB.base,BB.gmap.controller.prototype.map=function(){return this._MAP?this._MAP:(this.error("No map associated to the current controller at BB.gmap.controller.map()"),!1)},BB.gmap.controller.prototype.loading_place=function(t){var e=this.get_place(t);return e?(e.set_data({loaded:!1}),this):this},BB.gmap.controller.prototype.place_loaded=function(t){return t?!t.data("loaded")&&(t.set_data({loaded:!0}),this.check_loaded_places()&&this.data("tiles_loaded")&&this._ready(),this):this},BB.gmap.controller.prototype.check_loaded_places=function(){var t=!0;return this._loop_all(function(e){t=!(!t||!e.data("loaded"))}),t},BB.gmap.controller.prototype.ready=function(t){return"function"==typeof t&&this.set_data({map_ready:t}),this},BB.gmap.controller.prototype._ready=function(){var t=this.data();return this.data("loaded")?this:("function"==typeof t.map_ready&&t.map_ready(this),this.set_data({loaded:!0}),this)},BB.gmap.controller.prototype.set_zoom=function(t){return this.map().setZoom(t),this},BB.gmap.controller.prototype.container=function(){return this.__CONTAINER},BB.gmap.controller.prototype.init=function(){var t=this.data();if(this.map())return this;var e=this.data("map");return e.center=new google.maps.LatLng(parseFloat(e.center.x),parseFloat(e.center.y)),this._MAP=new google.maps.Map(this.container(),e),"object"!=typeof t.places?this.error("You haven't set any places yet"):this.add_places(t.places),this.listeners(),this},BB.gmap.controller.prototype.set_styles=function(t){"object"!=typeof t&&this.error("Invalid type styles in BB.gmap.set_styles()"+t);var e=this.data("map");return e.styles=t,this.data("map",e),this.map()&&this.map().setOptions({styles:t}),this},BB.gmap.controller.prototype.add_by_url=function(t,e,i){i={id:"id",type:"type",coords:"coords",raw:"raw.mLatitude",date:"raw.mDate"};var n=function(t,e){var i,n,s,o;for(n=(i=e.split(".")).length,s=0,o=t;s<n;s++){if(void 0===o[i[s]])return t;o=o[i[s]]}return o},s=function(t,e){var s={};for(var o in i)s[o]=n(t,i[o]);return s},o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);"string"==typeof e&&""!=e&&(t=n(t,e)),t.hasOwnProperty("map")&&(t=t.map(s))}},o.open("GET",t,!0),o.setRequestHeader("Content-type","application/json; charset=utf-8"),o.send()},BB.gmap.controller.prototype.add_places=function(t){if(!t)return this.error("Invalid places specified :"+t),this;for(var e in t)this.add_place(e,t[e]);return this},BB.gmap.controller.prototype.set_place=function(t,e,i){return e&&i?void 0===this.__PLACES[t]?(this.error("Invalid data type at BB.gmap.controlle.set_place( "+t+", "+e+", "+i+")"),this):(void 0===this.__PLACES[t][e]&&(this.__PLACES[t][e]={}),i.set_ident(e),this.__PLACES[t][e]=i,this):(this.error("Missing parameters in BB.gmap.controller.set_place( "+t+", "+e+", "+i+")"),this)},BB.gmap.controller.prototype.add_place=function(t,e){if(!e)return this.error("Missing parameter BB.gmap.controller.prototype.add_place ( ident, data ) : ( "+t+", "+e+" )"),this;if("string"!=typeof e.type)return this.error('Missing parameter "type" in BB.gmap.controller.prototype.add_place'),this;switch(e.ident=t,e.type){case"marker":i=new BB.gmap.marker(e,this),this.set_place("markers",t,i);break;case"richmarker":var i=new BB.gmap.richmarker(e,this);this.set_place("markers",t,i);break;case"line":this.set_place("lines",t,new BB.gmap.line(e,this));break;case"polygon":this.set_place("polygons",t,new BB.gmap.polygon(e,this))}return this},BB.gmap.controller.prototype.get_places=function(){return this.__PLACES},BB.gmap.controller.prototype.get_places_by_type=function(t){return this.__PLACES[t]},BB.gmap.controller.prototype.add_place_by_address=function(t,e,i){var n=this;this.geocode_address(e,function(e){i.coords=e,n.add_place(t,i)})},BB.gmap.controller.prototype.geocode_address=function(t,e){var i=Array();if("undefined"==typeof google)return error;(new google.maps.Geocoder).geocode({address:t},function(t,n){if(n==google.maps.GeocoderStatus.OK){var s=t[0].geometry.location.lat(),o=t[0].geometry.location.lng();"function"==typeof e&&e([s,o])}return i})},BB.gmap.controller.prototype.get_place=function(t){var e=this.get_places(),i=!1;for(var n in e){var s=this.get_places_by_type(n);this.is_empty_object(s)||(i="object"==typeof s[t]?s[t]:i)}return i||(this.error("Invalid ident at BB.gmap.controller.get_place( ident ) : "+t),!1)},BB.gmap.controller.prototype.remove_focus=function(){var t=this.focused();return t&&("function"==typeof this.data("onblur")&&this.data("onblur")(t,this),t.blur(),this.__FOCUSED_ITEM=void 0),this},BB.gmap.controller.prototype.set_focus=function(t){return this.remove_focus(),this.__FOCUSED_ITEM=t,"function"==typeof this.data("onfocus")&&this.data("onfocus")(t,this),this},BB.gmap.controller.prototype.focused=function(){return this.__FOCUSED_ITEM},BB.gmap.controller.prototype.translate_coords=function(t){if("object"==typeof t&&2==t.length)return new google.maps.LatLng(t[0],t[1])},BB.gmap.controller.prototype.listeners=function(){var t=this;return google.maps.event.clearListeners(this.map(),"click"),google.maps.event.addListener(this.map(),"click",function(e){t.map_click(e)}),google.maps.event.addListenerOnce(this.map(),"tilesloaded",function(e){t.set_data({tiles_loaded:!0}),t.check_loaded_places()&&t._ready()}),google.maps.event.addDomListener(document,"keyup",function(e){switch(e.keyCode?e.keyCode:e.which){case 46:t.focused()&&t.focused().data("editable")&&(t.focused().delete(),t.remove_focus());break;case 27:t.focused()&&t.remove_focus()}}),this},BB.gmap.controller.prototype.create_new=function(t,e){e||(e="new_object");var i=this.data("default_styles");switch(i||(i={strokeColor:"#000000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FFFFFF",fillOpacity:.35,hover:{strokeColor:"#000000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FFFFFF",fillOpacity:1},focused:{fillOpacity:1}}),t){case"polygon":var n={type:"polygon",editable:!0,styles:i},s=new BB.gmap.polygon(n,this);this.set_place("polygons",e,s),this.set_focus(s);break;case"line":n={type:"line",editable:!0,styles:i};var o=new BB.gmap.line(n,this);this.set_place("lines",e,o),this.set_focus(o);break;default:this.set_data({marker_creation:e})}},BB.gmap.controller.prototype.on=function(t,e){var i={};i["on"+t]=e,this.set_data(i)},BB.gmap.controller.prototype.map_click=function(t){this.data("marker_creation")&&(this.add_place(this.data("marker_creation"),{coords:[t.latLng.lat(),t.latLng.lng()],draggable:!0,editable:!0,type:"marker"}),this.set_focus(this.get_place(this.data("marker_creation"))),"function"==typeof this.data("marker_creation_callback")&&this.data("marker_creation_callback")(this.get_place(this.data("marker_creation"))),this.set_data({marker_creation:!1}));var e=this.focused();return e?(e.data("editable")?e.map_click(t):this.remove_focus(),this):this},BB.gmap.controller.prototype._loop_all=function(t){if("function"!=typeof t)return this;var e=this.get_places();for(var i in e){var n=this.get_places_by_type(i);if(!this.is_empty_object(n))for(var s in n)t(n[s])}return this},BB.gmap.controller.prototype.filter=function(t){this._loop_all(function(e){if(!t)return e.show(),!1;var i=e.data("categories");if(!i)return e.hide(),!1;"string"==typeof i&&(i=i.split(",")),i||e.hide();var n=!1;for(var s in i)t==i[s]&&(n=!0);n?e.show():e.hide()})},BB.gmap.controller.prototype.fit_bounds=function(){var t=new google.maps.LatLngBounds,e=0;if(this._loop_all(function(i){var n=i.get_position();if(!n)return!1;var s;if(n instanceof google.maps.LatLng)t.extend(n);else for(var o=0;o<n.getLength();o++){s=n.getAt(o);for(var r=0;r<s.getLength();r++)t.extend(s.getAt(r))}e++}),e>0&&(this.map().fitBounds(t),this.data("max_fitbounds_zoom"))){var i=this.data("max_fitbounds_zoom");this.map().getZoom()>i&&this.map().setZoom(i)}return this},BB.gmap.controller.prototype.get_all_markers=function(){var t=this.get_places_by_type("markers"),e=[];for(var i in t)e.push(t[i].object());return e},BB.gmap.controller.prototype.activate_clusterer=function(t){this.clusterer()&&this.clusterer().clearMarkers();var e=this.get_all_markers(),i=this.data("clusterer_options")||{};return this.set_clusterer(new MarkerClusterer(this.map(),e,i)),this},BB.gmap.controller.prototype.set_clusterer=function(t){this.__CLUSTERER=t},BB.gmap.controller.prototype.clusterer=function(){return this.__CLUSTERER},BB.gmap.controller.prototype._delete=function(t,e){switch(t){case"marker":if(void 0===this.__PLACES.markers[e])return!1;delete this.__PLACES.markers[e];break;case"line":if(void 0===this.__PLACES.lines[e])return!1;delete this.__PLACES.lines[e];break;case"polygon":if(void 0===this.__PLACES.polygons[e])return!1;delete this.__PLACES.polygons[e]}},BB.gmap.controller.prototype.export=function(){var t=this.data();void 0!==t.places&&delete t.places,void 0!==t.center&&delete t.center;var e=this.map().getCenter();return t.map.center.x=e.lat(),t.map.center.y=e.lng(),t.map.zoom=this.map().getZoom(),t.places={},this._loop_all(function(e){t.places[e.ident()]=e.export()}),t},BB.gmap.controller.prototype.get_map_image=function(){var t=this.data();void 0!==t.places&&delete t.places,void 0!==t.center&&delete t.center;var e=this.map().getCenter(),i="https://maps.googleapis.com/maps/api/staticmap?",n=[];return n.push("center="+e.lat()+","+e.lng()),n.push("zoom="+this.map().getZoom()),n.push("size=640x400"),this._loop_all(function(t){if("marker"==t.data("type")){if(!t.data("icon").src)return!1;var e=new Image;e.src=t.data("icon").src;var i=t.data("icon").width+"x"+t.data("icon").height,s=t.data("coords"),o="markers=size:"+i+"|icon:"+e.src+"|"+s[0]+","+s[1];n.push(o)}if("polygon"==t.data("type")){var r=t.data("paths");if(!r)return!1;var a=[],l=t.data("styles"),h=(l.strokeColor,l.strokeWeight);l.fillColor,a.push("color:black"),a.push("weight:"+h),a.push("fillcolor:white");for(var c=0,d=r.length;c<d;c++)a.push(r[c].join(","));a.push(r[0].join(",")),n.push("path="+a.join("|"))}}),i+=n.join("&")},BB.gmap.controller.prototype.reset=function(){return this._loop_all(function(t){t.hide(),t.delete()}),this.set_data({places:void 0}),this.remove_focus(),this},(BB=BB||{}).gmap=BB.gmap||{},BB.gmap.statics=BB.gmap.statics||{},BB.gmap.infobox=function(t,e,i){BB.gmap.statics,this.__MAP=void 0,this.__MARKER=i,this.infoboxContent=t,this.__ELEM=void 0,google.maps.OverlayView.call(this),e.offsetY=e.offsetY||0,e.offsetX=e.offsetX||0,e.multiple=e.multiple||!1,this.opts=e,void 0===this.opts.placement&&(this.opts.placement="top center"),this.__MAP=e.map;var n=this;this._bounds_changed_listener=google.maps.event.addListener(this.__MAP,"bounds_changed",function(){return n.panMap.apply(n)}),this.opts.multiple||(this._infobox_open_listener=google.maps.event.addListener(this.__MAP,"infobox_opened",function(t){t.elem!=n&&n.setMap(null)})),this.set_map(e.map)},(BB=BB||{}).gmap=BB.gmap||{},BB.gmap.object=function(t,e){return this.__OBJECT=void 0,this.__CONTROLLER=e,this.__DELETED=!1,this.set_data(t),this.init(),this.controller().loading_place(this.ident()),this},BB.gmap.object.prototype=new BB.base,BB.gmap.object.prototype.set_object=function(t){return this.__OBJECT=t,this},BB.gmap.object.prototype.object=function(){return this.__OBJECT},BB.gmap.object.prototype.controller=function(){return this.__CONTROLLER},BB.gmap.object.prototype.set_controller=function(t){return this.__CONTROLLER=t,this},BB.gmap.object.prototype.set_map=function(t){return this.object().setMap(t),this},BB.gmap.object.prototype.map_click=function(t){return this},BB.gmap.object.prototype.show=function(){var t=this.object();return void 0===t?(this.error("No object defined at BB.gmap.object.show()"),this):(t.setMap(this.controller().map()),this)},BB.gmap.object.prototype.hide=function(){var t=this.object();return void 0===t?(this.error("No object defined at BB.gmap.object.hide()"),this):(t.setMap(null),this)},BB.gmap.object.prototype.delete=function(){this.__DELETED=!0;var t=this.object();if(void 0===t)return this.error("No object defined at BB.gmap.object.delete()"),this;this.clear_listeners(),t.setMap(null);var e=this.data();return"function"==typeof e.ondelete&&e.ondelete(this),this.controller()._delete(this.data("type"),this.ident()),delete t,this},BB.gmap.object.prototype.init=function(){return this},BB.gmap.object.prototype.display=function(){return this},BB.gmap.object.prototype.focus=function(){return this},BB.gmap.object.prototype.blur=function(){return this},BB.gmap.object.prototype.get_bounds=function(){return this},BB.gmap.object.prototype.get_position=function(){return this},BB.gmap.object.prototype.clear_listeners=function(){return this},BB.gmap.object.prototype.export=function(){return this.data()},(BB=BB||{}).gmap=BB.gmap||{},BB.gmap.statics=BB.gmap.statics||{},BB.gmap.marker=function(t,e){return BB.gmap.object.call(this,t,e),this.__MEDIA=void 0,this.__ICON=void 0,this._image_loaded=!1,this._marker_loaded=!1,this.__INFOBOX=void 0,this._listeners=!1,this},BB.gmap.marker.prototype=Object.create(BB.gmap.object.prototype),BB.gmap.marker.prototype.init=function(){var t=this.data();return"string"==typeof t.icon?this.set_image(t.icon):"object"==typeof t.icon?this.set_icon(t.icon):this.display(),this},BB.gmap.marker.prototype.icon=function(){return this.__ICON?this.__ICON:new Image},BB.gmap.marker.prototype.set_icon=function(t){if("object"!=typeof t)return this.error("Invalid icon at BB.gmap.marker.prototype.set_icon( "+t+" )"),this;if(!(t instanceof Image)&&void 0===t.path){var e;return t.width&&t.height&&(e={width:t.width,height:t.height}),this.set_image(t.src,e),this}return this.__ICON=t,this.display(),this},BB.gmap.marker.prototype.set_image=function(t,e){var i=new Image;return i.data=this,i.onload=function(){this.data.set_icon(this)},i.onerror=function(){this.data.set_data({icon:void 0}),this.data.display()},i.src=t,e&&(i.height=e.height,i.width=e.width),this},BB.gmap.marker.prototype.display=function(){var t=this.data();if("object"!=typeof t.coords)return this.error("Requires coordinates [lat, lng] at BB.gmap.marker.display()"),!1;var e={map:this.controller().map(),position:new google.maps.LatLng(t.coords[0],t.coords[1])};e=this.extend(e,t);var i=this.icon();if(!(i instanceof Image)&&"string"==typeof i.path){var n=0,s=0;"string"==typeof i.height&&(n=parseInt(i.height)),"string"==typeof i.width&&(s=parseInt(i.width)),i.anchor=new google.maps.Point(s/2,n),e.icon=i}var o="object"==typeof t.options?t.options:{};for(var r in o)e[r]=o[r];if(this.icon().src){s=parseFloat(this.icon().width),n=parseFloat(this.icon().height);e.icon=new google.maps.MarkerImage(this.icon().src,new google.maps.Size(s,n),new google.maps.Point(0,0),new google.maps.Point(s/2,n),new google.maps.Size(s,n))}if(void 0!==this.object())this.object().setOptions(e);else{var a=new google.maps.Marker(e);this.set_marker(a)}return this._listeners||(this.listeners(),this._listeners=!0,this.marker_loaded()),this.data("hidden")&&this.hide(),this},BB.gmap.marker.prototype.marker_loaded=function(){var t=this.data();return"function"==typeof t.loaded_callback&&t.loaded_callback(this),this.controller().data("use_clusterer")&&(this.controller().data("clusterer_options"),this.controller().activate_clusterer({gridSize:10,maxZoom:15})),this.controller().place_loaded(this),this},BB.gmap.marker.prototype.set_marker=function(t){return this._marker_loaded?(this.error("There is already a marker affected to this instanciation of a [BB.gmap.marker] ( "+this.ident()+" )"),this):(this._marker_loaded=!0,this.set_object(t),this)},BB.gmap.marker.prototype.listeners=function(){var t=this.object();t.bbmarker=this,this.data("draggable")&&google.maps.event.addListener(t,"dragend",this.dragend),google.maps.event.addListener(t,"click",this.onclick)},BB.gmap.marker.prototype.clear_listeners=function(){var t=this.object();return google.maps.event.clearListeners(t,"dragend"),google.maps.event.clearListeners(t,"click"),this},BB.gmap.marker.prototype.dragend=function(t){var e=this.bbmarker,i=e.data();"function"==typeof i.ondragend&&i.ondragend(e,t),e.set_data({coords:[t.latLng.lat(),t.latLng.lng()]}),e.focus()},BB.gmap.marker.prototype.onclick=function(t){var e=this.bbmarker,i=e.data();if("function"==typeof i.onclick?i.onclick(t,e):"string"==typeof i.onclick&&"function"==typeof window[i.onclick]&&window[i.onclick](e,t),i.infobox){if(e.__INFOBOX)return e.__INFOBOX.map?e.__INFOBOX.set_map(null):(e.__INFOBOX.set_position(e.object().getPosition()),e.__INFOBOX.set_map(e.controller().map())),e.focus(),this;BB.gmap.statics.infobox_loaded||(init_infoBox(),BB.gmap.statics.infobox_loaded=!0);var n={};i.infobox_options&&(n=i.infobox_options),n.offsetY||(n.offsetY=e.icon().height),n.offsetX||(n.offsetX=e.icon().width/2),n.map=e.controller().map(),n.position=e.get_position(),e.__INFOBOX=new BB.gmap.infobox(i.infobox,n,e)}e.focus()},BB.gmap.marker.prototype.focus=function(){this.controller().set_focus(this);var t=this.data();t.icon_selected&&("object"==typeof t.icon_selected?this.set_icon(t.icon_selected):this.set_image(t.icon_selected))},BB.gmap.marker.prototype.blur=function(){if(!this.controller().get_place(this.ident()))return!1;var t=this.data();t.icon_selected&&("object"==typeof t.icon?this.set_icon(t.icon):this.set_image(t.icon))},BB.gmap.marker.prototype.get_bounds=function(){var t=new google.maps.LatLngBounds;return t.extend(this.object().getPosition()),t},BB.gmap.marker.prototype.get_position=function(){if(this.object())return this.object().getPosition()},BB.gmap.marker.prototype.set_position=function(t){if(!t)return this;if("string"==typeof t&&(t=t.split(",")),!(t instanceof google.maps.LatLng)){if(void 0===t[0]||void 0===t[1])return this;t=new google.maps.LatLng(t[0],t[1])}return this.object().setPosition(t),this.set_data({coords:[t.lat(),t.lng()]}),this.__INFOBOX&&this.__INFOBOX.set_position(t),this},(BB=BB||{}).gmap=BB.gmap||{},BB.gmap.statics=BB.gmap.statics||{},BB.gmap.richmarker=function(t,e){return BB.gmap.marker.call(this,t,e),this._listeners=!1,this},BB.gmap.richmarker.prototype=Object.create(BB.gmap.marker.prototype),BB.gmap.richmarker.prototype.init=function(){var t=this.data();return this.set_content(t.content),this.display(),this},BB.gmap.richmarker.prototype.set_content=function(t){return this._content=t,this},BB.gmap.richmarker.prototype.content=function(){return this._content},BB.gmap.richmarker.prototype.display=function(){var t=this.data();if("object"!=typeof t.coords)return this.error("Requires coordinates [lat, lng] at BB.gmap.richmarker.display()"),!1;var e={map:this.controller().map(),position:new google.maps.LatLng(t.coords[0],t.coords[1])};if("function"==typeof(e=this.extend(e,t)).html&&(e.html=e.html(t)),"function"==typeof e.selected_html&&(e.selected_html=e.selected_html(t)),void 0!==this.object())this.object().setOptions(e);else{var i=customMarker(e);this.set_marker(i)}return this._listeners||(this.listeners(),this._listeners=!0,this.controller().place_loaded(this)),this.data("hidden")&&this.hide(),this},BB.gmap.richmarker.prototype.listeners=function(){var t=this.object();t.bbmarker=this,this.data("draggable")&&google.maps.event.addListener(t,"dragend",this.dragend),google.maps.event.addListener(t,"click",this.onclick)},BB.gmap.richmarker.prototype.clear_listeners=function(){var t=this.object();return google.maps.event.clearListeners(t,"dragend"),google.maps.event.clearListeners(t,"click"),this},BB.gmap.richmarker.prototype.focus=function(){if(this.controller().focused()&&this.controller().focused().ident()==this.ident())return this;this.controller().set_focus(this),this.object().setHtml(this.data("selected_html"))},BB.gmap.richmarker.prototype.blur=function(){if(!this.controller().get_place(this.ident()))return!1;this.object().setHtml(this.data("html"))},BB.gmap.richmarker.prototype.icon=function(){return{height:this.object().div.offsetHeight,width:this.object().div.offsetWidth}},customMarker=function(t){return"function"!=typeof BB.gmap.customMarker&&(BB.gmap.customMarker=function(t){this.MAP=t.map,void 0!==t.map&&this.setMap(this.MAP),void 0!==t.position&&(this.latlng=t.position),void 0!==t.html&&(this.html=t.html)},BB.gmap.customMarker.prototype=new google.maps.OverlayView,BB.gmap.customMarker.prototype.draw=function(){this.setHtml(this.html)},BB.gmap.customMarker.prototype.setHtml=function(t){var e=this,i=this.div;i||((i=document.createElement("div")).style.position="absolute",i.style.cursor="pointer",google.maps.event.addDomListener(i,"click",function(t){t.stopPropagation(),t.preventDefault(),google.maps.event.trigger(e,"click")}),this.getPanes().overlayImage.appendChild(i)),i.innerHTML=this.html;var n=this.getProjection().fromLatLngToDivPixel(this.latlng);if(n){var s=i.offsetHeight,o=i.offsetWidth;i.style.left=n.x-o/2+"px",i.style.top=n.y-s+"px"}this.div=i},BB.gmap.customMarker.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},BB.gmap.customMarker.prototype.setPosition=function(t){this.latlng=t,this.draw()},BB.gmap.customMarker.prototype.getPosition=function(){return this.latlng}),new BB.gmap.customMarker(t)},(BB=BB||{}).gmap=BB.gmap||{},BB.gmap.line=function(t,e){return this.__STYLES=void 0,this.__PATHS=void 0,this.__MARKERS=[],BB.gmap.object.call(this,t,e),this},BB.gmap.line.prototype=Object.create(BB.gmap.object.prototype),BB.gmap.line.prototype.init=function(){var t=this.data();if("object"!=typeof t.styles&&this.set_data({styles:this.controller().data("default_styles")}),this.add_styles(t.styles),this.set_paths([]),"object"==typeof t.paths)for(var e=0,i=t.paths.length;e<i;e++)this.add_point(t.paths[e]);return this.get_paths()&&this.get_styles()&&this.display(),t.editable&&this.set_editable(t.editable),this.listeners(),this.controller().place_loaded(this),this},BB.gmap.line.prototype.redraw=function(){for(var t=this.get_paths(),e=0,i=t.length,n=[];e<i;e++)n.push([t.getAt(e).lat(),t.getAt(e).lng()]);this.set_data({paths:n})},BB.gmap.line.prototype.add_styles=function(t){this.__STYLES=t},BB.gmap.line.prototype.set_styles=function(t){return this.add_styles(t),this.display(),this},BB.gmap.line.prototype.get_styles=function(){return this.__STYLES},BB.gmap.line.prototype.set_paths=function(t){if("object"==typeof t){if(!(t[0]instanceof google.maps.LatLng)){for(var e=0,i=t.length,n=new google.maps.MVCArray;e<i&&"object"==typeof t[e];e++){var s=this.controller().translate_coords(t[e]);n.insertAt(n.length,s)}t=n}this.__PATHS=t}else this.error("Invalid paths at BB.gmap.line.set_paths :"+t)},BB.gmap.line.prototype.get_paths=function(){return this.__PATHS},BB.gmap.line.prototype.display=function(){this.data();var t=this.get_styles();void 0===t&&this.error("Undefined styles at BB.gmap.line.display : "+t);var e=this.get_paths();if(void 0===e&&this.error("Undefined paths at BB.gmap.line.display : "+e),t.path=e,void 0!==this.object())this.object().setOptions(t);else{var i=new google.maps.Polyline(t);this.set_object(i)}return this.set_map(this.controller().map()),this.update_coords(),this},BB.gmap.line.prototype.refresh=function(){var t=this.data("_opts");this.object().setOptions(t)},BB.gmap.line.prototype.add_point=function(t,e){if("object"!=typeof t)return!1;if(t instanceof google.maps.LatLng||(t=this.controller().translate_coords(t)),!(t instanceof google.maps.LatLng||void 0!==t[0]&&void 0!==t[1]))return!1;var i=this,n=this.get_paths();if(void 0===n&&this.set_paths([[t.lat(),t.lng()]]),n=this.get_paths(),"number"!=typeof e&&(e=n.length),n.insertAt(e,t),this.data("editable")){var s=new BB.gmap.marker({coords:[t.lat(),t.lng()],draggable:!0,icon:{path:google.maps.SymbolPath.CIRCLE,scale:4},editable:!0,ondragend:function(t,e){i.move_point(t.object().index,[e.latLng.lat(),e.latLng.lng()])},ondelete:function(t){i.remove_point(t.object().index),i.focus(),i.get_paths().length||i.delete()},index:e},i.controller());this.__MARKERS||(this.__MARKERS=[]),this.__MARKERS[e]=s}return this},BB.gmap.line.prototype.move_point=function(t,e){var i=this.get_paths();return"object"!=typeof i?(this.error("You can not move a point when no path is given at BB.gmap.line.move_point( index, path )"),!1):e?(e instanceof google.maps.LatLng||(e=this.controller().translate_coords(e)),(e instanceof google.maps.LatLng||void 0!==e[0]&&void 0!==e[1])&&(i.setAt(t,e),this.update_coords(),this)):(this.error("Required arguments index:integer and path:object at BB.gmap.line.move_point( index, path )"),!1)},BB.gmap.line.prototype.remove_point=function(t){var e=this.get_paths();if("object"!=typeof e)return this.error("You can not move a point when no path is given at BB.gmap.line.remove_point( index, path )"),!1;e.removeAt(t),void 0!==this.__MARKERS[t]&&(this.__MARKERS[t].hide(),this.__MARKERS.splice(t,1));var i=this.__MARKERS;for(var n in i)i[n].object().index=parseInt(n);return this.redraw(),this.update_coords(),this},BB.gmap.line.prototype.set_editable=function(t){return t?(this.set_data({editable:!0}),this.show_markers(),this.focus(),this):(this.set_data({editable:!1}),this.hide_markers(),this)},BB.gmap.line.prototype.show_markers=function(){for(var t=0;t<this.__MARKERS.length;t++)this.__MARKERS[t].show();return this},BB.gmap.line.prototype.hide_markers=function(){this.controller().focused();for(var t=0;t<this.__MARKERS.length;t++)this.__MARKERS[t].hide();return this},BB.gmap.line.prototype.map_click=function(t){this.add_point(t.latLng)},BB.gmap.line.prototype.set_draggable=function(t){var e=this.get_styles();return e.draggable=!!t,this.set_styles(e),this},BB.gmap.line.prototype.listeners=function(){this.object().bbobject=this,this.clear_listeners(),google.maps.event.addListener(this.object(),"mouseover",this.mouse_over),google.maps.event.addListener(this.object(),"mouseout",this.mouse_out),google.maps.event.addListener(this.object(),"click",this.click)},BB.gmap.line.prototype.clear_listeners=function(){return google.maps.event.clearListeners(this.object(),"mouseover"),google.maps.event.clearListeners(this.object(),"mouseout"),google.maps.event.clearListeners(this.object(),"click"),this},BB.gmap.line.prototype.mouse_over=function(t){var e=this.bbobject,i=e.data();"function"==typeof i.onmouseover&&i.onmouseover(e,t);var n=e.get_styles();"object"==typeof n.hover&&e.set_styles(n.hover)},BB.gmap.line.prototype.mouse_out=function(t){var e=this.bbobject,i=e.data();if("function"==typeof i.onmouseout&&i.onmouseout(e,t),e.controller().focused()==e)return!1;e.get_data("styles"),e.set_styles(e.get_data("styles"))},BB.gmap.line.prototype.mouse_down=function(t){this.bbobject},BB.gmap.line.prototype.mouse_up=function(t){this.bbobject},BB.gmap.line.prototype.click=function(t){var e=this.bbobject,i=e.data();e.focus(),"function"==typeof i.onclick?i.onclick(e,t):"string"==typeof i.onclick&&"function"==typeof window[i.onclick]&&window[i.onclick](e,t)},BB.gmap.line.prototype.focus=function(){if(this.__DELETED)return!1;this.controller().set_focus(this);var t=this.get_data("styles");return"object"==typeof t.focused&&this.set_styles(t.focused),this.data("editable")&&this.show_markers(),this},BB.gmap.line.prototype.blur=function(){return!this.__DELETED&&(this.set_styles(this.get_data("styles")),this)},BB.gmap.line.prototype.get_bounds=function(){for(var t,e=new google.maps.LatLngBounds,i=this.object().getPaths(),n=0;n<i.getLength();n++){t=i.getAt(n);for(var s=0;s<t.getLength();s++)e.extend(t.getAt(s))}return e},BB.gmap.line.prototype.get_position=function(){var t=new google.maps.MVCArray;return t.push(this.object().getPath()),t},BB.gmap.line.prototype.update_coords=function(){var t=[];return this.get_paths().forEach(function(e){t.push([e.lat(),e.lng()])}),this.set_data({paths:t}),this},BB.gmap.line.prototype.export=function(){this.update_coords();var t=this.data();return void 0!==t.styles.path&&delete t.styles.path,this.data()},BB.gmap.line.prototype.delete=function(){var t=0,e=this.__MARKERS.length;if(e)for(;t<e;t++)this.remove_point(t);this.hide_markers(),BB.gmap.object.prototype.delete.call(this)},(BB=BB||{}).gmap=BB.gmap||{},BB.gmap.polygon=function(t,e){return BB.gmap.line.call(this,t,e),this},BB.gmap.polygon.prototype=Object.create(BB.gmap.line.prototype),BB.gmap.polygon.prototype.display=function(){this.data();var t=this.get_styles();void 0===t&&this.error("Undefined styles at BB.gmap.polygon.display : "+t);var e=this.get_paths();if(void 0===e&&this.error("Undefined paths at BB.gmap.polygon.display : "+e),void 0!==this.object())this.object().setOptions(t);else{var i=new google.maps.Polygon(t);this.set_object(i)}return this.object().setPaths(new google.maps.MVCArray([e])),this.set_map(this.controller().map()),this.listeners(),this},BB.gmap.polygon.prototype.get_position=function(){return this.object().getPaths()},function(){function t(t){return function(e){this[t]=e}}function e(t){return function(){return this[t]}}function i(t,e,n){this.extend(i,google.maps.OverlayView),this.c=t,this.a=[],this.f=[],this.ca=[53,56,66,78,90],this.j=[],this.A=!1,n=n||{},this.g=n.gridSize||60,this.l=n.minimumClusterSize||2,this.J=n.maxZoom||u,this.j=n.styles||[],this.X=n.imagePath||this.Q,this.W=n.imageExtension||this.P,this.O=!0,void 0!=n.zoomOnClick&&(this.O=n.zoomOnClick),this.r=!1,void 0!=n.averageCenter&&(this.r=n.averageCenter),function(t){if(!t.j.length)for(var e,i=0;e=t.ca[i];i++)t.j.push({url:t.X+(i+1)+"."+t.W,height:e,width:e})}(this),this.setMap(t),this.K=this.c.getZoom();var s=this;google.maps.event.addListener(this.c,"zoom_changed",function(){var t=s.c.getZoom();s.K!=t&&(s.K=t,s.m())}),google.maps.event.addListener(this.c,"idle",function(){s.i()}),e&&e.length&&this.C(e,!1)}function n(t,e){e.s=!1,e.draggable&&google.maps.event.addListener(e,"dragend",function(){e.s=!1,t.L()}),t.a.push(e)}function s(t,e){var i=-1;if(t.a.indexOf)i=t.a.indexOf(e);else for(var n,s=0;n=t.a[s];s++)if(n==e){i=s;break}return-1!=i&&(e.setMap(u),t.a.splice(i,1),!0)}function o(t){if(t.A)for(var e,i=t.v(new google.maps.LatLngBounds(t.c.getBounds().getSouthWest(),t.c.getBounds().getNorthEast())),n=0;e=t.a[n];n++)if(!e.s&&i.contains(e.getPosition())){for(var s=t,o=4e4,a=u,l=0,h=void 0;h=s.f[l];l++)if(f=h.getCenter()){var c=e.getPosition();if(f&&c){var d=(c.lat()-f.lat())*Math.PI/180,p=(c.lng()-f.lng())*Math.PI/180,f=Math.sin(d/2)*Math.sin(d/2)+Math.cos(f.lat()*Math.PI/180)*Math.cos(c.lat()*Math.PI/180)*Math.sin(p/2)*Math.sin(p/2);f=12742*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}else f=0;f<o&&(o=f,a=h)}a&&a.F.contains(e.getPosition())?a.q(e):((h=new r(s)).q(e),s.f.push(h))}}function r(t){this.k=t,this.c=t.getMap(),this.g=t.w(),this.l=t.l,this.r=t.r,this.d=u,this.a=[],this.F=u,this.n=new l(this,t.z(),t.w())}function a(t){t.F=t.k.v(new google.maps.LatLngBounds(t.d,t.d))}function l(t,e,i){t.k.extend(l,google.maps.OverlayView),this.j=e,this.fa=i||0,this.u=t,this.d=u,this.c=t.getMap(),this.B=this.b=u,this.t=!1,this.setMap(this.c)}function h(t,e){var i=t.getProjection().fromLatLngToDivPixel(e);return i.x-=parseInt(t.p/2,10),i.y-=parseInt(t.h/2,10),i}function c(t){t.b&&(t.b.style.display="none"),t.t=!1}function d(t,e){var i=[];return i.push("background-image:url("+t.da+");"),i.push("background-position:"+(t.D?t.D:"0 0")+";"),"object"==typeof t.e?("number"==typeof t.e[0]&&t.e[0]>0&&t.e[0]<t.h?i.push("height:"+(t.h-t.e[0])+"px; padding-top:"+t.e[0]+"px;"):i.push("height:"+t.h+"px; line-height:"+t.h+"px;"),"number"==typeof t.e[1]&&t.e[1]>0&&t.e[1]<t.p?i.push("width:"+(t.p-t.e[1])+"px; padding-left:"+t.e[1]+"px;"):i.push("width:"+t.p+"px; text-align:center;")):i.push("height:"+t.h+"px; line-height:"+t.h+"px; width:"+t.p+"px; text-align:center;"),i.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+(t.M?t.M:"black")+"; position:absolute; font-size:"+(t.N?t.N:11)+"px; font-family:Arial,sans-serif; font-weight:bold"),i.join("")}var p,u=null;(p=i.prototype).Q="https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m",p.P="png",p.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},p.onAdd=function(){this.A||(this.A=!0,o(this))},p.draw=function(){},p.S=function(){for(var t,e=this.o(),i=new google.maps.LatLngBounds,n=0;t=e[n];n++)i.extend(t.getPosition());this.c.fitBounds(i)},p.z=e("j"),p.o=e("a"),p.V=function(){return this.a.length},p.ba=t("J"),p.I=e("J"),p.G=function(t,e){for(var i=0,n=t.length,s=n;0!==s;)s=parseInt(s/10,10),i++;return i=Math.min(i,e),{text:n,index:i}},p.$=t("G"),p.H=e("G"),p.C=function(t,e){for(var i,s=0;i=t[s];s++)n(this,i);e||this.i()},p.q=function(t,e){n(this,t),e||this.i()},p.Y=function(t,e){var i=s(this,t);return!(e||!i||(this.m(),this.i(),0))},p.Z=function(t,e){for(var i,n=!1,o=0;i=t[o];o++)i=s(this,i),n=n||i;if(!e&&n)return this.m(),this.i(),!0},p.U=function(){return this.f.length},p.getMap=e("c"),p.setMap=t("c"),p.w=e("g"),p.aa=t("g"),p.v=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),n=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng());return(i=e.fromLatLngToDivPixel(i)).x+=this.g,i.y-=this.g,n=e.fromLatLngToDivPixel(n),n.x-=this.g,n.y+=this.g,i=e.fromDivPixelToLatLng(i),e=e.fromDivPixelToLatLng(n),t.extend(i),t.extend(e),t},p.R=function(){this.m(!0),this.a=[]},p.m=function(t){for(var e,i=0;e=this.f[i];i++)e.remove();for(i=0;e=this.a[i];i++)e.s=!1,t&&e.setMap(u);this.f=[]},p.L=function(){var t=this.f.slice();this.f.length=0,this.m(),this.i(),window.setTimeout(function(){for(var e,i=0;e=t[i];i++)e.remove()},0)},p.i=function(){o(this)},(p=r.prototype).q=function(t){var e;t:if(this.a.indexOf)e=-1!=this.a.indexOf(t);else{e=0;for(var i;i=this.a[e];e++)if(i==t){e=!0;break t}e=!1}if(e)return!1;if(this.d?this.r&&(i=this.a.length+1,e=(this.d.lat()*(i-1)+t.getPosition().lat())/i,i=(this.d.lng()*(i-1)+t.getPosition().lng())/i,this.d=new google.maps.LatLng(e,i),a(this)):(this.d=t.getPosition(),a(this)),t.s=!0,this.a.push(t),(e=this.a.length)<this.l&&t.getMap()!=this.c&&t.setMap(this.c),e==this.l)for(i=0;i<e;i++)this.a[i].setMap(u);if(e>=this.l&&t.setMap(u),t=this.c.getZoom(),(e=this.k.I())&&t>e)for(t=0;e=this.a[t];t++)e.setMap(this.c);else this.a.length<this.l?c(this.n):(e=this.k.H()(this.a,this.k.z().length),this.n.setCenter(this.d),(t=this.n).B=e,t.ga=e.text,t.ea=e.index,t.b&&(t.b.innerHTML=e.text),e=Math.max(0,t.B.index-1),e=Math.min(t.j.length-1,e),e=t.j[e],t.da=e.url,t.h=e.height,t.p=e.width,t.M=e.textColor,t.e=e.anchor,t.N=e.textSize,t.D=e.backgroundPosition,this.n.show());return!0},p.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.d,this.d),i=this.o(),n=0;t=i[n];n++)e.extend(t.getPosition());return e},p.remove=function(){this.n.remove(),this.a.length=0,delete this.a},p.T=function(){return this.a.length},p.o=e("a"),p.getCenter=e("d"),p.getMap=e("c"),(p=l.prototype).onAdd=function(){this.b=document.createElement("DIV"),this.t&&(this.b.style.cssText=d(this,h(this,this.d)),this.b.innerHTML=this.B.text),this.getPanes().overlayMouseTarget.appendChild(this.b);var t=this;google.maps.event.addDomListener(this.b,"click",function(){var e=t.u.k;google.maps.event.trigger(e,"clusterclick",t.u),e.O&&t.c.fitBounds(t.u.getBounds())})},p.draw=function(){if(this.t){var t=h(this,this.d);this.b.style.top=t.y+"px",this.b.style.left=t.x+"px"}},p.show=function(){this.b&&(this.b.style.cssText=d(this,h(this,this.d)),this.b.style.display=""),this.t=!0},p.remove=function(){this.setMap(u)},p.onRemove=function(){this.b&&this.b.parentNode&&(c(this),this.b.parentNode.removeChild(this.b),this.b=u)},p.setCenter=t("d"),window.MarkerClusterer=i,i.prototype.addMarker=i.prototype.q,i.prototype.addMarkers=i.prototype.C,i.prototype.clearMarkers=i.prototype.R,i.prototype.fitMapToMarkers=i.prototype.S,i.prototype.getCalculator=i.prototype.H,i.prototype.getGridSize=i.prototype.w,i.prototype.getExtendedBounds=i.prototype.v,i.prototype.getMap=i.prototype.getMap,i.prototype.getMarkers=i.prototype.o,i.prototype.getMaxZoom=i.prototype.I,i.prototype.getStyles=i.prototype.z,i.prototype.getTotalClusters=i.prototype.U,i.prototype.getTotalMarkers=i.prototype.V,i.prototype.redraw=i.prototype.i,i.prototype.removeMarker=i.prototype.Y,i.prototype.removeMarkers=i.prototype.Z,i.prototype.resetViewport=i.prototype.m,i.prototype.repaint=i.prototype.L,i.prototype.setCalculator=i.prototype.$,i.prototype.setGridSize=i.prototype.aa,i.prototype.setMaxZoom=i.prototype.ba,i.prototype.onAdd=i.prototype.onAdd,i.prototype.draw=i.prototype.draw,r.prototype.getCenter=r.prototype.getCenter,r.prototype.getSize=r.prototype.T,r.prototype.getMarkers=r.prototype.o,l.prototype.onAdd=l.prototype.onAdd,l.prototype.draw=l.prototype.draw,l.prototype.onRemove=l.prototype.onRemove}(),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(0,function(t){!function(t){"use strict";function e(e){return t.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){e=e.replace(this.re,this.ch)}),e}function i(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(e).join("|")+")",n=new RegExp(i),s=new RegExp(i,"g"),o=null==t?"":""+t;return n.test(o)?o.replace(s,function(t){return e[t]}):o}function n(e,i){var n=arguments,o=e,r=i;[].shift.apply(n);var a,l=this.each(function(){var e=t(this);if(e.is("select")){var i=e.data("selectpicker"),l="object"==typeof o&&o;if(i){if(l)for(var h in l)l.hasOwnProperty(h)&&(i.options[h]=l[h])}else{var c=t.extend({},s.DEFAULTS,t.fn.selectpicker.defaults||{},e.data(),l);c.template=t.extend({},s.DEFAULTS.template,t.fn.selectpicker.defaults?t.fn.selectpicker.defaults.template:{},e.data().template,l.template),e.data("selectpicker",i=new s(this,c,r))}"string"==typeof o&&(a=i[o]instanceof Function?i[o].apply(i,n):i.options[o])}});return void 0!==a?a:l}String.prototype.includes||function(){var t={}.toString,e=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),i="".indexOf,n=function(e){if(null==this)throw new TypeError;var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var s=n.length,o=String(e),r=o.length,a=arguments.length>1?arguments[1]:void 0,l=a?Number(a):0;l!=l&&(l=0);return!(r+Math.min(Math.max(l,0),s)>s)&&-1!=i.call(n,o,l)};e?e(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}(),String.prototype.startsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),e={}.toString,i=function(t){if(null==this)throw new TypeError;var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var n=i.length,s=String(t),o=s.length,r=arguments.length>1?arguments[1]:void 0,a=r?Number(r):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),n);if(o+l>n)return!1;for(var h=-1;++h<o;)if(i.charCodeAt(l+h)!=s.charCodeAt(h))return!1;return!0};t?t(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(t,e,i){i=[];for(e in t)i.hasOwnProperty.call(t,e)&&i.push(e);return i}),t.fn.triggerNative=function(t){var e,i=this[0];i.dispatchEvent?("function"==typeof Event?e=new Event(t,{bubbles:!0}):(e=document.createEvent("Event")).initEvent(t,!0,!1),i.dispatchEvent(e)):(i.fireEvent&&((e=document.createEventObject()).eventType=t,i.fireEvent("on"+t,e)),this.trigger(t))},t.expr[":"].icontains=function(e,i,n){var s=t(e);return(s.data("tokens")||s.text()).toUpperCase().includes(n[3].toUpperCase())},t.expr[":"].ibegins=function(e,i,n){var s=t(e);return(s.data("tokens")||s.text()).toUpperCase().startsWith(n[3].toUpperCase())},t.expr[":"].aicontains=function(e,i,n){var s=t(e);return(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase().includes(n[3].toUpperCase())},t.expr[":"].aibegins=function(e,i,n){var s=t(e);return(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase().startsWith(n[3].toUpperCase())};var s=function(e,i,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=s.prototype.val,this.render=s.prototype.render,this.refresh=s.prototype.refresh,this.setStyle=s.prototype.setStyle,this.selectAll=s.prototype.selectAll,this.deselectAll=s.prototype.deselectAll,this.destroy=s.prototype.destroy,this.remove=s.prototype.remove,this.show=s.prototype.show,this.hide=s.prototype.hide,this.init()};s.VERSION="1.7.7",s.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(t,e){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){return[1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},s.prototype={constructor:s,init:function(){var e=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$element.trigger("hide.bs.select",t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden.bs.select",t)},"show.bs.dropdown":function(t){e.$element.trigger("show.bs.select",t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown.bs.select",t)}}),setTimeout(function(){e.$element.trigger("loaded.bs.select")})},createDropdown:function(){var e=this.multiple?" show-tick":"",n=this.$element.parent().hasClass("input-group")?" input-group-btn":"",s=this.autofocus?" autofocus":"",o=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",r=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+i(this.options.liveSearchPlaceholder)+'"')+"></div>":"",a=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",h='<div class="btn-group bootstrap-select'+e+n+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+s+'><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open">'+o+r+a+'<ul class="dropdown-menu inner" role="menu"></ul>'+l+"</div></div>";return t(h)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul")[0].innerHTML=e,t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menuInner[0].innerHTML=t},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var n=this,s=[],o=0,r=document.createElement("option"),a=-1,l=function(t,e,i,n){return"<li"+(void 0!==i&""!==i?' class="'+i+'"':"")+(void 0!==e&null!==e?' data-original-index="'+e+'"':"")+(void 0!==n&null!==n?'data-optgroup="'+n+'"':"")+">"+t+"</li>"},h=function(t,s,o,r){return'<a tabindex="0"'+(void 0!==s?' class="'+s+'"':"")+(void 0!==o?' style="'+o+'"':"")+(n.options.liveSearchNormalize?' data-normalized-text="'+e(i(t))+'"':"")+(void 0!==r||null!==r?' data-tokens="'+r+'"':"")+">"+t+'<span class="'+n.options.iconBase+" "+n.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(a--,!this.$element.find(".bs-title-option").length)){var c=this.$element[0];r.className="bs-title-option",r.appendChild(document.createTextNode(this.options.title)),r.value="",c.insertBefore(r,c.firstChild),void 0===t(c.options[c.selectedIndex]).attr("selected")&&(r.selected=!0)}return this.$element.find("option").each(function(e){var i=t(this);if(a++,!i.hasClass("bs-title-option")){var r=this.className||"",c=this.style.cssText,d=i.data("content")?i.data("content"):i.html(),p=i.data("tokens")?i.data("tokens"):null,u=void 0!==i.data("subtext")?'<small class="text-muted">'+i.data("subtext")+"</small>":"",f=void 0!==i.data("icon")?'<span class="'+n.options.iconBase+" "+i.data("icon")+'"></span> ':"",g=this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled;if(""!==f&&g&&(f="<span>"+f+"</span>"),n.options.hideDisabled&&g)a--;else{if(i.data("content")||(d=f+'<span class="text">'+d+u+"</span>"),"OPTGROUP"===this.parentNode.tagName&&!0!==i.data("divider")){var m=" "+this.parentNode.className||"";if(0===i.index()){o+=1;var v=this.parentNode.label,y=void 0!==i.parent().data("subtext")?'<small class="text-muted">'+i.parent().data("subtext")+"</small>":"";v=(i.parent().data("icon")?'<span class="'+n.options.iconBase+" "+i.parent().data("icon")+'"></span> ':"")+'<span class="text">'+v+y+"</span>",0!==e&&s.length>0&&(a++,s.push(l("",null,"divider",o+"div"))),a++,s.push(l(v,null,"dropdown-header"+m,o))}s.push(l(h(d,"opt "+r+m,c,p),e,"",o))}else!0===i.data("divider")?s.push(l("",e,"divider")):!0===i.data("hidden")?s.push(l(h(d,r,c,p),e,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(a++,s.push(l("",null,"divider",o+"div"))),s.push(l(h(d,r,c,p),e)));n.liObj[e]=a}}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),s.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var i,n=this;!1!==e&&this.$element.find("option").each(function(t){var e=n.findLis().eq(n.liObj[t]);n.setDisabled(t,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,e),n.setSelected(t,this.selected,e)}),this.tabIndex();var s=this.$element.find("option").map(function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var e,i=t(this),s=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return e=n.options.showSubtext&&i.data("subtext")&&!n.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"",void 0!==i.attr("title")?i.attr("title"):i.data("content")&&n.options.showContent?i.data("content"):s+i.html()+e}}).toArray(),o=this.multiple?s.join(this.options.multipleSeparator):s[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var r=this.options.selectedTextFormat.split(">");if(r.length>1&&s.length>r[1]||1==r.length&&s.length>=2){i=this.options.hideDisabled?", [disabled]":"";var a=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+i).length;o=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(s.length,a):this.options.countSelectedText).replace("{0}",s.length.toString()).replace("{1}",a.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(o=this.options.title),o||(o=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(o.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(o),this.$element.trigger("rendered.bs.select")},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=t||this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(e){if(e||!1!==this.options.size&&!this.sizeInfo){var i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("ul"),o=document.createElement("li"),r=document.createElement("li"),a=document.createElement("a"),l=document.createElement("span"),h=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,c=this.options.liveSearch?document.createElement("div"):null,d=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,p=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(l.className="text",i.className=this.$menu[0].parentNode.className+" open",n.className="dropdown-menu open",s.className="dropdown-menu inner",o.className="divider",l.appendChild(document.createTextNode("Inner text")),a.appendChild(l),r.appendChild(a),s.appendChild(r),s.appendChild(o),h&&n.appendChild(h),c){var u=document.createElement("span");c.className="bs-searchbox",u.className="form-control",c.appendChild(u),n.appendChild(c)}d&&n.appendChild(d),n.appendChild(s),p&&n.appendChild(p),i.appendChild(n),document.body.appendChild(i);var f=a.offsetHeight,g=h?h.offsetHeight:0,m=c?c.offsetHeight:0,v=d?d.offsetHeight:0,y=p?p.offsetHeight:0,b=t(o).outerHeight(!0),_="function"==typeof getComputedStyle&&getComputedStyle(n),w=_?null:t(n),x=parseInt(_?_.paddingTop:w.css("paddingTop"))+parseInt(_?_.paddingBottom:w.css("paddingBottom"))+parseInt(_?_.borderTopWidth:w.css("borderTopWidth"))+parseInt(_?_.borderBottomWidth:w.css("borderBottomWidth")),C=x+parseInt(_?_.marginTop:w.css("marginTop"))+parseInt(_?_.marginBottom:w.css("marginBottom"))+2;document.body.removeChild(i),this.sizeInfo={liHeight:f,headerHeight:g,searchHeight:m,actionsHeight:v,doneButtonHeight:y,dividerHeight:b,menuPadding:x,menuExtras:C}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var e,i,n,s,o=this,r=this.$menu,a=this.$menuInner,l=t(window),h=this.$newElement[0].offsetHeight,c=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,p=this.sizeInfo.searchHeight,u=this.sizeInfo.actionsHeight,f=this.sizeInfo.doneButtonHeight,g=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,v=this.sizeInfo.menuExtras,y=this.options.hideDisabled?".disabled":"",b=function(){n=o.$newElement.offset().top-l.scrollTop(),s=l.height()-n-h};if(b(),"auto"===this.options.size){var _=function(){var l,h=function(e,i){return function(n){return i?n.classList?n.classList.contains(e):t(n).hasClass(e):!(n.classList?n.classList.contains(e):t(n).hasClass(e))}},g=o.$menuInner[0].getElementsByTagName("li"),y=Array.prototype.filter?Array.prototype.filter.call(g,h("hidden",!1)):o.$lis.not(".hidden"),_=Array.prototype.filter?Array.prototype.filter.call(y,h("dropdown-header",!0)):y.filter(".dropdown-header");b(),e=s-v,o.options.container?(r.data("height")||r.data("height",r.height()),i=r.data("height")):i=r.height(),o.options.dropupAuto&&o.$newElement.toggleClass("dropup",n>s&&e-v<i),o.$newElement.hasClass("dropup")&&(e=n-v),l=y.length+_.length>3?3*c+v-2:0,r.css({"max-height":e+"px",overflow:"hidden","min-height":l+d+p+u+f+"px"}),a.css({"max-height":e-d-p-u-f-m+"px","overflow-y":"auto","min-height":Math.max(l-m,0)+"px"})};_(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",_),l.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",_)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(y).length>this.options.size){var w=this.$lis.not(".divider").not(y).children().slice(0,this.options.size).last().parent().index(),x=this.$lis.slice(0,w+1).filter(".divider").length;e=c*this.options.size+x*g+m,o.options.container?(r.data("height")||r.data("height",r.height()),i=r.data("height")):i=r.height(),o.options.dropupAuto&&this.$newElement.toggleClass("dropup",n>s&&e-v<i),r.css({"max-height":e+d+p+u+f+"px",overflow:"hidden","min-height":""}),a.css({"max-height":e-m+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var t=this.$menu.parent().clone().appendTo("body"),e=this.options.container?this.$newElement.clone().appendTo("body"):t,i=t.children(".dropdown-menu").outerWidth(),n=e.css("width","auto").children("button").outerWidth();t.remove(),e.remove(),this.$newElement.css("width",Math.max(i,n)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=t('<div class="bs-container" />');var e,i,n=this,s=function(t){n.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,n.$bsContainer.css({top:e.top+i,left:e.left,width:t[0].offsetWidth})};this.$newElement.on("click",function(){var e=t(this);n.isDisabled()||(s(e),n.$bsContainer.appendTo(n.options.container).toggleClass("open",!e.hasClass("open")).append(n.$menu))}),t(window).on("resize scroll",function(){s(n.$newElement)}),this.$element.on("hide.bs.select",function(){n.$menu.data("height",n.$menu.height()),n.$bsContainer.detach()})},setSelected:function(t,e,i){i||(i=this.findLis().eq(this.liObj[t])),i.toggleClass("selected",e)},setDisabled:function(t,e,i){i||(i=this.findLis().eq(this.liObj[t])),e?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var t=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this,i=t(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),i.data("spaceSelect",!1),this.$button.on("keyup",function(t){/(32)/.test(t.keyCode.toString(10))&&i.data("spaceSelect")&&(t.preventDefault(),i.data("spaceSelect",!1))}),this.$newElement.on("click",function(){e.setSize(),e.$element.on("shown.bs.select",function(){if(e.options.liveSearch||e.multiple){if(!e.multiple){var t=e.liObj[e.$element[0].selectedIndex];if("number"!=typeof t||!1===e.options.size)return;var i=e.$lis.eq(t)[0].offsetTop-e.$menuInner[0].offsetTop;i=i-e.$menuInner[0].offsetHeight/2+e.sizeInfo.liHeight/2,e.$menuInner[0].scrollTop=i}}else e.$menuInner.find(".selected a").focus()})}),this.$menuInner.on("click","li a",function(i){var n=t(this),s=n.parent().data("originalIndex"),o=e.$element.val(),r=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!n.parent().hasClass("disabled")){var a=e.$element.find("option"),l=a.eq(s),h=l.prop("selected"),c=l.parent("optgroup"),d=e.options.maxOptions,p=c.data("maxOptions")||!1;if(e.multiple){if(l.prop("selected",!h),e.setSelected(s,!h),n.blur(),!1!==d||!1!==p){var u=d<a.filter(":selected").length,f=p<c.find("option:selected").length;if(d&&u||p&&f)if(d&&1==d)a.prop("selected",!1),l.prop("selected",!0),e.$menuInner.find(".selected").removeClass("selected"),e.setSelected(s,!0);else if(p&&1==p){c.find("option:selected").prop("selected",!1),l.prop("selected",!0);var g=n.parent().data("optgroup");e.$menuInner.find('[data-optgroup="'+g+'"]').removeClass("selected"),e.setSelected(s,!0)}else{var m="function"==typeof e.options.maxOptionsText?e.options.maxOptionsText(d,p):e.options.maxOptionsText,v=m[0].replace("{n}",d),y=m[1].replace("{n}",p),b=t('<div class="notify"></div>');m[2]&&(v=v.replace("{var}",m[2][d>1?0:1]),y=y.replace("{var}",m[2][p>1?0:1])),l.prop("selected",!1),e.$menu.append(b),d&&u&&(b.append(t("<div>"+v+"</div>")),e.$element.trigger("maxReached.bs.select")),p&&f&&(b.append(t("<div>"+y+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(s,!1)},10),b.delay(750).fadeOut(300,function(){t(this).remove()})}}}else a.prop("selected",!1),l.prop("selected",!0),e.$menuInner.find(".selected").removeClass("selected"),e.setSelected(s,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(o!=e.$element.val()&&e.multiple||r!=e.$element.prop("selectedIndex")&&!e.multiple)&&(e.$element.triggerNative("change"),e.$element.trigger("changed.bs.select",[s,l.prop("selected"),h]))}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),e.options.liveSearch&&!t(i.target).hasClass("close")?e.$searchbox.focus():e.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(t){t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){e.$button.click()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).hasClass("bs-select-all")?e.selectAll():e.deselectAll(),e.$element.triggerNative("change")}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var n=this,s=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){n.$menuInner.find(".active").removeClass("active"),n.$searchbox.val()&&(n.$searchbox.val(""),n.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove()),n.multiple||n.$menuInner.find(".selected").addClass("active"),setTimeout(function(){n.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(t){t.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(n.$searchbox.val()){var o=n.$lis.not(".is-hidden").removeClass("hidden").children("a");(o=n.options.liveSearchNormalize?o.not(":a"+n._searchStyle()+'("'+e(n.$searchbox.val())+'")'):o.not(":"+n._searchStyle()+'("'+n.$searchbox.val()+'")')).parent().addClass("hidden"),n.$lis.filter(".dropdown-header").each(function(){var e=t(this),i=e.data("optgroup");0===n.$lis.filter("[data-optgroup="+i+"]").not(e).not(".hidden").length&&(e.addClass("hidden"),n.$lis.filter("[data-optgroup="+i+"div]").addClass("hidden"))});var r=n.$lis.not(".hidden");r.each(function(e){var i=t(this);i.hasClass("divider")&&(i.index()===r.first().index()||i.index()===r.last().index()||r.eq(e+1).hasClass("divider"))&&i.addClass("hidden")}),n.$lis.not(".hidden, .no-results").length?s.parent().length&&s.remove():(s.parent().length&&s.remove(),s.html(n.options.noneResultsText.replace("{0}",'"'+i(n.$searchbox.val())+'"')).show(),n.$menuInner.append(s))}else n.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove();n.$lis.filter(".active").removeClass("active"),n.$searchbox.val()&&n.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),t(this).focus()})},_searchStyle:function(){return{begins:"ibegins",startsWith:"ibegins"}[this.options.liveSearchStyle]||"icontains"},val:function(t){return void 0!==t?(this.$element.val(t),this.render(),this.$element):this.$element.val()},changeAll:function(e){void 0===e&&(e=!0),this.findLis();for(var i=this.$element.find("option"),n=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").toggleClass("selected",e),s=n.length,o=[],r=0;r<s;r++){var a=n[r].getAttribute("data-original-index");o[o.length]=i.eq(a)[0]}t(o).prop("selected",e),this.render(!1)},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},keydown:function(i){var n,s,o,r,a,l,h,c,d,p=t(this),u=p.is("input")?p.parent().parent():p.parent(),f=u.data("this"),g=":not(.disabled, .hidden, .dropdown-header, .divider)",m={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(u=p.parent().parent()),f.options.container&&(u=f.$menu),n=t("[role=menu] li",u),!(d=f.$menu.parent().hasClass("open"))&&(i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105||i.keyCode>=65&&i.keyCode<=90)&&(f.options.container?f.$newElement.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),d=!0),f.$searchbox.focus()),f.options.liveSearch&&(/(^9$|27)/.test(i.keyCode.toString(10))&&d&&0===f.$menu.find(".active").length&&(i.preventDefault(),f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus()),n=t("[role=menu] li"+g,u),p.val()||/(38|40)/.test(i.keyCode.toString(10))||0===n.filter(".active").length&&(n=f.$menuInner.find("li"),n=f.options.liveSearchNormalize?n.filter(":a"+f._searchStyle()+"("+e(m[i.keyCode])+")"):n.filter(":"+f._searchStyle()+"("+m[i.keyCode]+")"))),n.length){if(/(38|40)/.test(i.keyCode.toString(10)))s=n.index(n.find("a").filter(":focus").parent()),r=n.filter(g).first().index(),a=n.filter(g).last().index(),o=n.eq(s).nextAll(g).eq(0).index(),l=n.eq(s).prevAll(g).eq(0).index(),h=n.eq(o).prevAll(g).eq(0).index(),f.options.liveSearch&&(n.each(function(e){t(this).hasClass("disabled")||t(this).data("index",e)}),s=n.index(n.filter(".active")),r=n.first().data("index"),a=n.last().data("index"),o=n.eq(s).nextAll().eq(0).data("index"),l=n.eq(s).prevAll().eq(0).data("index"),h=n.eq(o).prevAll().eq(0).data("index")),c=p.data("prevIndex"),38==i.keyCode?(f.options.liveSearch&&s--,s!=h&&s>l&&(s=l),s<r&&(s=r),s==c&&(s=a)):40==i.keyCode&&(f.options.liveSearch&&s++,-1==s&&(s=0),s!=h&&s<o&&(s=o),s>a&&(s=a),s==c&&(s=r)),p.data("prevIndex",s),f.options.liveSearch?(i.preventDefault(),p.hasClass("dropdown-toggle")||(n.removeClass("active").eq(s).addClass("active").children("a").focus(),p.focus())):n.eq(s).children("a").focus();else if(!p.is("input")){var v,y=[];n.each(function(){t(this).hasClass("disabled")||t.trim(t(this).children("a").text().toLowerCase()).substring(0,1)==m[i.keyCode]&&y.push(t(this).index())}),v=t(document).data("keycount"),v++,t(document).data("keycount",v),t.trim(t(":focus").text().toLowerCase()).substring(0,1)!=m[i.keyCode]?(v=1,t(document).data("keycount",v)):v>=y.length&&(t(document).data("keycount",0),v>y.length&&(v=1)),n.eq(y[v-1]).children("a").focus()}if((/(13|32)/.test(i.keyCode.toString(10))||/(^9$)/.test(i.keyCode.toString(10))&&f.options.selectOnTab)&&d){if(/(32)/.test(i.keyCode.toString(10))||i.preventDefault(),f.options.liveSearch)/(32)/.test(i.keyCode.toString(10))||(f.$menuInner.find(".active a").click(),p.focus());else{var b=t(":focus");b.click(),b.focus(),i.preventDefault(),t(document).data("spaceSelect",!0)}t(document).data("keycount",0)}(/(^9$|27)/.test(i.keyCode.toString(10))&&d&&(f.multiple||f.options.liveSearch)||/(27)/.test(i.keyCode.toString(10))&&!d)&&(f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var o=t.fn.selectpicker;t.fn.selectpicker=n,t.fn.selectpicker.Constructor=s,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=o,this},t(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',s.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(t){t.stopPropagation()}),t(window).on("load.bs.select.data-api",function(){t(".selectpicker").each(function(){var e=t(this);n.call(e,e.data())})})}(t)}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function i(t){var e=t.parent(),i=e.find(".minicolors-panel"),s=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(n(),e.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(s.showSpeed,function(){s.show&&s.show.call(t.get(0))}))}function n(){t(".minicolors-focus").each(function(){var e=t(this),i=e.find(".minicolors-input"),n=e.find(".minicolors-panel"),s=i.data("minicolors-settings");n.fadeOut(s.hideSpeed,function(){s.hide&&s.hide.call(i.get(0)),e.removeClass("minicolors-focus")})})}function s(t,e,i){var n,s,r,a,l=t.parents(".minicolors").find(".minicolors-input"),h=l.data("minicolors-settings"),c=t.find("[class$=-picker]"),d=t.offset().left,p=t.offset().top,u=Math.round(e.pageX-d),f=Math.round(e.pageY-p),g=i?h.animationSpeed:0;e.originalEvent.changedTouches&&(u=e.originalEvent.changedTouches[0].pageX-d,f=e.originalEvent.changedTouches[0].pageY-p),u<0&&(u=0),f<0&&(f=0),u>t.width()&&(u=t.width()),f>t.height()&&(f=t.height()),t.parent().is(".minicolors-slider-wheel")&&c.parent().is(".minicolors-grid")&&(n=75-u,s=75-f,r=Math.sqrt(n*n+s*s),(a=Math.atan2(s,n))<0&&(a+=2*Math.PI),r>75&&(r=75,u=75-75*Math.cos(a),f=75-75*Math.sin(a)),u=Math.round(u),f=Math.round(f)),t.is(".minicolors-grid")?c.stop(!0).animate({top:f+"px",left:u+"px"},g,h.animationEasing,function(){o(l,t)}):c.stop(!0).animate({top:f+"px"},g,h.animationEasing,function(){o(l,t)})}function o(t,e){function i(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var n,s,o,a,h,c,d,p=t.val(),f=t.attr("data-opacity"),g=t.parent(),m=t.data("minicolors-settings"),v=g.find(".minicolors-input-swatch"),b=g.find(".minicolors-grid"),_=g.find(".minicolors-slider"),w=g.find(".minicolors-opacity-slider"),x=b.find("[class$=-picker]"),C=_.find("[class$=-picker]"),k=w.find("[class$=-picker]"),S=i(x,b),D=i(C,_),M=i(k,w);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(m.control){case"wheel":a=b.width()/2-S.x,h=b.height()/2-S.y,c=Math.sqrt(a*a+h*h),(d=Math.atan2(h,a))<0&&(d+=2*Math.PI),c>75&&(c=75,S.x=69-75*Math.cos(d),S.y=69-75*Math.sin(d)),s=u(c/.75,0,100),p=y({h:n=u(180*d/Math.PI,0,360),s:s,b:o=u(100-Math.floor(D.y*(100/_.height())),0,100)}),_.css("backgroundColor",y({h:n,s:s,b:100}));break;case"saturation":p=y({h:n=u(parseInt(S.x*(360/b.width()),10),0,360),s:s=u(100-Math.floor(D.y*(100/_.height())),0,100),b:o=u(100-Math.floor(S.y*(100/b.height())),0,100)}),_.css("backgroundColor",y({h:n,s:100,b:o})),g.find(".minicolors-grid-inner").css("opacity",s/100);break;case"brightness":p=y({h:n=u(parseInt(S.x*(360/b.width()),10),0,360),s:s=u(100-Math.floor(S.y*(100/b.height())),0,100),b:o=u(100-Math.floor(D.y*(100/_.height())),0,100)}),_.css("backgroundColor",y({h:n,s:s,b:100})),g.find(".minicolors-grid-inner").css("opacity",1-o/100);break;default:p=y({h:n=u(360-parseInt(D.y*(360/_.height()),10),0,360),s:s=u(Math.floor(S.x*(100/b.width())),0,100),b:o=u(100-Math.floor(S.y*(100/b.height())),0,100)}),b.css("backgroundColor",y({h:n,s:100,b:100}))}r(t,p,f=m.opacity?parseFloat(1-M.y/w.height()).toFixed(2):1)}else v.find("span").css({backgroundColor:p,opacity:f}),l(t,p,f)}function r(t,e,i){var n,s=t.parent(),o=t.data("minicolors-settings"),r=s.find(".minicolors-input-swatch");o.opacity&&t.attr("data-opacity",i),"rgb"===o.format?(n=f(e)?d(e,!0):b(c(e,!0)),i=""===t.attr("data-opacity")?1:u(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),!isNaN(i)&&o.opacity||(i=1),e=t.minicolors("rgbObject").a<=1&&n&&o.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(f(e)&&(e=m(e)),e=h(e,o.letterCase)),t.val(e),r.find("span").css({backgroundColor:e,opacity:i}),l(t,e,i)}function a(e,i){var n,s,o,r,a,v,_,w,x,C,k=e.parent(),S=e.data("minicolors-settings"),D=k.find(".minicolors-input-swatch"),M=k.find(".minicolors-grid"),T=k.find(".minicolors-slider"),O=k.find(".minicolors-opacity-slider"),P=M.find("[class$=-picker]"),B=T.find("[class$=-picker]"),E=O.find("[class$=-picker]");switch(f(e.val())?(n=m(e.val()),(a=u(parseFloat(g(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",a)):n=h(c(e.val(),!0),S.letterCase),n||(n=h(p(S.defaultValue,!0),S.letterCase)),s=function(t){var e=function(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),s=n-i;return e.b=n,e.s=0!==n?255*s/n:0,0!==e.s?t.r===n?e.h=(t.g-t.b)/s:t.g===n?e.h=2+(t.b-t.r)/s:e.h=4+(t.r-t.g)/s:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}(b(t));return 0===e.s&&(e.h=360),e}(n),r=S.keywords?t.map(S.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],v=""!==e.val()&&t.inArray(e.val().toLowerCase(),r)>-1?h(e.val()):f(e.val())?d(e.val()):n,i||e.val(v),S.opacity&&(o=""===e.attr("data-opacity")?1:u(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),e.attr("data-opacity",o),D.find("span").css("opacity",o),w=u(O.height()-O.height()*o,0,O.height()),E.css("top",w+"px")),"transparent"===e.val().toLowerCase()&&D.find("span").css("opacity",0),D.find("span").css("backgroundColor",n),S.control){case"wheel":x=u(Math.ceil(.75*s.s),0,M.height()/2),C=s.h*Math.PI/180,_=u(75-Math.cos(C)*x,0,M.width()),w=u(75-Math.sin(C)*x,0,M.height()),P.css({top:w+"px",left:_+"px"}),w=150-s.b/(100/M.height()),""===n&&(w=0),B.css("top",w+"px"),T.css("backgroundColor",y({h:s.h,s:s.s,b:100}));break;case"saturation":_=u(5*s.h/12,0,150),w=u(M.height()-Math.ceil(s.b/(100/M.height())),0,M.height()),P.css({top:w+"px",left:_+"px"}),w=u(T.height()-s.s*(T.height()/100),0,T.height()),B.css("top",w+"px"),T.css("backgroundColor",y({h:s.h,s:100,b:s.b})),k.find(".minicolors-grid-inner").css("opacity",s.s/100);break;case"brightness":_=u(5*s.h/12,0,150),w=u(M.height()-Math.ceil(s.s/(100/M.height())),0,M.height()),P.css({top:w+"px",left:_+"px"}),w=u(T.height()-s.b*(T.height()/100),0,T.height()),B.css("top",w+"px"),T.css("backgroundColor",y({h:s.h,s:s.s,b:100})),k.find(".minicolors-grid-inner").css("opacity",1-s.b/100);break;default:_=u(Math.ceil(s.s/(100/M.width())),0,M.width()),w=u(M.height()-Math.ceil(s.b/(100/M.height())),0,M.height()),P.css({top:w+"px",left:_+"px"}),w=u(T.height()-s.h/(360/T.height()),0,T.height()),B.css("top",w+"px"),M.css("backgroundColor",y({h:s.h,s:100,b:100}))}e.data("minicolors-initialized")&&l(e,v,o)}function l(t,e,i){var n,s,o,r=t.data("minicolors-settings"),a=t.data("minicolors-lastChange");if(!a||a.value!==e||a.opacity!==i){if(t.data("minicolors-lastChange",{value:e,opacity:i}),r.swatches&&0!==r.swatches.length){for(n=f(e)?d(e,!0):b(e),s=-1,o=0;o<r.swatches.length;++o)if(n.r===r.swatches[o].r&&n.g===r.swatches[o].g&&n.b===r.swatches[o].b&&n.a===r.swatches[o].a){s=o;break}t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==s&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}r.change&&(r.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){r.change.call(t.get(0),e,i)},r.changeDelay))):r.change.call(t.get(0),e,i)),t.trigger("change").trigger("input")}}function h(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function c(t,e){return(t=t.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function d(t,e){var i=t.replace(/[^\d,.]/g,"").split(",");return i[0]=u(parseInt(i[0],10),0,255),i[1]=u(parseInt(i[1],10),0,255),i[2]=u(parseInt(i[2],10),0,255),i[3]&&(i[3]=u(parseFloat(i[3],10),0,1)),e?i[3]?{r:i[0],g:i[1],b:i[2],a:i[3]}:{r:i[0],g:i[1],b:i[2]}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function p(t,e){return f(t)?d(t):c(t,e)}function u(t,e,i){return t<e&&(t=e),t>i&&(t=i),t}function f(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!e||4!==e.length)}function g(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===t.length?t[4]:"1"}function m(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function v(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}function y(t){return v(function(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),s=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=s;else{var o=s,r=(255-n)*s/255,a=i%60*(o-r)/60;360===i&&(i=0),i<60?(e.r=o,e.b=r,e.g=r+a):i<120?(e.g=o,e.b=r,e.r=o-a):i<180?(e.g=o,e.r=r,e.b=r+a):i<240?(e.b=o,e.r=r,e.g=o-a):i<300?(e.b=o,e.g=r,e.r=r+a):i<360?(e.r=o,e.g=r,e.b=o-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}(t))}function b(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},t.extend(t.fn,{minicolors:function(s,o){switch(s){case"destroy":return t(this).each(function(){e(t(this))}),t(this);case"hide":return n(),t(this);case"opacity":return void 0===o?t(this).attr("data-opacity"):(t(this).each(function(){a(t(this).attr("data-opacity",o))}),t(this));case"rgbObject":return function(e){var i,n=t(e).attr("data-opacity");i=f(t(e).val())?d(t(e).val(),!0):b(c(t(e).val(),!0));return i?(void 0!==n&&t.extend(i,{a:parseFloat(n)}),i):null}(t(this));case"rgbString":case"rgbaString":return function(e,i){var n,s=t(e).attr("data-opacity");n=f(t(e).val())?d(t(e).val(),!0):b(c(t(e).val(),!0));return n?(void 0===s&&(s=1),i?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(s)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):null}(t(this),"rgbaString"===s);case"settings":return void 0===o?t(this).data("minicolors-settings"):(t(this).each(function(){var i=t(this).data("minicolors-settings")||{};e(t(this)),t(this).minicolors(t.extend(!0,i,o))}),t(this));case"show":return i(t(this).eq(0)),t(this);case"value":return void 0===o?t(this).val():(t(this).each(function(){"object"==typeof o&&"null"!==o?(o.opacity&&t(this).attr("data-opacity",u(o.opacity,0,1)),o.color&&t(this).val(o.color)):t(this).val(o),a(t(this))}),t(this));default:return"create"!==s&&(o=s),t(this).each(function(){!function(e,i){var n,s,o,r,l,h=t('<div class="minicolors" />'),p=t.minicolors.defaults;if(!e.data("minicolors-initialized")){if(i=t.extend(!0,{},p,i),h.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity),void 0!==i.position&&t.each(i.position.split(" "),function(){h.addClass("minicolors-position-"+this)}),n="rgb"===i.format?i.opacity?"25":"20":i.keywords?"11":"7",e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",n).wrap(h).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()})),(r=e.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),i.swatches&&0!==i.swatches.length)for(r.addClass("minicolors-with-swatches"),s=t('<ul class="minicolors-swatches"></ul>').appendTo(r),l=0;l<i.swatches.length;++l)o=i.swatches[l],o=f(o)?d(o,!0):b(c(o,!0)),t('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(s).data("swatch-color",i.swatches[l]).find(".minicolors-swatch-color").css({backgroundColor:v(o),opacity:o.a}),i.swatches[l]=o;i.inline&&e.parent().addClass("minicolors-inline"),a(e,!1),e.data("minicolors-initialized",!0)}}(t(this),o)}),t(this)}}}),t([document,top.document]).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||n()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var i=t(this);e.preventDefault(),t(e.delegateTarget).data("minicolors-target",i),s(i,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var i=t(e.delegateTarget).data("minicolors-target");i&&s(i,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var i=t(this),n=i.parents(".minicolors").find(".minicolors-input"),s=i.data("swatch-color");r(n,s,g(s)),a(n)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var n=t(this).parent().find(".minicolors-input");e.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&i(e)}).on("blur.minicolors",".minicolors-input",function(){var e,i,n,s,o,r=t(this),a=r.data("minicolors-settings");r.data("minicolors-initialized")&&(e=a.keywords?t.map(a.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],""!==r.val()&&t.inArray(r.val().toLowerCase(),e)>-1?o=r.val():(f(r.val())?n=d(r.val(),!0):(i=c(r.val(),!0),n=i?b(i):null),o=null===n?a.defaultValue:"rgb"===a.format?d(a.opacity?"rgba("+n.r+","+n.g+","+n.b+","+r.attr("data-opacity")+")":"rgb("+n.r+","+n.g+","+n.b+")"):v(n)),s=a.opacity?r.attr("data-opacity"):1,"transparent"===o.toLowerCase()&&(s=0),r.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",s),r.val(o),""===r.val()&&r.val(p(a.defaultValue,!0)),r.val(h(r.val(),a.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var i=t(this);if(i.data("minicolors-initialized"))switch(e.keyCode){case 9:n();break;case 13:case 27:n(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&a(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){a(e,!0)},1)})}),"undefined"==typeof jQuery)throw new Error("multiselect requires jQuery");!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<7)throw new Error("multiselect requires jQuery version 1.7 or higher")}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e=function(t){function e(e,i){var n=e.prop("id");this.$left=e,this.$right=t(t(i.right).length?i.right:"#"+n+"_to"),this.actions={$leftAll:t(t(i.leftAll).length?i.leftAll:"#"+n+"_leftAll"),$rightAll:t(t(i.rightAll).length?i.rightAll:"#"+n+"_rightAll"),$leftSelected:t(t(i.leftSelected).length?i.leftSelected:"#"+n+"_leftSelected"),$rightSelected:t(t(i.rightSelected).length?i.rightSelected:"#"+n+"_rightSelected"),$undo:t(t(i.undo).length?i.undo:"#"+n+"_undo"),$redo:t(t(i.redo).length?i.redo:"#"+n+"_redo"),$moveUp:t(t(i.moveUp).length?i.moveUp:"#"+n+"_move_up"),$moveDown:t(t(i.moveDown).length?i.moveDown:"#"+n+"_move_down")},delete i.leftAll,delete i.leftSelected,delete i.right,delete i.rightAll,delete i.rightSelected,delete i.undo,delete i.redo,delete i.moveUp,delete i.moveDown,this.options={keepRenderingSort:i.keepRenderingSort,submitAllLeft:void 0===i.submitAllLeft||i.submitAllLeft,submitAllRight:void 0===i.submitAllRight||i.submitAllRight,search:i.search,ignoreDisabled:void 0!==i.ignoreDisabled&&i.ignoreDisabled,matchOptgroupBy:void 0!==i.matchOptgroupBy?i.matchOptgroupBy:"label"},delete i.keepRenderingSort,i.submitAllLeft,i.submitAllRight,i.search,i.ignoreDisabled,i.matchOptgroupBy,this.callbacks=i,this.init()}return e.prototype={init:function(){var e=this;e.undoStack=[],e.redoStack=[],e.options.keepRenderingSort&&(e.skipInitSort=!0,!1!==e.callbacks.sort&&(e.callbacks.sort=function(e,i){return t(e).data("position")>t(i).data("position")?1:-1}),e.$left.attachIndex(),e.$right.each(function(e,i){t(i).attachIndex()})),"function"==typeof e.callbacks.startUp&&e.callbacks.startUp(e.$left,e.$right),e.skipInitSort||"function"!=typeof e.callbacks.sort||(e.$left.mSort(e.callbacks.sort),e.$right.each(function(i,n){t(n).mSort(e.callbacks.sort)})),e.options.search&&e.options.search.left&&(e.options.search.$left=t(e.options.search.left),e.$left.before(e.options.search.$left)),e.options.search&&e.options.search.right&&(e.options.search.$right=t(e.options.search.right),e.$right.before(t(e.options.search.$right))),e.events()},events:function(){var e=this;e.options.search&&e.options.search.$left&&e.options.search.$left.on("keyup",function(t){e.callbacks.fireSearch(this.value)?(e.$left.find('option:search("'+this.value+'")').mShow(),e.$left.find('option:not(:search("'+this.value+'"))').mHide(),e.$left.find("option").closest("optgroup").mHide(),e.$left.find("option:not(.hidden)").parent("optgroup").mShow()):e.$left.find("option, optgroup").mShow()}),e.options.search&&e.options.search.$right&&e.options.search.$right.on("keyup",function(t){e.callbacks.fireSearch(this.value)?(e.$right.find('option:search("'+this.value+'")').mShow(),e.$right.find('option:not(:search("'+this.value+'"))').mHide(),e.$right.find("option").closest("optgroup").mHide(),e.$right.find("option:not(.hidden)").parent("optgroup").mShow()):e.$right.find("option, optgroup").mShow()}),e.$right.closest("form").on("submit",function(t){e.options.search&&(e.options.search.$left&&e.options.search.$left.val("").trigger("keyup"),e.options.search.$right&&e.options.search.$right.val("").trigger("keyup")),e.$left.find("option").prop("selected",e.options.submitAllLeft),e.$right.find("option").prop("selected",e.options.submitAllRight)}),e.$left.on("dblclick","option",function(t){t.preventDefault();var i=e.$left.find("option:selected");i.length&&e.moveToRight(i,t)}),e.$left.on("click","optgroup",function(e){"OPTGROUP"==t(e.target).prop("tagName")&&t(this).children().prop("selected",!0)}),e.$left.on("keypress",function(t){if(13===t.keyCode){t.preventDefault();var i=e.$left.find("option:selected");i.length&&e.moveToRight(i,t)}}),e.$right.on("dblclick","option",function(t){t.preventDefault();var i=e.$right.find("option:selected");i.length&&e.moveToLeft(i,t)}),e.$right.on("click","optgroup",function(e){"OPTGROUP"==t(e.target).prop("tagName")&&t(this).children().prop("selected",!0)}),e.$right.on("keydown",function(t){if(8===t.keyCode||46===t.keyCode){t.preventDefault();var i=e.$right.find("option:selected");i.length&&e.moveToLeft(i,t)}}),(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.indexOf("Trident/")>0||navigator.userAgent.indexOf("Edge/")>0)&&(e.$left.dblclick(function(t){e.actions.$rightSelected.trigger("click")}),e.$right.dblclick(function(t){e.actions.$leftSelected.trigger("click")})),e.actions.$rightSelected.on("click",function(i){i.preventDefault();var n=e.$left.find("option:selected");n.length&&e.moveToRight(n,i),t(this).blur()}),e.actions.$leftSelected.on("click",function(i){i.preventDefault();var n=e.$right.find("option:selected");n.length&&e.moveToLeft(n,i),t(this).blur()}),e.actions.$rightAll.on("click",function(i){i.preventDefault();var n=e.$left.children(":not(span):not(.hidden)");n.length&&e.moveToRight(n,i),t(this).blur()}),e.actions.$leftAll.on("click",function(i){i.preventDefault();var n=e.$right.children(":not(span):not(.hidden)");n.length&&e.moveToLeft(n,i),t(this).blur()}),e.actions.$undo.on("click",function(t){t.preventDefault(),e.undo(t)}),e.actions.$redo.on("click",function(t){t.preventDefault(),e.redo(t)}),e.actions.$moveUp.on("click",function(i){i.preventDefault();var n=e.$right.find(":selected:not(span):not(.hidden)");n.length&&e.moveUp(n,i),t(this).blur()}),e.actions.$moveDown.on("click",function(i){i.preventDefault();var n=e.$right.find(":selected:not(span):not(.hidden)");n.length&&e.moveDown(n,i),t(this).blur()})},moveToRight:function(t,e,i,n){return"function"==typeof this.callbacks.moveToRight?this.callbacks.moveToRight(this,t,e,i,n):!("function"==typeof this.callbacks.beforeMoveToRight&&!i&&!this.callbacks.beforeMoveToRight(this.$left,this.$right,t))&&(this.moveFromAtoB(this.$left,this.$right,t,e,i,n),n||(this.undoStack.push(["right",t]),this.redoStack=[]),"function"!=typeof this.callbacks.sort||i||this.doNotSortRight||this.$right.mSort(this.callbacks.sort),"function"!=typeof this.callbacks.afterMoveToRight||i||this.callbacks.afterMoveToRight(this.$left,this.$right,t),this)},moveToLeft:function(t,e,i,n){return"function"==typeof this.callbacks.moveToLeft?this.callbacks.moveToLeft(this,t,e,i,n):!("function"==typeof this.callbacks.beforeMoveToLeft&&!i&&!this.callbacks.beforeMoveToLeft(this.$left,this.$right,t))&&(this.moveFromAtoB(this.$right,this.$left,t,e,i,n),n||(this.undoStack.push(["left",t]),this.redoStack=[]),"function"!=typeof this.callbacks.sort||i||this.$left.mSort(this.callbacks.sort),"function"!=typeof this.callbacks.afterMoveToLeft||i||this.callbacks.afterMoveToLeft(this.$left,this.$right,t),this)},moveFromAtoB:function(e,i,n,s,o,r){var a=this;return"function"==typeof a.callbacks.moveFromAtoB?a.callbacks.moveFromAtoB(a,e,i,n,s,o,r):(n.each(function(e,n){var s=t(n);if(a.options.ignoreDisabled&&s.is(":disabled"))return!0;if(s.is("optgroup")||s.parent().is("optgroup")){var o=s.is("optgroup")?s:s.parent(),r="optgroup["+a.options.matchOptgroupBy+'="'+o.prop(a.options.matchOptgroupBy)+'"]',l=i.find(r);l.length||((l=o.clone(!0)).empty(),i.move(l)),s.is("optgroup")?l.move(s.find("option")):l.move(s),o.removeIfEmpty()}else i.move(s)}),a)},moveUp:function(t){return!("function"==typeof this.callbacks.beforeMoveUp&&!this.callbacks.beforeMoveUp(t))&&(t.first().prev().before(t),void("function"==typeof this.callbacks.afterMoveUp&&this.callbacks.afterMoveUp(t)))},moveDown:function(t){return!("function"==typeof this.callbacks.beforeMoveDown&&!this.callbacks.beforeMoveDown(t))&&(t.last().next().after(t),void("function"==typeof this.callbacks.afterMoveDown&&this.callbacks.afterMoveDown(t)))},undo:function(t){var e=this.undoStack.pop();if(e)switch(this.redoStack.push(e),e[0]){case"left":this.moveToRight(e[1],t,!1,!0);break;case"right":this.moveToLeft(e[1],t,!1,!0)}},redo:function(t){var e=this.redoStack.pop();if(e)switch(this.undoStack.push(e),e[0]){case"left":this.moveToLeft(e[1],t,!1,!0);break;case"right":this.moveToRight(e[1],t,!1,!0)}}},e}(t);t.multiselect={defaults:{startUp:function(e,i){i.find("option").each(function(i,n){if("OPTGROUP"==t(n).parent().prop("tagName")){var s='optgroup[label="'+t(n).parent().attr("label")+'"]';e.find(s+' option[value="'+n.value+'"]').each(function(t,e){e.remove()}),e.find(s).removeIfEmpty()}else{e.find('option[value="'+n.value+'"]').remove()}})},beforeMoveToRight:function(t,e,i){return!0},afterMoveToRight:function(t,e,i){},beforeMoveToLeft:function(t,e,i){return!0},afterMoveToLeft:function(t,e,i){},beforeMoveUp:function(t){return!0},afterMoveUp:function(t){},beforeMoveDown:function(t){return!0},afterMoveDown:function(t){},sort:function(t,e){return"NA"==t.innerHTML?1:"NA"==e.innerHTML?-1:t.innerHTML>e.innerHTML?1:-1},fireSearch:function(t){return t.length>1}}};var i=window.navigator.userAgent,n=i.indexOf("MSIE ")+i.indexOf("Trident/")+i.indexOf("Edge/")>-3,s=i.toLowerCase().indexOf("safari")>-1,o=i.toLowerCase().indexOf("firefox")>-1;t.fn.multiselect=function(i){return this.each(function(){var n=t(this),s=n.data("crlcu.multiselect"),o=t.extend({},t.multiselect.defaults,n.data(),"object"==typeof i&&i);s||n.data("crlcu.multiselect",s=new e(n,o))})},t.fn.move=function(t){return this.append(t).find("option").prop("selected",!1),this},t.fn.removeIfEmpty=function(){return this.children().length||this.remove(),this},t.fn.mShow=function(){return this.removeClass("hidden").show(),(n||s)&&this.each(function(e,i){t(i).parent().is("span")&&t(i).parent().replaceWith(i),t(i).show()}),o&&this.attr("disabled",!1),this},t.fn.mHide=function(){return this.addClass("hidden").hide(),(n||s)&&this.each(function(e,i){t(i).parent().is("span")||t(i).wrap("<span>").hide()}),o&&this.attr("disabled",!0),this},t.fn.mSort=function(e){return this.children().sort(e).appendTo(this),this.find("optgroup").each(function(i,n){t(n).children().sort(e).appendTo(n)}),this},t.fn.attachIndex=function(){this.children().each(function(e,i){var n=t(i);n.is("optgroup")&&n.children().each(function(e,i){t(i).data("position",e)}),n.data("position",e)})},t.expr[":"].search=function(e,i,n){var s=new RegExp(n[3],"i");return t(e).text().match(s)}}),function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"==typeof exports?module.exports=e():t.Sifter=e()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(!(t=s(String(t||"").toLowerCase()))||!t.length)return[];var e,i,n,r,l=[],h=t.split(/ +/);for(e=0,i=h.length;e<i;e++){if(n=o(h[e]),this.settings.diacritics)for(r in a)a.hasOwnProperty(r)&&(n=n.replace(new RegExp(r,"g"),a[r]));l.push({string:h[e],regex:new RegExp(n,"i")})}return l},t.prototype.iterator=function(t,e){(r(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var i,s,o,r;t=this.prepareSearch(t,e),s=t.tokens,i=t.options.fields,o=s.length,r=t.options.nesting;var a=function(t,e){var i,n;return t?(t=String(t||""),-1===(n=t.search(e.regex))?0:(i=e.string.length/t.length,0===n&&(i+=.5),i)):0},l=function(){var t=i.length;return t?1===t?function(t,e){return a(n(e,i[0],r),t)}:function(e,s){for(var o=0,l=0;o<t;o++)l+=a(n(s,i[o],r),e);return l/t}:function(){return 0}}();return o?1===o?function(t){return l(s[0],t)}:"and"===t.options.conjunction?function(t){for(var e,i=0,n=0;i<o;i++){if((e=l(s[i],t))<=0)return 0;n+=e}return n/o}:function(t){for(var e=0,i=0;e<o;e++)i+=l(s[e],t);return i/o}:function(){return 0}},t.prototype.getSortFunction=function(t,i){var s,o,r,a,l,h,c,d,p,u,f;if(r=this,t=r.prepareSearch(t,i),f=!t.query&&i.sort_empty||i.sort,p=function(t,e){return"$score"===t?e.score:n(r.items[e.id],t,i.nesting)},l=[],f)for(s=0,o=f.length;s<o;s++)(t.query||"$score"!==f[s].field)&&l.push(f[s]);if(t.query){for(u=!0,s=0,o=l.length;s<o;s++)if("$score"===l[s].field){u=!1;break}u&&l.unshift({field:"$score",direction:"desc"})}else for(s=0,o=l.length;s<o;s++)if("$score"===l[s].field){l.splice(s,1);break}for(d=[],s=0,o=l.length;s<o;s++)d.push("desc"===l[s].direction?-1:1);return(h=l.length)?1===h?(a=l[0].field,c=d[0],function(t,i){return c*e(p(a,t),p(a,i))}):function(t,i){var n,s,o;for(n=0;n<h;n++)if(o=l[n].field,s=d[n]*e(p(o,t),p(o,i)))return s;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;var n=(e=i({},e)).fields,s=e.sort,o=e.sort_empty;return n&&!r(n)&&(e.fields=[n]),s&&!r(s)&&(e.sort=[s]),o&&!r(o)&&(e.sort_empty=[o]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,e){var i,n,s,o;return n=this.prepareSearch(t,e),e=n.options,t=n.query,o=e.score||this.getScoreFunction(n),t.length?this.iterator(this.items,function(t,s){i=o(t),(!1===e.filter||i>0)&&n.items.push({score:i,id:s})}):this.iterator(this.items,function(t,e){n.items.push({score:1,id:e})}),(s=this.getSortFunction(n,e))&&n.items.sort(s),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=l(String(t||"")),e=l(String(e||"")),t>e?1:e>t?-1:0)},i=function(t,e){var i,n,s,o;for(i=1,n=arguments.length;i<n;i++)if(o=arguments[i])for(s in o)o.hasOwnProperty(s)&&(t[s]=o[s]);return t},n=function(t,e,i){if(t&&e){if(!i)return t[e];for(var n=e.split(".");n.length&&(t=t[n.shift()]););return t}},s=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},o=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||"undefined"!=typeof $&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a={a:"[a]",b:"[bB]",c:"[cCc]",d:"[dDd]",e:"[e]",f:"[f]",g:"[g]",h:"[h]",i:"[iiI]",j:"[j]",k:"[k]",l:"[l]",n:"[nNn]",o:"[o]",p:"[p]",q:"[qq]",r:"[r]",s:"[sSs]",t:"[t]",u:"[u]",v:"[v]",w:"[w]",x:"[x]",y:"[y]",z:"[z]"},l=function(){var t,e,i,n,s="",o={};for(i in a)if(a.hasOwnProperty(i))for(n=a[i].substring(2,a[i].length-1),s+=n,t=0,e=n.length;t<e;t++)o[n.charAt(t)]=i;var r=new RegExp("["+s+"]","g");return function(t){return t.replace(r,function(t){return o[t]}).toLowerCase()}}();return t}),function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={};t.mixin=function(t){t.plugins={},t.prototype.initializePlugins=function(t){var i,n,s,o=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(t))for(i=0,n=t.length;i<n;i++)"string"==typeof t[i]?o.push(t[i]):(this.plugins.settings[t[i].name]=t[i].options,o.push(t[i].name));else if(t)for(s in t)t.hasOwnProperty(s)&&(this.plugins.settings[s]=t[s],o.push(s));for(;o.length;)this.require(o.shift())},t.prototype.loadPlugin=function(e){var i=this.plugins,n=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=n.fn.apply(this,[this.plugins.settings[e]||{}]),i.names.push(e)},t.prototype.require=function(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]},t.define=function(e,i){t.plugins[e]={name:e,fn:i}}};var e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("sifter"),require("microplugin")):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(t,e,i){"use strict";var n=function(t,e){if("string"!=typeof e||e.length){var i="string"==typeof e?new RegExp(e,"i"):e,n=function(t){var e=0;if(3===t.nodeType){var s=t.data.search(i);if(s>=0&&t.data.length>0){var o=t.data.match(i),r=document.createElement("span");r.className="highlight";var a=t.splitText(s),l=(a.splitText(o[0].length),a.cloneNode(!0));r.appendChild(l),a.parentNode.replaceChild(r,a),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var h=0;h<t.childNodes.length;++h)h+=n(t.childNodes[h]);return e};return t.each(function(){n(this)})}};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()};var s=function(){};s.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},s.mixin=function(t){for(var e=["on","off","trigger"],i=0;i<e.length;i++)t.prototype[e[i]]=s.prototype[e[i]]};var o=/Mac/.test(navigator.userAgent),r=o?91:17,a=o?18:17,l=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,h=function(t){return void 0!==t},c=function(t){return void 0===t||null===t?null:"boolean"==typeof t?t?"1":"0":t+""},d=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p={};p.before=function(t,e,i){var n=t[e];t[e]=function(){return i.apply(t,arguments),n.apply(t,arguments)}},p.after=function(t,e,i){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return i.apply(t,arguments),e}};var u=function(t,e,i){var n,s=t.trigger,o={};t.trigger=function(){var i=arguments[0];return-1===e.indexOf(i)?s.apply(t,arguments):void(o[i]=arguments)},i.apply(t,[]),t.trigger=s;for(n in o)o.hasOwnProperty(n)&&s.apply(t,o[n])},f=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-t.value.length),e.start=i.text.length-n,e.length=n}return e},g=function(e){var i=null,n=function(n,s){var o,r,a,l,h,c,d,p;n=n||window.event||{},s=s||{},n.metaKey||n.altKey||(s.force||!1!==e.data("grow"))&&(o=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(r=n.keyCode,a=r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||32===r,46===r||8===r?(p=f(e[0])).length?o=o.substring(0,p.start)+o.substring(p.start+p.length):8===r&&p.start?o=o.substring(0,p.start-1)+o.substring(p.start+1):46===r&&void 0!==p.start&&(o=o.substring(0,p.start)+o.substring(p.start+1)):a&&(c=n.shiftKey,d=String.fromCharCode(n.keyCode),d=c?d.toUpperCase():d.toLowerCase(),o+=d)),l=e.attr("placeholder"),!o&&l&&(o=l),(h=function(e,i){if(!e)return 0;var n=t("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");!function(t,e,i){var n,s,o={};if(i)for(n=0,s=i.length;n<s;n++)o[i[n]]=t.css(i[n]);else o=t.css();e.css(o)}(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var s=n.width();return n.remove(),s}(o,e)+4)!==i&&(i=h,e.width(h),e.triggerHandler("resize")))};e.on("keydown keyup update blur",n),n()},m=function(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},v=function(i,n){var s,o,r,a;(a=i[0]).selectize=this;var l=window.getComputedStyle&&window.getComputedStyle(a,null);if(r=l?l.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,r=r||i.parents("[dir]:first").attr("dir")||"",t.extend(this,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++v.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?this.onSearchChange:function(t,e){var i;return function(){var n=this,s=arguments;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(n,s)},e)}}(this.onSearchChange,n.loadThrottle)}),this.sifter=new e(this.options,{diacritics:n.diacritics}),this.settings.options){for(s=0,o=this.settings.options.length;s<o;s++)this.registerOption(this.settings.options[s]);delete this.settings.options}if(this.settings.optgroups){for(s=0,o=this.settings.optgroups.length;s<o;s++)this.registerOptionGroup(this.settings.optgroups[s]);delete this.settings.optgroups}this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()};return s.mixin(v),void 0!==i?i.mixin(v):function(t,e){e||(e={});console.error("Selectize: "+t),e.explanation&&(console.group&&console.group(),console.error(e.explanation),console.group&&console.groupEnd())}("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),t.extend(v.prototype,{setup:function(){var e,i,n,s,h,c,d,p,u,f,m=this,v=m.settings,y=m.eventNS,b=t(window),_=t(document),w=m.$input;if(d=m.settings.mode,p=w.attr("class")||"",e=t("<div>").addClass(v.wrapperClass).addClass(p).addClass(d),i=t("<div>").addClass(v.inputClass).addClass("items").appendTo(e),n=t('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",w.is(":disabled")?"-1":m.tabIndex),c=t(v.dropdownParent||e),s=t("<div>").addClass(v.dropdownClass).addClass(d).hide().appendTo(c),h=t("<div>").addClass(v.dropdownContentClass).appendTo(s),(f=w.attr("id"))&&(n.attr("id",f+"-selectized"),t("label[for='"+f+"']").attr("for",f+"-selectized")),m.settings.copyClassesToDropdown&&s.addClass(p),e.css({width:w[0].style.width}),m.plugins.names.length&&(u="plugin-"+m.plugins.names.join(" plugin-"),e.addClass(u),s.addClass(u)),(null===v.maxItems||v.maxItems>1)&&1===m.tagType&&w.attr("multiple","multiple"),m.settings.placeholder&&n.attr("placeholder",v.placeholder),!m.settings.splitOn&&m.settings.delimiter){var x=m.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");m.settings.splitOn=new RegExp("\\s*"+x+"+\\s*")}w.attr("autocorrect")&&n.attr("autocorrect",w.attr("autocorrect")),w.attr("autocapitalize")&&n.attr("autocapitalize",w.attr("autocapitalize")),m.$wrapper=e,m.$control=i,m.$control_input=n,m.$dropdown=s,m.$dropdown_content=h,s.on("mouseenter","[data-selectable]",function(){return m.onOptionHover.apply(m,arguments)}),s.on("mousedown click","[data-selectable]",function(){return m.onOptionSelect.apply(m,arguments)}),function(t,e,i,n){t.on(e,i,function(e){for(var i=e.target;i&&i.parentNode!==t[0];)i=i.parentNode;return e.currentTarget=i,n.apply(this,[e])})}(i,"mousedown","*:not(input)",function(){return m.onItemSelect.apply(m,arguments)}),g(n),i.on({mousedown:function(){return m.onMouseDown.apply(m,arguments)},click:function(){return m.onClick.apply(m,arguments)}}),n.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return m.onKeyDown.apply(m,arguments)},keyup:function(){return m.onKeyUp.apply(m,arguments)},keypress:function(){return m.onKeyPress.apply(m,arguments)},resize:function(){m.positionDropdown.apply(m,[])},blur:function(){return m.onBlur.apply(m,arguments)},focus:function(){return m.ignoreBlur=!1,m.onFocus.apply(m,arguments)},paste:function(){return m.onPaste.apply(m,arguments)}}),_.on("keydown"+y,function(t){m.isCmdDown=t[o?"metaKey":"ctrlKey"],m.isCtrlDown=t[o?"altKey":"ctrlKey"],m.isShiftDown=t.shiftKey}),_.on("keyup"+y,function(t){t.keyCode===a&&(m.isCtrlDown=!1),16===t.keyCode&&(m.isShiftDown=!1),t.keyCode===r&&(m.isCmdDown=!1)}),_.on("mousedown"+y,function(t){if(m.isFocused){if(t.target===m.$dropdown[0]||t.target.parentNode===m.$dropdown[0])return!1;m.$control.has(t.target).length||t.target===m.$control[0]||m.blur(t.target)}}),b.on(["scroll"+y,"resize"+y].join(" "),function(){m.isOpen&&m.positionDropdown.apply(m,arguments)}),b.on("mousemove"+y,function(){m.ignoreHover=!1}),this.revertSettings={$children:w.children().detach(),tabindex:w.attr("tabindex")},w.attr("tabindex",-1).hide().after(m.$wrapper),t.isArray(v.items)&&(m.setValue(v.items),delete v.items),l&&w.on("invalid"+y,function(t){t.preventDefault(),m.isInvalid=!0,m.refreshState()}),m.updateOriginalInput(),m.refreshItems(),m.refreshState(),m.updatePlaceholder(),m.isSetup=!0,w.is(":disabled")&&m.disable(),m.on("change",this.onChange),w.data("selectize",m),w.addClass("selectized"),m.trigger("initialize"),!0===v.preload&&m.onSearchChange("")},setupTemplates:function(){var e=this.settings.labelField,i=this.settings.optgroupLabelField,n={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[i])+"</div>"},option:function(t,i){return'<div class="option">'+i(t[e])+"</div>"},item:function(t,i){return'<div class="item">'+i(t[e])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};this.settings.render=t.extend({},n,this.settings.render)},setupCallbacks:function(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)i.hasOwnProperty(t)&&(e=this.settings[i[t]])&&this.on(t,e)},onClick:function(t){this.isFocused||(this.focus(),t.preventDefault())},onMouseDown:function(e){var i=this,n=e.isDefaultPrevented();if(t(e.target),i.isFocused){if(e.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var i=this;return i.isFull()||i.isInputHidden||i.isLocked?void e.preventDefault():void(i.settings.splitOn&&setTimeout(function(){var e=i.$control_input.val();if(e.match(i.settings.splitOn))for(var n=t.trim(e).split(i.settings.splitOn),s=0,o=n.length;s<o;s++)i.createItem(n[s])},0))},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){var e=(t.target,this.$control_input[0],this);{if(!e.isLocked){switch(t.keyCode){case 65:if(e.isCmdDown)return void e.selectAll();break;case 27:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case 78:if(!t.ctrlKey||t.altKey)break;case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case 80:if(!t.ctrlKey||t.altKey)break;case 38:if(e.$activeOption){e.ignoreHover=!0;var n=e.getAdjacentOption(e.$activeOption,-1);n.length&&e.setActiveOption(n,!0,!0)}return void t.preventDefault();case 13:return void(e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),t.preventDefault()));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return e.settings.selectOnTab&&e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),e.isFull()||t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case 8:case 46:return void e.deleteSelection(t)}return!e.isFull()&&!e.isInputHidden||(o?t.metaKey:t.ctrlKey)?void 0:void t.preventDefault()}9!==t.keyCode&&t.preventDefault()}},onKeyUp:function(t){if(this.isLocked)return t&&t.preventDefault();var e=this.$control_input.val()||"";this.lastValue!==e&&(this.lastValue=e,this.onSearchChange(e),this.refreshOptions(),this.trigger("type",e))},onSearchChange:function(t){var e=this,i=e.settings.load;i&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(n){i.apply(e,[t,n])})))},onFocus:function(t){var e=this.isFocused;return this.isDisabled?(this.blur(),t&&t.preventDefault(),!1):void(this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.onSearchChange(""),e||this.trigger("focus"),this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState()))},onBlur:function(t,e){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(t);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),e&&e.focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(e){var i,n,s=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(n=t(e.currentTarget)).hasClass("create")?s.createItem(null,function(){s.settings.closeAfterSelect&&s.close()}):void 0!==(i=n.attr("data-value"))&&(s.lastQuery=null,s.setTextboxValue(""),s.addItem(i),s.settings.closeAfterSelect?s.close():!s.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&s.setActiveOption(s.getOption(i)))},onItemSelect:function(t){this.isLocked||"multi"===this.settings.mode&&(t.preventDefault(),this.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,i=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||i.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input;e.val()!==t&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){u(this,e?[]:["change"],function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(e,i){var n,s,o,r,a,l,h,c;if("single"!==this.settings.mode){if(!(e=t(e)).length)return t(this.$activeItems).removeClass("active"),this.$activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(n=i&&i.type.toLowerCase())&&this.isShiftDown&&this.$activeItems.length){for(c=this.$control.children(".active:last"),(r=Array.prototype.indexOf.apply(this.$control[0].childNodes,[c[0]]))>(a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[e[0]]))&&(h=r,r=a,a=h),s=r;s<=a;s++)l=this.$control[0].childNodes[s],-1===this.$activeItems.indexOf(l)&&(t(l).addClass("active"),this.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&this.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(o=this.$activeItems.indexOf(e[0]),this.$activeItems.splice(o,1),e.removeClass("active")):this.$activeItems.push(e.addClass("active")[0]):(t(this.$activeItems).removeClass("active"),this.$activeItems=[e.addClass("active")[0]]);this.hideInput(),this.isFocused||this.focus()}},setActiveOption:function(e,i,n){var s,o,r,a,l;this.$activeOption&&this.$activeOption.removeClass("active"),this.$activeOption=null,(e=t(e)).length&&(this.$activeOption=e.addClass("active"),!i&&h(i)||(s=this.$dropdown_content.height(),o=this.$activeOption.outerHeight(!0),i=this.$dropdown_content.scrollTop()||0,r=this.$activeOption.offset().top-this.$dropdown_content.offset().top+i,a=r,l=r-s+o,r+o>s+i?this.$dropdown_content.stop().animate({scrollTop:l},n?this.settings.scrollDuration:0):r<i&&this.$dropdown_content.stop().animate({scrollTop:a},n?this.settings.scrollDuration:0)))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e}},search:function(e){var i,n,s,o=this.settings,r=this.getSearchOptions();if(o.score&&"function"!=typeof(s=this.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==this.lastQuery?(this.lastQuery=e,n=this.sifter.search(e,t.extend(r,{score:s})),this.currentResults=n):n=t.extend(!0,{},this.currentResults),o.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==this.items.indexOf(c(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(e){var i,s,o,r,a,l,h,d,p,u,f,g,v,y,b,_;void 0===e&&(e=!0);var w=this,x=t.trim(w.$control_input.val()),C=w.search(x),k=w.$dropdown_content,S=w.$activeOption&&c(w.$activeOption.attr("data-value"));for(r=C.items.length,"number"==typeof w.settings.maxOptions&&(r=Math.min(r,w.settings.maxOptions)),a={},l=[],i=0;i<r;i++)for(h=w.options[C.items[i].id],d=w.render("option",h),p=h[w.settings.optgroupField]||"",u=t.isArray(p)?p:[p],s=0,o=u&&u.length;s<o;s++)p=u[s],w.optgroups.hasOwnProperty(p)||(p=""),a.hasOwnProperty(p)||(a[p]=document.createDocumentFragment(),l.push(p)),a[p].appendChild(d);for(this.settings.lockOptgroupOrder&&l.sort(function(t,e){return(w.optgroups[t].$order||0)-(w.optgroups[e].$order||0)}),f=document.createDocumentFragment(),i=0,r=l.length;i<r;i++)p=l[i],w.optgroups.hasOwnProperty(p)&&a[p].childNodes.length?((g=document.createDocumentFragment()).appendChild(w.render("optgroup_header",w.optgroups[p])),g.appendChild(a[p]),f.appendChild(w.render("optgroup",t.extend({},w.optgroups[p],{html:m(g),dom:g})))):f.appendChild(a[p]);if(k.html(f),w.settings.highlight&&C.query.length&&C.tokens.length)for(k.removeHighlight(),i=0,r=C.tokens.length;i<r;i++)n(k,C.tokens[i].regex);if(!w.settings.hideSelected)for(i=0,r=w.items.length;i<r;i++)w.getOption(w.items[i]).addClass("selected");(v=w.canCreate(x))&&(k.prepend(w.render("option_create",{input:x})),_=t(k[0].childNodes[0])),w.hasOptions=C.items.length>0||v,w.hasOptions?(C.items.length>0?((b=S&&w.getOption(S))&&b.length?y=b:"single"===w.settings.mode&&w.items.length&&(y=w.getOption(w.items[0])),y&&y.length||(y=_&&!w.settings.addPrecedence?w.getAdjacentOption(_,1):k.find("[data-selectable]:first"))):y=_,w.setActiveOption(y),e&&!w.isOpen&&w.open()):(w.setActiveOption(null),e&&w.isOpen&&w.close())},addOption:function(e){var i,n,s;if(t.isArray(e))for(i=0,n=e.length;i<n;i++)this.addOption(e[i]);else(s=this.registerOption(e))&&(this.userOptions[s]=!0,this.lastQuery=null,this.trigger("option_add",s,e))},registerOption:function(t){var e=c(t[this.settings.valueField]);return void 0!==e&&null!==e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=c(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,i){var n,s,o,r,a,l,h;if(e=c(e),o=c(i[this.settings.valueField]),null!==e&&this.options.hasOwnProperty(e)){if("string"!=typeof o)throw new Error("Value must be set in option data");h=this.options[e].$order,o!==e&&(delete this.options[e],-1!==(r=this.items.indexOf(e))&&this.items.splice(r,1,o)),i.$order=i.$order||h,this.options[o]=i,a=this.renderCache.item,l=this.renderCache.option,a&&(delete a[e],delete a[o]),l&&(delete l[e],delete l[o]),-1!==this.items.indexOf(o)&&(n=this.getItem(e),s=t(this.render("item",i)),n.hasClass("active")&&s.addClass("active"),n.replaceWith(s)),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}},removeOption:function(t,e){t=c(t);var i=this.renderCache.item,n=this.renderCache.option;i&&delete i[t],n&&delete n[t],delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t,e)},clearOptions:function(){this.loadedSearches={},this.userOptions={},this.renderCache={},this.options=this.sifter.items={},this.lastQuery=null,this.trigger("option_clear"),this.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,i){var n=this.$dropdown.find("[data-selectable]"),s=n.index(e)+i;return s>=0&&s<n.length?n.eq(s):t()},getElementWithValue:function(e,i){if(void 0!==(e=c(e))&&null!==e)for(var n=0,s=i.length;n<s;n++)if(i[n].getAttribute("data-value")===e)return t(i[n]);return t()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(e,i){for(var n=t.isArray(e)?e:[e],s=0,o=n.length;s<o;s++)this.isPending=s<o-1,this.addItem(n[s],i)},addItem:function(e,i){u(this,i?[]:["change"],function(){var n,s,o,r,a,l=this.settings.mode;return e=c(e),-1!==this.items.indexOf(e)?void("single"===l&&this.close()):void(this.options.hasOwnProperty(e)&&("single"===l&&this.clear(i),"multi"===l&&this.isFull()||(n=t(this.render("item",this.options[e])),a=this.isFull(),this.items.splice(this.caretPos,0,e),this.insertAtCaret(n),(!this.isPending||!a&&this.isFull())&&this.refreshState(),this.isSetup&&(o=this.$dropdown_content.find("[data-selectable]"),this.isPending||(s=this.getOption(e),r=this.getAdjacentOption(s,1).attr("data-value"),this.refreshOptions(this.isFocused&&"single"!==l),r&&this.setActiveOption(this.getOption(r))),!o.length||this.isFull()?this.close():this.positionDropdown(),this.updatePlaceholder(),this.trigger("item_add",e,n),this.updateOriginalInput({silent:i})))))})},removeItem:function(e,i){var n,s,o;n=e instanceof t?e:this.getItem(e),e=c(n.attr("data-value")),-1!==(s=this.items.indexOf(e))&&(n.remove(),n.hasClass("active")&&(o=this.$activeItems.indexOf(n[0]),this.$activeItems.splice(o,1)),this.items.splice(s,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(e)&&this.removeOption(e,i),s<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:i}),this.positionDropdown(),this.trigger("item_remove",e,n))},createItem:function(e,i){var n=this,s=n.caretPos;e=e||t.trim(n.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(e))return o(),!1;n.lock();var r="function"==typeof n.settings.create?this.settings.create:function(t){var e={};return e[n.settings.labelField]=t,e[n.settings.valueField]=t,e},a=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}(function(t){if(n.unlock(),!t||"object"!=typeof t)return o();var e=c(t[n.settings.valueField]);return"string"!=typeof e?o():(n.setTextboxValue(""),n.addOption(t),n.setCaret(s),n.addItem(e),n.refreshOptions(i&&"single"!==n.settings.mode),void o(t))}),l=r.apply(this,[e,a]);return void 0!==l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var t=!this.items.length;this.isInvalid=t,this.$control_input.prop("required",t),this.$input.prop("required",!t)},refreshClasses:function(){var e=this.isFull(),i=this.isLocked;this.$wrapper.toggleClass("rtl",this.rtl),this.$control.toggleClass("focus",this.isFocused).toggleClass("disabled",this.isDisabled).toggleClass("required",this.isRequired).toggleClass("invalid",this.isInvalid).toggleClass("locked",i).toggleClass("full",e).toggleClass("not-full",!e).toggleClass("input-active",this.isFocused&&!this.isInputHidden).toggleClass("dropdown-active",this.isOpen).toggleClass("has-options",!t.isEmptyObject(this.options)).toggleClass("has-items",this.items.length>0),this.$control_input.data("grow",!e&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,i,n,s;if(t=t||{},1===this.tagType){for(n=[],e=0,i=this.items.length;e<i;e++)s=this.options[this.items[e]][this.settings.labelField]||"",n.push('<option value="'+d(this.items[e])+'" selected="selected">'+d(s)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),this.$input.html(n.join(""))}else this.$input.val(this.getValue()),this.$input.attr("value",this.$input.val());this.isSetup&&(t.silent||this.trigger("change",this.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.css({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.css({visibility:"visible"}),this.trigger("dropdown_open",this.$dropdown))},close:function(){var t=this.isOpen;"single"===this.settings.mode&&this.items.length&&(this.hideInput(),this.$control_input.blur()),this.isOpen=!1,this.$dropdown.hide(),this.setActiveOption(null),this.refreshState(),t&&this.trigger("dropdown_close",this.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(t){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.trigger("clear"))},insertAtCaret:function(e){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(e):t(this.$control[0].childNodes[i]).before(e),this.setCaret(i+1)},deleteSelection:function(e){var i,n,s,o,r,a,l,h,c;if(s=e&&8===e.keyCode?-1:1,o=f(this.$control_input[0]),this.$activeOption&&!this.settings.hideSelected&&(l=this.getAdjacentOption(this.$activeOption,-1).attr("data-value")),r=[],this.$activeItems.length){for(c=this.$control.children(".active:"+(s>0?"last":"first")),a=this.$control.children(":not(input)").index(c),s>0&&a++,i=0,n=this.$activeItems.length;i<n;i++)r.push(t(this.$activeItems[i]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(s<0&&0===o.start&&0===o.length?r.push(this.items[this.caretPos-1]):s>0&&o.start===this.$control_input.val().length&&r.push(this.items[this.caretPos]));if(!r.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.apply(this,[r]))return!1;for(void 0!==a&&this.setCaret(a);r.length;)this.removeItem(r.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!0),l&&(h=this.getOption(l)).length&&this.setActiveOption(h),!0},advanceSelection:function(t,e){var i,n,s,o,r;0!==t&&(this.rtl&&(t*=-1),i=t>0?"last":"first",n=f(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(o=this.$control_input.val().length,(t<0?0===n.start&&0===n.length:n.start===o)&&!o&&this.advanceCaret(t,e)):(r=this.$control.children(".active:"+i)).length&&(s=this.$control.children(":not(input)").index(r),this.setActiveItem(null),this.setCaret(t>0?s+1:s)))},advanceCaret:function(t,e){var i,n;0!==t&&(i=t>0?"next":"prev",this.isShiftDown?(n=this.$control_input[i]()).length&&(this.hideInput(),this.setActiveItem(n),e&&e.preventDefault()):this.setCaret(this.caretPos+t))},setCaret:function(e){if(e="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,e)),!this.isPending){var i,n,s,o;for(i=0,n=(s=this.$control.children(":not(input)")).length;i<n;i++)o=t(s[i]).detach(),i<e?this.$control_input.before(o):this.$control.append(o)}this.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){this.$input.prop("disabled",!1),this.$control_input.prop("disabled",!1).prop("tabindex",this.tabIndex),this.isDisabled=!1,this.unlock()},destroy:function(){var e=this.eventNS,i=this.revertSettings;this.trigger("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),this.$control_input.removeData("grow"),this.$input.removeData("selectize"),t(window).off(e),t(document).off(e),t(document.body).off(e),delete this.$input[0].selectize},render:function(e,i){var n,s,o="",r=!1;return"option"!==e&&"item"!==e||(n=c(i[this.settings.valueField]),r=!!n),r&&(h(this.renderCache[e])||(this.renderCache[e]={}),this.renderCache[e].hasOwnProperty(n))?this.renderCache[e][n]:(o=t(this.settings.render[e].apply(this,[i,d])),"option"===e||"option_create"===e?o.attr("data-selectable",""):"optgroup"===e&&(s=i[this.settings.optgroupValueField]||"",o.attr("data-group",s)),"option"!==e&&"item"!==e||o.attr("data-value",n||""),r&&(this.renderCache[e][n]=o[0]),o[0])},clearCache:function(t){void 0===t?this.renderCache={}:delete this.renderCache[t]},canCreate:function(t){if(!this.settings.create)return!1;var e=this.settings.createFilter;return t.length&&("function"!=typeof e||e.apply(this,[t]))&&("string"!=typeof e||new RegExp(e).test(t))&&(!(e instanceof RegExp)||e.test(t))}}),v.count=0,v.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},t.fn.selectize=function(e){var i=t.fn.selectize.defaults,n=t.extend({},i,e),s=n.dataAttr,o=n.labelField,r=n.valueField,a=n.optgroupField,l=n.optgroupLabelField,h=n.optgroupValueField;return this.each(function(){if(!this.selectize){var d=t(this),p=this.tagName.toLowerCase(),u=d.attr("placeholder")||d.attr("data-placeholder");u||n.allowEmptyOption||(u=d.children('option[value=""]').text());var f={placeholder:u,options:[],optgroups:[],items:[]};"select"===p?function(e,i){var d,p,u,f,g=i.options,m={},v=function(t){var e=s&&t.attr(s);return"string"==typeof e&&e.length?JSON.parse(e):null},y=function(e,s){e=t(e);var l=c(e.val());if(l||n.allowEmptyOption)if(m.hasOwnProperty(l)){if(s){var h=m[l][a];h?t.isArray(h)?h.push(s):m[l][a]=[h,s]:m[l][a]=s}}else{var d=v(e)||{};d[o]=d[o]||e.text(),d[r]=d[r]||l,d[a]=d[a]||s,m[l]=d,g.push(d),e.is(":selected")&&i.items.push(l)}},b=function(e){var n,s,o,r,a;for((o=(e=t(e)).attr("label"))&&(r=v(e)||{},r[l]=o,r[h]=o,i.optgroups.push(r)),n=0,s=(a=t("option",e)).length;n<s;n++)y(a[n],o)};for(i.maxItems=e.attr("multiple")?null:1,d=0,p=(f=e.children()).length;d<p;d++)"optgroup"===(u=f[d].tagName.toLowerCase())?b(f[d]):"option"===u&&y(f[d])}(d,f):function(e,i){var a,l,h,c,d=e.attr(s);if(d)for(i.options=JSON.parse(d),a=0,l=i.options.length;a<l;a++)i.items.push(i.options[a][r]);else{var p=t.trim(e.val()||"");if(!n.allowEmptyOption&&!p.length)return;for(a=0,l=(h=p.split(n.delimiter)).length;a<l;a++)c={},c[o]=h[a],c[r]=h[a],i.options.push(c);i.items=h}}(d,f),new v(d,t.extend(!0,{},i,f,e))}})},t.fn.selectize.defaults=v.defaults,t.fn.selectize.support={validity:l},v.define("drag_drop",function(e){if(!t.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var i=this;i.lock=function(){var t=i.lock;return function(){var e=i.$control.data("sortable");return e&&e.disable(),t.apply(i,arguments)}}(),i.unlock=function(){var t=i.unlock;return function(){var e=i.$control.data("sortable");return e&&e.enable(),t.apply(i,arguments)}}(),i.setup=function(){var e=i.setup;return function(){e.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var e=i.$activeItems?i.$activeItems.slice():null,s=[];n.children("[data-value]").each(function(){s.push(t(this).attr("data-value"))}),i.setValue(s),i.setActiveItem(e)}})}}()}}),v.define("dropdown_header",function(e){var i=this;e=t.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},e),i.setup=function(){var n=i.setup;return function(){n.apply(i,arguments),i.$dropdown_header=t(e.html(e)),i.$dropdown.prepend(i.$dropdown_header)}}()}),v.define("optgroup_columns",function(e){var i=this;e=t.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,i){var n=e.closest("[data-group]").find("[data-selectable]"),s=n.index(e)+i;return s>=0&&s<n.length?n.eq(s):t()},this.onKeyDown=function(){var t=i.onKeyDown;return function(e){var n,s,o,r;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?t.apply(this,arguments):(i.ignoreHover=!0,r=this.$activeOption.closest("[data-group]"),n=r.find("[data-selectable]").index(this.$activeOption),r=37===e.keyCode?r.prev("[data-group]"):r.next("[data-group]"),o=r.find("[data-selectable]"),void((s=o.eq(Math.min(o.length-1,n))).length&&this.setActiveOption(s)))}}();var n=function(){var t,e=n.width,i=document;return void 0===e&&(t=i.createElement("div"),t.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,i.body.appendChild(t),e=n.width=t.offsetWidth-t.clientWidth,i.body.removeChild(t)),e},s=function(){var s,o,r,a,l,h,c;if(c=t("[data-group]",i.$dropdown_content),(o=c.length)&&i.$dropdown_content.width()){if(e.equalizeHeight){for(r=0,s=0;s<o;s++)r=Math.max(r,c.eq(s).height());c.css({height:r})}e.equalizeWidth&&(h=i.$dropdown_content.innerWidth()-n(),a=Math.round(h/o),c.css({width:a}),o>1&&(l=h-a*(o-1),c.eq(o-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(p.after(this,"positionDropdown",s),p.after(this,"refreshOptions",s))}),v.define("remove_button",function(e){e=t.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);return"single"===this.settings.mode?void function(e,i){i.className="remove-single";var n=e,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+d(i.title)+'">'+i.label+"</a>";e.setup=function(){var o=n.setup;return function(){if(i.append){var r=t(n.$input.context).attr("id"),a=(t("#"+r),n.settings.render.item);n.settings.render.item=function(t){return function(t,e){return t+e}(a.apply(e,arguments),s)}}o.apply(e,arguments),e.$control.on("click","."+i.className,function(t){t.preventDefault(),n.isLocked||n.clear()})}}()}(this,e):void function(e,i){var n=e,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+d(i.title)+'">'+i.label+"</a>";e.setup=function(){var o=n.setup;return function(){if(i.append){var r=n.settings.render.item;n.settings.render.item=function(t){return function(t,e){var i=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,i)+e+t.substring(i)}(r.apply(e,arguments),s)}}o.apply(e,arguments),e.$control.on("click","."+i.className,function(e){if(e.preventDefault(),!n.isLocked){var i=t(e.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}(this,e)}),v.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=function(){var i=e.onKeyDown;return function(e){var n,s;return 8===e.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length?(s=this.options[this.items[n]],this.deleteSelection(e)&&(this.setTextboxValue(t.text.apply(this,[s])),this.refreshOptions(!0)),void e.preventDefault()):i.apply(this,arguments)}}()}),v}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=t()}}(function(){return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){return s(e[r][1][t]||t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var s=Element.prototype;s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector}e.exports=function(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},{}],2:[function(t,e,i){var n=t("./closest");e.exports=function(t,e,i,s,o){var r=function(t,e,i,s){return function(i){i.delegateTarget=n(i.target,e),i.delegateTarget&&s.call(t,i)}}.apply(this,arguments);return t.addEventListener(i,r,o),{destroy:function(){t.removeEventListener(i,r,o)}}}},{"./closest":1}],3:[function(t,e,i){i.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},i.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||i.node(t[0]))},i.string=function(t){return"string"==typeof t||t instanceof String},i.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e,i){var n=t("./is"),s=t("delegate");e.exports=function(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!n.string(e))throw new TypeError("Second argument must be a String");if(!n.fn(i))throw new TypeError("Third argument must be a Function");if(n.node(t))return function(t,e,i){return t.addEventListener(e,i),{destroy:function(){t.removeEventListener(e,i)}}}(t,e,i);if(n.nodeList(t))return function(t,e,i){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,i)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,i)})}}}(t,e,i);if(n.string(t))return function(t,e,i){return s(document.body,t,e,i)}(t,e,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(t,e,i){e.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),i||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),s=document.createRange();s.selectNodeContents(t),n.removeAllRanges(),n.addRange(s),e=n.toString()}return e}},{}],6:[function(t,e,i){function n(){}n.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){function n(){s.off(t,n),e.apply(i,arguments)}var s=this;return n._=e,this.on(t,n,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,s=i.length;n<s;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],s=[];if(n&&e)for(var o=0,r=n.length;o<r;o++)n[o].fn!==e&&n[o].fn._!==e&&s.push(n[o]);return s.length?i[t]=s:delete i[t],this}},e.exports=n},{}],7:[function(t,e,i){!function(n,s){if(void 0!==i)s(e,t("select"));else{var o={exports:{}};s(o,n.select),n.clipboardAction=o.exports}}(this,function(t,e){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(e),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":n(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=o})},{select:5}],8:[function(t,e,i){!function(n,s){if(void 0!==i)s(e,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var o={exports:{}};s(o,n.clipboardAction,n.tinyEmitter,n.goodListener),n.clipboard=o.exports}}(this,function(t,e,i,n){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}var r=s(e),a=s(i),l=s(n),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),d=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.resolveOptions(i),n.listenClick(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),c(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===h(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,l.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new r.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return o("action",t)}},{key:"defaultTarget",value:function(t){var e=o("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return o("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return e.forEach(function(t){i=i&&!!document.queryCommandSupported(t)}),i}}]),e}();t.exports=d})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&"object"==typeof module.exports?t(require("jquery")):t(jQuery)}(function(t){function e(){var e=s.settings;if(e.autoDispose&&!t.contains(document.documentElement,this))return t(this).timeago("dispose"),this;var o=function(e){if(!(e=t(e)).data("timeago")){e.data("timeago",{datetime:s.datetime(e)});var i=t.trim(e.text());s.settings.localeTitle?e.attr("title",e.data("timeago").datetime.toLocaleString()):!(i.length>0)||s.isTime(e)&&e.attr("title")||e.attr("title",i)}return e.data("timeago")}(this);return isNaN(o.datetime)||(0===e.cutoff||Math.abs(n(o.datetime))<e.cutoff?t(this).text(i(o.datetime)):t(this).attr("title").length>0&&t(this).text(t(this).attr("title"))),this}function i(t){return s.inWords(n(t))}function n(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return e instanceof Date?i(e):i("string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var s=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,autoDispose:!0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){function i(i,s){var o=t.isFunction(i)?i(s,e):i,r=n.numbers&&n.numbers[s]||s;return o.replace(/%d/i,r)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var n=this.settings.strings,s=n.prefixAgo,o=n.suffixAgo;if(this.settings.allowFuture&&e<0&&(s=n.prefixFromNow,o=n.suffixFromNow),!this.settings.allowPast&&e>=0)return this.settings.strings.inPast;var r=Math.abs(e)/1e3,a=r/60,l=a/60,h=l/24,c=h/365,d=r<45&&i(n.seconds,Math.round(r))||r<90&&i(n.minute,1)||a<45&&i(n.minutes,Math.round(a))||a<90&&i(n.hour,1)||l<24&&i(n.hours,Math.round(l))||l<42&&i(n.day,1)||h<30&&i(n.days,Math.round(h))||h<45&&i(n.month,1)||h<365&&i(n.months,Math.round(h/30))||c<1.5&&i(n.year,1)||i(n.years,Math.round(c)),p=n.wordSeparator||"";return void 0===n.wordSeparator&&(p=" "),t.trim([s,d,o].join(p))},parse:function(e){var i=t.trim(e);return i=i.replace(/\.\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),i=i.replace(/([\+\-]\d\d)$/," $100"),new Date(i)},datetime:function(e){var i=s.isTime(e)?t(e).attr("datetime"):t(e).attr("title");return s.parse(i)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var o={init:function(){o.dispose.call(this);var i=t.proxy(e,this);i();var n=s.settings;n.refreshMillis>0&&(this._timeagoInterval=setInterval(i,n.refreshMillis))},update:function(i){var n=i instanceof Date?i:s.parse(i);t(this).data("timeago",{datetime:n}),s.settings.localeTitle&&t(this).attr("title",n.toLocaleString()),e.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:s.parse(s.isTime(this)?t(this).attr("datetime"):t(this).attr("title"))}),e.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};t.fn.timeago=function(t,e){var i=t?o[t]:o.init;if(!i)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){i.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")});